{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pushy\\\\Desktop\\\\Work\\\\ek\\\\price-ua\\\\cosmetick-frontend\\\\src\\\\components\\\\Wishlist.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useDrag, useDrop, useDragLayer } from 'react-dnd';\nimport './Wishlist.css';\nimport './ProductList.css'; // Import ProductList.css for shared styles\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  PRODUCT: 'product'\n};\nfunction ProductCard({\n  product,\n  savedProductIds,\n  toggleSavedProduct,\n  getProductName,\n  getMinPrice,\n  setDraggedProductId\n}) {\n  _s();\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.PRODUCT,\n    item: {\n      productId: product.id\n    },\n    end: () => setDraggedProductId(null),\n    // Reset draggedProductId when drag ends\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag,\n    className: \"product-card-container\",\n    style: {\n      opacity: isDragging ? 0.5 : 1\n    },\n    onDragStart: () => {\n      console.log('Drag started, productId:', product.id);\n      setDraggedProductId(product.id);\n    },\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `/product/${product.id}`,\n      className: \"product-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: getProductName(product)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.images && product.images.length > 0 ? product.images[0] : '/img/placeholder.webp',\n        alt: product.name,\n        onError: e => e.target.src = '/img/placeholder.webp'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"price\",\n        children: getMinPrice(product.store_prices)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: product.description || 'Опис відсутній'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `heart-icon ${savedProductIds.includes(product.id) ? 'saved' : ''}`,\n      onClick: () => toggleSavedProduct(product.id),\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: savedProductIds.includes(product.id) ? '#d32f2f' : 'none',\n        stroke: \"#d32f2f\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductCard, \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n});\n_c = ProductCard;\nfunction CategorySection({\n  category,\n  editingCategoryId,\n  editedCategoryName,\n  setEditedCategoryName,\n  handleUpdateCategory,\n  startEditingCategory,\n  openDeleteModal,\n  draggedProductId,\n  moveProductToCategory,\n  products,\n  savedProductIds,\n  toggleSavedProduct,\n  getProductName,\n  getMinPrice,\n  setDraggedProductId,\n  draggedProductCategoryId\n}) {\n  _s2();\n  const [{\n    isOver: isOverPlaceholder\n  }, placeholderDrop] = useDrop(() => ({\n    accept: ItemTypes.PRODUCT,\n    drop: item => moveProductToCategory(item.productId, category.id),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const categoryProducts = products.filter(product => product.saved_category_id === category.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-header\",\n      children: [editingCategoryId === category.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: editedCategoryName,\n          onChange: e => setEditedCategoryName(e.target.value),\n          className: \"category-edit-input-small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-edit-btn\",\n          onClick: () => handleUpdateCategory(category.id),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"#008000\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M20 6L9 17l-5-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: category.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"edit-category-btn\",\n        onClick: () => startEditingCategory(category),\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"#333\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"polygon\", {\n            points: \"18 2 22 6 12 16 8 16 8 12 18 2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-category-btn\",\n        onClick: () => openDeleteModal(category),\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"#333\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M3 6h18\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"10\",\n            y1: \"11\",\n            x2: \"10\",\n            y2: \"17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"14\",\n            y1: \"11\",\n            x2: \"14\",\n            y2: \"17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drop-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-products products-list loaded\",\n        children: [categoryProducts.length > 0 ? categoryProducts.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n          product: product,\n          savedProductIds: savedProductIds,\n          toggleSavedProduct: toggleSavedProduct,\n          getProductName: getProductName,\n          getMinPrice: getMinPrice,\n          setDraggedProductId: setDraggedProductId\n        }, product.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-products-text\",\n          children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0456\\u0432 \\u0443 \\u0446\\u0456\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this), draggedProductId && draggedProductCategoryId !== category.id && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: placeholderDrop,\n          className: `placeholder-card ${isOverPlaceholder ? 'drop-target' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"plus-icon\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s2(CategorySection, \"wj9/lPQNGLUZM0cR2toxN1BM95c=\", false, function () {\n  return [useDrop];\n});\n_c2 = CategorySection;\nfunction Wishlist() {\n  _s3();\n  const [products, setProducts] = useState([]);\n  const [savedProductIds, setSavedProductIds] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [productError, setProductError] = useState(null);\n  const [categoryError, setCategoryError] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingCategoryId, setEditingCategoryId] = useState(null);\n  const [editedCategoryName, setEditedCategoryName] = useState('');\n  const [deleteCategory, setDeleteCategory] = useState(null);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isDeleteWithProductsModalOpen, setIsDeleteWithProductsModalOpen] = useState(false);\n  const [draggedProductId, setDraggedProductId] = useState(null);\n  const [draggedProductCategoryId, setDraggedProductCategoryId] = useState(null);\n  const navigate = useNavigate();\n\n  // Custom auto-scroll during drag\n  const {\n    clientOffset,\n    isDragging\n  } = useDragLayer(monitor => ({\n    clientOffset: monitor.getClientOffset(),\n    isDragging: monitor.isDragging()\n  }));\n  useEffect(() => {\n    if (!isDragging || !clientOffset) return;\n    const zoneHeight = 200; // Height of top/bottom auto-scroll zones (pixels)\n    const scrollSpeed = 10; // Pixels per frame (~60fps, 16ms)\n    let scrollInterval = null;\n    const checkScroll = () => {\n      const y = clientOffset.y;\n      const windowHeight = window.innerHeight;\n      if (y < zoneHeight) {\n        console.log('Scrolling up, y:', y);\n        window.scrollBy(0, -scrollSpeed);\n      } else if (y > windowHeight - zoneHeight) {\n        console.log('Scrolling down, y:', y);\n        window.scrollBy(0, scrollSpeed);\n      }\n    };\n    scrollInterval = setInterval(checkScroll, 16); // ~60fps\n\n    return () => {\n      if (scrollInterval) {\n        console.log('Stopping auto-scroll');\n        clearInterval(scrollInterval);\n      }\n    };\n  }, [clientOffset, isDragging]);\n\n  // Set draggedProductCategoryId when drag starts\n  useEffect(() => {\n    if (draggedProductId) {\n      const product = products.find(p => p.id === draggedProductId);\n      setDraggedProductCategoryId(product ? product.saved_category_id : null);\n    } else {\n      setDraggedProductCategoryId(null);\n    }\n  }, [draggedProductId, products]);\n\n  // Function to format product name consistently with ProductList\n  const getProductName = product => {\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\n  };\n\n  // Function to get minimum price from store_prices\n  const getMinPrice = storePrices => {\n    if (!storePrices || storePrices.length === 0) return 'Немає в наявності';\n    return `${Math.min(...storePrices.map(sp => sp.price))} грн`;\n  };\n\n  // Drop hook for uncategorized placeholder card\n  const [{\n    isOver: isOverUncategorizedPlaceholder\n  }, uncategorizedPlaceholderDrop] = useDrop(() => ({\n    accept: ItemTypes.PRODUCT,\n    drop: item => moveProductToCategory(item.productId, null),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n\n  // Fetch wishlist and categories\n  useEffect(() => {\n    const fetchWishlistAndCategories = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n      setIsLoading(true);\n\n      // Fetch saved products with category IDs\n      try {\n        const savedResponse = await axios.get('https://price-ua-react-backend.onrender.com/saved-products', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const savedProducts = savedResponse.data.savedProducts || [];\n        const savedIds = savedProducts.map(sp => sp.product_id);\n        setSavedProductIds(savedIds);\n        if (savedIds.length === 0) {\n          setProducts([]);\n        } else {\n          const productPromises = savedIds.map(id => axios.get(`https://price-ua-react-backend.onrender.com/products/${id}`));\n          const productResponses = await Promise.all(productPromises);\n          const fetchedProducts = productResponses.map((response, index) => {\n            var _savedProducts$find;\n            return {\n              ...response.data,\n              saved_category_id: ((_savedProducts$find = savedProducts.find(sp => sp.product_id === response.data.id)) === null || _savedProducts$find === void 0 ? void 0 : _savedProducts$find.saved_category_id) || null\n            };\n          });\n          setProducts(fetchedProducts);\n        }\n      } catch (err) {\n        var _err$response, _err$response2;\n        console.error('Error fetching wishlist:', err);\n        setProductError('Не вдалося завантажити список бажаного');\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 403) {\n          navigate('/login');\n        }\n      }\n\n      // Fetch categories\n      try {\n        const categoriesResponse = await axios.get('https://price-ua-react-backend.onrender.com/categories', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCategories(categoriesResponse.data || []);\n      } catch (err) {\n        var _err$response3, _err$response4;\n        console.error('Error fetching categories:', err);\n        setCategoryError('Не вдалося завантажити категорії');\n        if (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 401 || ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.status) === 403) {\n          navigate('/login');\n        }\n      }\n      setIsLoading(false);\n    };\n    fetchWishlistAndCategories();\n  }, [navigate]);\n\n  // Toggle saved product\n  const toggleSavedProduct = async productId => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    try {\n      await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setSavedProductIds(savedProductIds.filter(id => id !== productId));\n      setProducts(products.filter(product => product.id !== productId));\n    } catch (err) {\n      console.error('Error removing product from wishlist:', err);\n      setProductError('Не вдалося видалити товар із бажаного');\n    }\n  };\n\n  // Handle category creation\n  const handleAddCategory = async () => {\n    const token = localStorage.getItem('token');\n    if (!token || !newCategoryName.trim()) {\n      setCategoryError('Введіть назву категорії');\n      return;\n    }\n    try {\n      const response = await axios.post('https://price-ua-react-backend.onrender.com/categories', {\n        name: newCategoryName.trim()\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setCategories([...categories, response.data]);\n      setNewCategoryName('');\n      setIsModalOpen(false);\n      setCategoryError(null);\n    } catch (err) {\n      console.error('Error adding category:', err);\n      setCategoryError('Не вдалося додати категорію');\n    }\n  };\n\n  // Handle start editing category\n  const startEditingCategory = category => {\n    setEditingCategoryId(category.id);\n    setEditedCategoryName(category.name);\n  };\n\n  // Handle category name update\n  const handleUpdateCategory = async categoryId => {\n    const token = localStorage.getItem('token');\n    if (!token || !editedCategoryName.trim()) {\n      setCategoryError('Введіть назву категорії');\n      return;\n    }\n    const originalCategories = [...categories];\n    const updatedCategories = categories.map(cat => cat.id === categoryId ? {\n      ...cat,\n      name: editedCategoryName.trim()\n    } : cat);\n    setCategories(updatedCategories);\n    setEditingCategoryId(null);\n    setEditedCategoryName('');\n    setCategoryError(null);\n    try {\n      await axios.put(`https://price-ua-react-backend.onrender.com/categories/${categoryId}`, {\n        name: editedCategoryName.trim()\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (err) {\n      console.error('Error updating category:', err);\n      setCategoryError('Не вдалося оновити категорію');\n      setCategories(originalCategories); // Revert on failure\n    }\n  };\n\n  // Handle open delete confirmation modal\n  const openDeleteModal = category => {\n    setDeleteCategory(category);\n    const categoryProducts = products.filter(p => p.saved_category_id === category.id);\n    if (categoryProducts.length > 0) {\n      setIsDeleteWithProductsModalOpen(true);\n    } else {\n      setIsDeleteModalOpen(true);\n    }\n  };\n\n  // Handle close delete confirmation modals\n  const closeDeleteModal = () => {\n    setDeleteCategory(null);\n    setIsDeleteModalOpen(false);\n    setIsDeleteWithProductsModalOpen(false);\n    setCategoryError(null);\n  };\n\n  // Handle category deletion (empty category)\n  const handleDeleteCategory = async () => {\n    const token = localStorage.getItem('token');\n    if (!token || !deleteCategory) {\n      setCategoryError('Помилка видалення категорії');\n      closeDeleteModal();\n      return;\n    }\n    const originalCategories = [...categories];\n    setCategories(categories.filter(cat => cat.id !== deleteCategory.id));\n    closeDeleteModal();\n    try {\n      await axios.delete(`https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('Empty category deleted:', deleteCategory.id);\n    } catch (err) {\n      console.error('Error deleting category:', err);\n      setCategoryError('Не вдалося видалити категорію');\n      setCategories(originalCategories);\n    }\n  };\n\n  // Handle category deletion with products (save products)\n  const handleDeleteCategorySaveProducts = async () => {\n    const token = localStorage.getItem('token');\n    if (!token || !deleteCategory) {\n      setCategoryError('Помилка видалення категорії');\n      closeDeleteModal();\n      return;\n    }\n    const originalCategories = [...categories];\n    const originalProducts = [...products];\n    setCategories(categories.filter(cat => cat.id !== deleteCategory.id));\n    setProducts(products.map(p => p.saved_category_id === deleteCategory.id ? {\n      ...p,\n      saved_category_id: null\n    } : p));\n    closeDeleteModal();\n    try {\n      // Update products to uncategorized\n      const categoryProducts = originalProducts.filter(p => p.saved_category_id === deleteCategory.id);\n      await Promise.all(categoryProducts.map(product => axios.patch(`https://price-ua-react-backend.onrender.com/saved-products/${product.id}`, {\n        saved_category_id: null\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })));\n      // Delete category\n      await axios.delete(`https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('Category deleted, products moved to uncategorized:', deleteCategory.id);\n    } catch (err) {\n      console.error('Error deleting category or moving products:', err);\n      setCategoryError('Не вдалося видалити категорію або перемістити товари');\n      setCategories(originalCategories);\n      setProducts(originalProducts);\n    }\n  };\n\n  // Handle category deletion with products (delete products and category)\n  const handleDeleteCategoryDeleteProducts = async () => {\n    const token = localStorage.getItem('token');\n    if (!token || !deleteCategory) {\n      setCategoryError('Помилка видалення категорії');\n      closeDeleteModal();\n      return;\n    }\n    const originalCategories = [...categories];\n    const originalProducts = [...products];\n    const originalSavedProductIds = [...savedProductIds];\n    const categoryProducts = products.filter(p => p.saved_category_id === deleteCategory.id);\n    const categoryProductIds = categoryProducts.map(p => p.id);\n\n    // Update UI\n    setCategories(categories.filter(cat => cat.id !== deleteCategory.id));\n    setProducts(products.filter(p => !categoryProductIds.includes(p.id)));\n    setSavedProductIds(savedProductIds.filter(id => !categoryProductIds.includes(id)));\n    closeDeleteModal();\n    try {\n      // Delete products\n      await Promise.all(categoryProductIds.map(productId => axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })));\n      // Delete category\n      await axios.delete(`https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('Category and products deleted:', {\n        categoryId: deleteCategory.id,\n        productIds: categoryProductIds\n      });\n    } catch (err) {\n      console.error('Error deleting category or products:', err);\n      setCategoryError('Не вдалося видалити категорію або товари');\n      setCategories(originalCategories);\n      setProducts(originalProducts);\n      setSavedProductIds(originalSavedProductIds);\n    }\n  };\n\n  // Handle moving product to category (or uncategorized)\n  const moveProductToCategory = async (productId, categoryId) => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    setProducts(prevProducts => {\n      const updatedProducts = prevProducts.map(p => p.id === productId ? {\n        ...p,\n        saved_category_id: categoryId\n      } : p);\n      return updatedProducts;\n    });\n    setDraggedProductId(null);\n    setDraggedProductCategoryId(null);\n    try {\n      await axios.patch(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\n        saved_category_id: categoryId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (err) {\n      console.error('Error moving product to category:', err);\n      setCategoryError('Не вдалося перемістити товар до категорії');\n      setProducts(prevProducts => [...prevProducts]);\n      setDraggedProductId(null);\n      setDraggedProductCategoryId(null);\n    }\n  };\n\n  // Handle modal open/close\n  const openModal = () => setIsModalOpen(true);\n  const closeModal = () => {\n    setNewCategoryName('');\n    setIsModalOpen(false);\n    setCategoryError(null);\n  };\n\n  // Filter uncategorized products\n  const uncategorizedProducts = products.filter(product => !product.saved_category_id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wishlist\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wishlist-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041C\\u0456\\u0439 \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-category-btn\",\n        onClick: openModal,\n        children: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 9\n    }, this), productError && !products.length && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wishlist-error\",\n      children: productError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 44\n    }, this), categoryError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wishlist-error\",\n      children: categoryError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 25\n    }, this), !isLoading && products.length === 0 && !productError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wishlist-empty\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0412\\u0430\\u0448 \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E \\u043F\\u043E\\u0440\\u043E\\u0436\\u043D\\u0456\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0414\\u043E\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 \\u0434\\u043E \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443 \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E, \\u0449\\u043E\\u0431 \\u043F\\u043E\\u0431\\u0430\\u0447\\u0438\\u0442\\u0438 \\u0457\\u0445 \\u0442\\u0443\\u0442.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 9\n    }, this), !isLoading && uncategorizedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wishlist-products products-list loaded\",\n      children: [uncategorizedProducts.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product,\n        savedProductIds: savedProductIds,\n        toggleSavedProduct: toggleSavedProduct,\n        getProductName: getProductName,\n        getMinPrice: getMinPrice,\n        setDraggedProductId: setDraggedProductId\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 13\n      }, this)), draggedProductId && draggedProductCategoryId !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: uncategorizedPlaceholderDrop,\n        className: `placeholder-card ${isOverUncategorizedPlaceholder ? 'drop-target' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"plus-icon\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 9\n    }, this), !isLoading && categories.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-sections\",\n      children: categories.map(category => /*#__PURE__*/_jsxDEV(CategorySection, {\n        category: category,\n        editingCategoryId: editingCategoryId,\n        editedCategoryName: editedCategoryName,\n        setEditedCategoryName: setEditedCategoryName,\n        handleUpdateCategory: handleUpdateCategory,\n        startEditingCategory: startEditingCategory,\n        openDeleteModal: openDeleteModal,\n        draggedProductId: draggedProductId,\n        moveProductToCategory: moveProductToCategory,\n        products: products,\n        savedProductIds: savedProductIds,\n        toggleSavedProduct: toggleSavedProduct,\n        getProductName: getProductName,\n        getMinPrice: getMinPrice,\n        setDraggedProductId: setDraggedProductId,\n        draggedProductCategoryId: draggedProductCategoryId\n      }, category.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 9\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"category-name\",\n          children: \"\\u041D\\u0430\\u0437\\u0432\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"category-name\",\n          type: \"text\",\n          value: newCategoryName,\n          onChange: e => setNewCategoryName(e.target.value),\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u043D\\u0430\\u0437\\u0432\\u0443 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 13\n        }, this), categoryError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-error\",\n          children: categoryError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-btn\",\n            onClick: handleAddCategory,\n            children: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: closeModal,\n            children: \"\\u0421\\u043A\\u0430\\u0441\\u0443\\u0432\\u0430\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 9\n    }, this), isDeleteModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delete-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0412\\u0438 \\u0442\\u043E\\u0447\\u043D\\u043E \\u0445\\u043E\\u0447\\u0435\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044E?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 13\n        }, this), categoryError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-error\",\n          children: categoryError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"confirm-delete-btn\",\n            onClick: handleDeleteCategory,\n            children: \"\\u0422\\u0430\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: closeDeleteModal,\n            children: \"\\u041D\\u0456\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 9\n    }, this), isDeleteWithProductsModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delete-with-products-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0423 \\u0446\\u0456\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457 \\u0454 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438, \\u0445\\u043E\\u0447\\u0435\\u0442\\u0435 \\u0457\\u0445 \\u0437\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 13\n        }, this), categoryError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-error\",\n          children: categoryError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-btn\",\n            onClick: handleDeleteCategorySaveProducts,\n            children: \"\\u0422\\u0430\\u043A, \\u0437\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-btn\",\n            onClick: handleDeleteCategoryDeleteProducts,\n            children: \"\\u041D\\u0456, \\u0432\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: closeDeleteModal,\n            children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 585,\n    columnNumber: 5\n  }, this);\n}\n_s3(Wishlist, \"GhXmGpB3gkIY0Lr63epuVwGum34=\", false, function () {\n  return [useNavigate, useDragLayer, useDrop];\n});\n_c3 = Wishlist;\nexport default Wishlist;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProductCard\");\n$RefreshReg$(_c2, \"CategorySection\");\n$RefreshReg$(_c3, \"Wishlist\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","axios","useDrag","useDrop","useDragLayer","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","PRODUCT","ProductCard","product","savedProductIds","toggleSavedProduct","getProductName","getMinPrice","setDraggedProductId","_s","isDragging","drag","type","item","productId","id","end","collect","monitor","ref","className","style","opacity","onDragStart","console","log","children","to","fileName","_jsxFileName","lineNumber","columnNumber","src","images","length","alt","name","onError","e","target","store_prices","description","includes","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","_c","CategorySection","category","editingCategoryId","editedCategoryName","setEditedCategoryName","handleUpdateCategory","startEditingCategory","openDeleteModal","draggedProductId","moveProductToCategory","products","draggedProductCategoryId","_s2","isOver","isOverPlaceholder","placeholderDrop","accept","drop","categoryProducts","filter","saved_category_id","value","onChange","points","x1","y1","x2","y2","map","_c2","Wishlist","_s3","setProducts","setSavedProductIds","isLoading","setIsLoading","productError","setProductError","categoryError","setCategoryError","categories","setCategories","newCategoryName","setNewCategoryName","isModalOpen","setIsModalOpen","setEditingCategoryId","deleteCategory","setDeleteCategory","isDeleteModalOpen","setIsDeleteModalOpen","isDeleteWithProductsModalOpen","setIsDeleteWithProductsModalOpen","setDraggedProductCategoryId","navigate","clientOffset","getClientOffset","zoneHeight","scrollSpeed","scrollInterval","checkScroll","y","windowHeight","window","innerHeight","scrollBy","setInterval","clearInterval","find","p","volume","storePrices","Math","min","sp","price","isOverUncategorizedPlaceholder","uncategorizedPlaceholderDrop","fetchWishlistAndCategories","token","localStorage","getItem","savedResponse","get","headers","Authorization","savedProducts","data","savedIds","product_id","productPromises","productResponses","Promise","all","fetchedProducts","response","index","_savedProducts$find","err","_err$response","_err$response2","error","status","categoriesResponse","_err$response3","_err$response4","delete","handleAddCategory","trim","post","categoryId","originalCategories","updatedCategories","cat","put","closeDeleteModal","handleDeleteCategory","handleDeleteCategorySaveProducts","originalProducts","patch","handleDeleteCategoryDeleteProducts","originalSavedProductIds","categoryProductIds","productIds","prevProducts","updatedProducts","openModal","closeModal","uncategorizedProducts","htmlFor","placeholder","_c3","$RefreshReg$"],"sources":["C:/Users/pushy/Desktop/Work/ek/price-ua/cosmetick-frontend/src/components/Wishlist.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useDrag, useDrop, useDragLayer } from 'react-dnd';\r\nimport './Wishlist.css';\r\nimport './ProductList.css'; // Import ProductList.css for shared styles\r\n\r\nconst ItemTypes = {\r\n  PRODUCT: 'product',\r\n};\r\n\r\nfunction ProductCard({ product, savedProductIds, toggleSavedProduct, getProductName, getMinPrice, setDraggedProductId }) {\r\n  const [{ isDragging }, drag] = useDrag(() => ({\r\n    type: ItemTypes.PRODUCT,\r\n    item: { productId: product.id },\r\n    end: () => setDraggedProductId(null), // Reset draggedProductId when drag ends\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n  }));\r\n\r\n  return (\r\n    <div\r\n      ref={drag}\r\n      className=\"product-card-container\"\r\n      style={{ opacity: isDragging ? 0.5 : 1 }}\r\n      onDragStart={() => {\r\n        console.log('Drag started, productId:', product.id);\r\n        setDraggedProductId(product.id);\r\n      }}\r\n    >\r\n      <Link to={`/product/${product.id}`} className=\"product-card\">\r\n        <h3>{getProductName(product)}</h3>\r\n        <img\r\n          src={product.images && product.images.length > 0 ? product.images[0] : '/img/placeholder.webp'}\r\n          alt={product.name}\r\n          onError={(e) => (e.target.src = '/img/placeholder.webp')}\r\n        />\r\n        <p className=\"price\">{getMinPrice(product.store_prices)}</p>\r\n        <p>{product.description || 'Опис відсутній'}</p>\r\n      </Link>\r\n      <div\r\n        className={`heart-icon ${savedProductIds.includes(product.id) ? 'saved' : ''}`}\r\n        onClick={() => toggleSavedProduct(product.id)}\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill={savedProductIds.includes(product.id) ? '#d32f2f' : 'none'}\r\n          stroke=\"#d32f2f\"\r\n          strokeWidth=\"2\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        >\r\n          <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CategorySection({ category, editingCategoryId, editedCategoryName, setEditedCategoryName, handleUpdateCategory, startEditingCategory, openDeleteModal, draggedProductId, moveProductToCategory, products, savedProductIds, toggleSavedProduct, getProductName, getMinPrice, setDraggedProductId, draggedProductCategoryId }) {\r\n  const [{ isOver: isOverPlaceholder }, placeholderDrop] = useDrop(() => ({\r\n    accept: ItemTypes.PRODUCT,\r\n    drop: (item) => moveProductToCategory(item.productId, category.id),\r\n    collect: (monitor) => ({\r\n      isOver: !!monitor.isOver(),\r\n    }),\r\n  }));\r\n\r\n  const categoryProducts = products.filter((product) => product.saved_category_id === category.id);\r\n\r\n  return (\r\n    <div className=\"category-section\">\r\n      <div className=\"category-header\">\r\n        {editingCategoryId === category.id ? (\r\n          <>\r\n            <input\r\n              type=\"text\"\r\n              value={editedCategoryName}\r\n              onChange={(e) => setEditedCategoryName(e.target.value)}\r\n              className=\"category-edit-input-small\"\r\n            />\r\n            <button\r\n              className=\"confirm-edit-btn\"\r\n              onClick={() => handleUpdateCategory(category.id)}\r\n            >\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"#008000\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <path d=\"M20 6L9 17l-5-5\"></path>\r\n              </svg>\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <h3>{category.name}</h3>\r\n        )}\r\n        <button\r\n          className=\"edit-category-btn\"\r\n          onClick={() => startEditingCategory(category)}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"20\"\r\n            height=\"20\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"#333\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          >\r\n            <path d=\"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34\"></path>\r\n            <polygon points=\"18 2 22 6 12 16 8 16 8 12 18 2\"></polygon>\r\n          </svg>\r\n        </button>\r\n        <button\r\n          className=\"delete-category-btn\"\r\n          onClick={() => openDeleteModal(category)}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"20\"\r\n            height=\"20\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"#333\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          >\r\n            <path d=\"M3 6h18\"></path>\r\n            <path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"></path>\r\n            <path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"></path>\r\n            <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n            <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div className=\"drop-container\">\r\n        <div className=\"category-products products-list loaded\">\r\n          {categoryProducts.length > 0 ? (\r\n            categoryProducts.map((product) => (\r\n              <ProductCard\r\n                key={product.id}\r\n                product={product}\r\n                savedProductIds={savedProductIds}\r\n                toggleSavedProduct={toggleSavedProduct}\r\n                getProductName={getProductName}\r\n                getMinPrice={getMinPrice}\r\n                setDraggedProductId={setDraggedProductId}\r\n              />\r\n            ))\r\n          ) : (\r\n            <p className=\"no-products-text\">Немає товарів у цій категорії</p>\r\n          )}\r\n          {draggedProductId && draggedProductCategoryId !== category.id && (\r\n            <div ref={placeholderDrop} className={`placeholder-card ${isOverPlaceholder ? 'drop-target' : ''}`}>\r\n              <span className=\"plus-icon\">+</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Wishlist() {\r\n  const [products, setProducts] = useState([]);\r\n  const [savedProductIds, setSavedProductIds] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [productError, setProductError] = useState(null);\r\n  const [categoryError, setCategoryError] = useState(null);\r\n  const [categories, setCategories] = useState([]);\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingCategoryId, setEditingCategoryId] = useState(null);\r\n  const [editedCategoryName, setEditedCategoryName] = useState('');\r\n  const [deleteCategory, setDeleteCategory] = useState(null);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isDeleteWithProductsModalOpen, setIsDeleteWithProductsModalOpen] = useState(false);\r\n  const [draggedProductId, setDraggedProductId] = useState(null);\r\n  const [draggedProductCategoryId, setDraggedProductCategoryId] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Custom auto-scroll during drag\r\n  const { clientOffset, isDragging } = useDragLayer((monitor) => ({\r\n    clientOffset: monitor.getClientOffset(),\r\n    isDragging: monitor.isDragging(),\r\n  }));\r\n\r\n  useEffect(() => {\r\n    if (!isDragging || !clientOffset) return;\r\n\r\n    const zoneHeight = 200; // Height of top/bottom auto-scroll zones (pixels)\r\n    const scrollSpeed = 10; // Pixels per frame (~60fps, 16ms)\r\n    let scrollInterval = null;\r\n\r\n    const checkScroll = () => {\r\n      const y = clientOffset.y;\r\n      const windowHeight = window.innerHeight;\r\n\r\n      if (y < zoneHeight) {\r\n        console.log('Scrolling up, y:', y);\r\n        window.scrollBy(0, -scrollSpeed);\r\n      } else if (y > windowHeight - zoneHeight) {\r\n        console.log('Scrolling down, y:', y);\r\n        window.scrollBy(0, scrollSpeed);\r\n      }\r\n    };\r\n\r\n    scrollInterval = setInterval(checkScroll, 16); // ~60fps\r\n\r\n    return () => {\r\n      if (scrollInterval) {\r\n        console.log('Stopping auto-scroll');\r\n        clearInterval(scrollInterval);\r\n      }\r\n    };\r\n  }, [clientOffset, isDragging]);\r\n\r\n  // Set draggedProductCategoryId when drag starts\r\n  useEffect(() => {\r\n    if (draggedProductId) {\r\n      const product = products.find((p) => p.id === draggedProductId);\r\n      setDraggedProductCategoryId(product ? product.saved_category_id : null);\r\n    } else {\r\n      setDraggedProductCategoryId(null);\r\n    }\r\n  }, [draggedProductId, products]);\r\n\r\n  // Function to format product name consistently with ProductList\r\n  const getProductName = (product) => {\r\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\r\n  };\r\n\r\n  // Function to get minimum price from store_prices\r\n  const getMinPrice = (storePrices) => {\r\n    if (!storePrices || storePrices.length === 0) return 'Немає в наявності';\r\n    return `${Math.min(...storePrices.map(sp => sp.price))} грн`;\r\n  };\r\n\r\n  // Drop hook for uncategorized placeholder card\r\n  const [{ isOver: isOverUncategorizedPlaceholder }, uncategorizedPlaceholderDrop] = useDrop(() => ({\r\n    accept: ItemTypes.PRODUCT,\r\n    drop: (item) => moveProductToCategory(item.productId, null),\r\n    collect: (monitor) => ({\r\n      isOver: !!monitor.isOver(),\r\n    }),\r\n  }));\r\n\r\n  // Fetch wishlist and categories\r\n  useEffect(() => {\r\n    const fetchWishlistAndCategories = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      setIsLoading(true);\r\n\r\n      // Fetch saved products with category IDs\r\n      try {\r\n        const savedResponse = await axios.get(\r\n          'https://price-ua-react-backend.onrender.com/saved-products',\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        const savedProducts = savedResponse.data.savedProducts || [];\r\n        const savedIds = savedProducts.map((sp) => sp.product_id);\r\n        setSavedProductIds(savedIds);\r\n\r\n        if (savedIds.length === 0) {\r\n          setProducts([]);\r\n        } else {\r\n          const productPromises = savedIds.map((id) =>\r\n            axios.get(`https://price-ua-react-backend.onrender.com/products/${id}`)\r\n          );\r\n          const productResponses = await Promise.all(productPromises);\r\n          const fetchedProducts = productResponses.map((response, index) => ({\r\n            ...response.data,\r\n            saved_category_id: savedProducts.find((sp) => sp.product_id === response.data.id)?.saved_category_id || null,\r\n          }));\r\n          setProducts(fetchedProducts);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching wishlist:', err);\r\n        setProductError('Не вдалося завантажити список бажаного');\r\n        if (err.response?.status === 401 || err.response?.status === 403) {\r\n          navigate('/login');\r\n        }\r\n      }\r\n\r\n      // Fetch categories\r\n      try {\r\n        const categoriesResponse = await axios.get(\r\n          'https://price-ua-react-backend.onrender.com/categories',\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setCategories(categoriesResponse.data || []);\r\n      } catch (err) {\r\n        console.error('Error fetching categories:', err);\r\n        setCategoryError('Не вдалося завантажити категорії');\r\n        if (err.response?.status === 401 || err.response?.status === 403) {\r\n          navigate('/login');\r\n        }\r\n      }\r\n\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchWishlistAndCategories();\r\n  }, [navigate]);\r\n\r\n  // Toggle saved product\r\n  const toggleSavedProduct = async (productId) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setSavedProductIds(savedProductIds.filter((id) => id !== productId));\r\n      setProducts(products.filter((product) => product.id !== productId));\r\n    } catch (err) {\r\n      console.error('Error removing product from wishlist:', err);\r\n      setProductError('Не вдалося видалити товар із бажаного');\r\n    }\r\n  };\r\n\r\n  // Handle category creation\r\n  const handleAddCategory = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !newCategoryName.trim()) {\r\n      setCategoryError('Введіть назву категорії');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        'https://price-ua-react-backend.onrender.com/categories',\r\n        { name: newCategoryName.trim() },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setCategories([...categories, response.data]);\r\n      setNewCategoryName('');\r\n      setIsModalOpen(false);\r\n      setCategoryError(null);\r\n    } catch (err) {\r\n      console.error('Error adding category:', err);\r\n      setCategoryError('Не вдалося додати категорію');\r\n    }\r\n  };\r\n\r\n  // Handle start editing category\r\n  const startEditingCategory = (category) => {\r\n    setEditingCategoryId(category.id);\r\n    setEditedCategoryName(category.name);\r\n  };\r\n\r\n  // Handle category name update\r\n  const handleUpdateCategory = async (categoryId) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !editedCategoryName.trim()) {\r\n      setCategoryError('Введіть назву категорії');\r\n      return;\r\n    }\r\n\r\n    const originalCategories = [...categories];\r\n    const updatedCategories = categories.map((cat) =>\r\n      cat.id === categoryId ? { ...cat, name: editedCategoryName.trim() } : cat\r\n    );\r\n    setCategories(updatedCategories);\r\n    setEditingCategoryId(null);\r\n    setEditedCategoryName('');\r\n    setCategoryError(null);\r\n\r\n    try {\r\n      await axios.put(\r\n        `https://price-ua-react-backend.onrender.com/categories/${categoryId}`,\r\n        { name: editedCategoryName.trim() },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n    } catch (err) {\r\n      console.error('Error updating category:', err);\r\n      setCategoryError('Не вдалося оновити категорію');\r\n      setCategories(originalCategories); // Revert on failure\r\n    }\r\n  };\r\n\r\n  // Handle open delete confirmation modal\r\n  const openDeleteModal = (category) => {\r\n    setDeleteCategory(category);\r\n    const categoryProducts = products.filter((p) => p.saved_category_id === category.id);\r\n    if (categoryProducts.length > 0) {\r\n      setIsDeleteWithProductsModalOpen(true);\r\n    } else {\r\n      setIsDeleteModalOpen(true);\r\n    }\r\n  };\r\n\r\n  // Handle close delete confirmation modals\r\n  const closeDeleteModal = () => {\r\n    setDeleteCategory(null);\r\n    setIsDeleteModalOpen(false);\r\n    setIsDeleteWithProductsModalOpen(false);\r\n    setCategoryError(null);\r\n  };\r\n\r\n  // Handle category deletion (empty category)\r\n  const handleDeleteCategory = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !deleteCategory) {\r\n      setCategoryError('Помилка видалення категорії');\r\n      closeDeleteModal();\r\n      return;\r\n    }\r\n\r\n    const originalCategories = [...categories];\r\n    setCategories(categories.filter((cat) => cat.id !== deleteCategory.id));\r\n    closeDeleteModal();\r\n\r\n    try {\r\n      await axios.delete(\r\n        `https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      console.log('Empty category deleted:', deleteCategory.id);\r\n    } catch (err) {\r\n      console.error('Error deleting category:', err);\r\n      setCategoryError('Не вдалося видалити категорію');\r\n      setCategories(originalCategories);\r\n    }\r\n  };\r\n\r\n  // Handle category deletion with products (save products)\r\n  const handleDeleteCategorySaveProducts = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !deleteCategory) {\r\n      setCategoryError('Помилка видалення категорії');\r\n      closeDeleteModal();\r\n      return;\r\n    }\r\n\r\n    const originalCategories = [...categories];\r\n    const originalProducts = [...products];\r\n    setCategories(categories.filter((cat) => cat.id !== deleteCategory.id));\r\n    setProducts(\r\n      products.map((p) =>\r\n        p.saved_category_id === deleteCategory.id ? { ...p, saved_category_id: null } : p\r\n      )\r\n    );\r\n    closeDeleteModal();\r\n\r\n    try {\r\n      // Update products to uncategorized\r\n      const categoryProducts = originalProducts.filter((p) => p.saved_category_id === deleteCategory.id);\r\n      await Promise.all(\r\n        categoryProducts.map((product) =>\r\n          axios.patch(\r\n            `https://price-ua-react-backend.onrender.com/saved-products/${product.id}`,\r\n            { saved_category_id: null },\r\n            { headers: { Authorization: `Bearer ${token}` } }\r\n          )\r\n        )\r\n      );\r\n      // Delete category\r\n      await axios.delete(\r\n        `https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      console.log('Category deleted, products moved to uncategorized:', deleteCategory.id);\r\n    } catch (err) {\r\n      console.error('Error deleting category or moving products:', err);\r\n      setCategoryError('Не вдалося видалити категорію або перемістити товари');\r\n      setCategories(originalCategories);\r\n      setProducts(originalProducts);\r\n    }\r\n  };\r\n\r\n  // Handle category deletion with products (delete products and category)\r\n  const handleDeleteCategoryDeleteProducts = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token || !deleteCategory) {\r\n      setCategoryError('Помилка видалення категорії');\r\n      closeDeleteModal();\r\n      return;\r\n    }\r\n\r\n    const originalCategories = [...categories];\r\n    const originalProducts = [...products];\r\n    const originalSavedProductIds = [...savedProductIds];\r\n    const categoryProducts = products.filter((p) => p.saved_category_id === deleteCategory.id);\r\n    const categoryProductIds = categoryProducts.map((p) => p.id);\r\n\r\n    // Update UI\r\n    setCategories(categories.filter((cat) => cat.id !== deleteCategory.id));\r\n    setProducts(products.filter((p) => !categoryProductIds.includes(p.id)));\r\n    setSavedProductIds(savedProductIds.filter((id) => !categoryProductIds.includes(id)));\r\n    closeDeleteModal();\r\n\r\n    try {\r\n      // Delete products\r\n      await Promise.all(\r\n        categoryProductIds.map((productId) =>\r\n          axios.delete(\r\n            `https://price-ua-react-backend.onrender.com/saved-products/${productId}`,\r\n            { headers: { Authorization: `Bearer ${token}` } }\r\n          )\r\n        )\r\n      );\r\n      // Delete category\r\n      await axios.delete(\r\n        `https://price-ua-react-backend.onrender.com/categories/${deleteCategory.id}`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      console.log('Category and products deleted:', { categoryId: deleteCategory.id, productIds: categoryProductIds });\r\n    } catch (err) {\r\n      console.error('Error deleting category or products:', err);\r\n      setCategoryError('Не вдалося видалити категорію або товари');\r\n      setCategories(originalCategories);\r\n      setProducts(originalProducts);\r\n      setSavedProductIds(originalSavedProductIds);\r\n    }\r\n  };\r\n\r\n  // Handle moving product to category (or uncategorized)\r\n  const moveProductToCategory = async (productId, categoryId) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    setProducts((prevProducts) => {\r\n      const updatedProducts = prevProducts.map((p) =>\r\n        p.id === productId ? { ...p, saved_category_id: categoryId } : p\r\n      );\r\n      return updatedProducts;\r\n    });\r\n    setDraggedProductId(null);\r\n    setDraggedProductCategoryId(null);\r\n\r\n    try {\r\n      await axios.patch(\r\n        `https://price-ua-react-backend.onrender.com/saved-products/${productId}`,\r\n        { saved_category_id: categoryId },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n    } catch (err) {\r\n      console.error('Error moving product to category:', err);\r\n      setCategoryError('Не вдалося перемістити товар до категорії');\r\n      setProducts((prevProducts) => [...prevProducts]);\r\n      setDraggedProductId(null);\r\n      setDraggedProductCategoryId(null);\r\n    }\r\n  };\r\n\r\n  // Handle modal open/close\r\n  const openModal = () => setIsModalOpen(true);\r\n  const closeModal = () => {\r\n    setNewCategoryName('');\r\n    setIsModalOpen(false);\r\n    setCategoryError(null);\r\n  };\r\n\r\n  // Filter uncategorized products\r\n  const uncategorizedProducts = products.filter((product) => !product.saved_category_id);\r\n\r\n  return (\r\n    <div className=\"wishlist\">\r\n      <div className=\"wishlist-header\">\r\n        <h2>Мій список бажаного</h2>\r\n        <button className=\"add-category-btn\" onClick={openModal}>\r\n          Додати категорію\r\n        </button>\r\n      </div>\r\n      {isLoading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Завантаження...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {productError && !products.length && <div className=\"wishlist-error\">{productError}</div>}\r\n      {categoryError && <div className=\"wishlist-error\">{categoryError}</div>}\r\n      {!isLoading && products.length === 0 && !productError && (\r\n        <div className=\"wishlist-empty\">\r\n          <h2>Ваш список бажаного порожній</h2>\r\n          <p>Додайте товари до списку бажаного, щоб побачити їх тут.</p>\r\n        </div>\r\n      )}\r\n      {!isLoading && uncategorizedProducts.length > 0 && (\r\n        <div className=\"wishlist-products products-list loaded\">\r\n          {uncategorizedProducts.map((product) => (\r\n            <ProductCard\r\n              key={product.id}\r\n              product={product}\r\n              savedProductIds={savedProductIds}\r\n              toggleSavedProduct={toggleSavedProduct}\r\n              getProductName={getProductName}\r\n              getMinPrice={getMinPrice}\r\n              setDraggedProductId={setDraggedProductId}\r\n            />\r\n          ))}\r\n          {draggedProductId && draggedProductCategoryId !== null && (\r\n            <div ref={uncategorizedPlaceholderDrop} className={`placeholder-card ${isOverUncategorizedPlaceholder ? 'drop-target' : ''}`}>\r\n              <span className=\"plus-icon\">+</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      {!isLoading && categories.length > 0 && (\r\n        <div className=\"category-sections\">\r\n          {categories.map((category) => (\r\n            <CategorySection\r\n              key={category.id}\r\n              category={category}\r\n              editingCategoryId={editingCategoryId}\r\n              editedCategoryName={editedCategoryName}\r\n              setEditedCategoryName={setEditedCategoryName}\r\n              handleUpdateCategory={handleUpdateCategory}\r\n              startEditingCategory={startEditingCategory}\r\n              openDeleteModal={openDeleteModal}\r\n              draggedProductId={draggedProductId}\r\n              moveProductToCategory={moveProductToCategory}\r\n              products={products}\r\n              savedProductIds={savedProductIds}\r\n              toggleSavedProduct={toggleSavedProduct}\r\n              getProductName={getProductName}\r\n              getMinPrice={getMinPrice}\r\n              setDraggedProductId={setDraggedProductId}\r\n              draggedProductCategoryId={draggedProductCategoryId}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n      {isModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <label htmlFor=\"category-name\">Назва категорії:</label>\r\n            <input\r\n              id=\"category-name\"\r\n              type=\"text\"\r\n              value={newCategoryName}\r\n              onChange={(e) => setNewCategoryName(e.target.value)}\r\n              placeholder=\"Введіть назву категорії\"\r\n            />\r\n            {categoryError && <div className=\"modal-error\">{categoryError}</div>}\r\n            <div className=\"modal-buttons\">\r\n              <button className=\"add-btn\" onClick={handleAddCategory}>Додати</button>\r\n              <button className=\"cancel-btn\" onClick={closeModal}>Скасувати</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {isDeleteModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"delete-modal\">\r\n            <p>Ви точно хочете видалити категорію?</p>\r\n            {categoryError && <div className=\"modal-error\">{categoryError}</div>}\r\n            <div className=\"modal-buttons\">\r\n              <button className=\"confirm-delete-btn\" onClick={handleDeleteCategory}>Так</button>\r\n              <button className=\"cancel-btn\" onClick={closeDeleteModal}>Ні</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {isDeleteWithProductsModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"delete-with-products-modal\">\r\n            <p>У цій категорії є товари, хочете їх зберегти?</p>\r\n            {categoryError && <div className=\"modal-error\">{categoryError}</div>}\r\n            <div className=\"modal-buttons\">\r\n              <button className=\"add-btn\" onClick={handleDeleteCategorySaveProducts}>Так, зберегти</button>\r\n              <button className=\"delete-btn\" onClick={handleDeleteCategoryDeleteProducts}>Ні, видалити</button>\r\n              <button className=\"cancel-btn\" onClick={closeDeleteModal}>Назад</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Wishlist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}