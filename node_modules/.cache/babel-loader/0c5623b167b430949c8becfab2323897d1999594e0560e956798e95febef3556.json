{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Link,useNavigate}from'react-router-dom';import products from'../data/products';import SearchResults from'./SearchResults';import'./Header.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(_ref){let{setSearchTerm}=_ref;const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[showResults,setShowResults]=useState(false);const navigate=useNavigate();const handleSearch=useCallback(()=>{if(searchQuery.trim()){setSearchTerm(searchQuery);navigate(`/search?query=${encodeURIComponent(searchQuery)}`);setSearchQuery('');setShowResults(false);}},[searchQuery,setSearchTerm,navigate]);const handleInputChange=e=>{const query=e.target.value;setSearchQuery(query);if(query.trim()){const filteredProducts=products.filter(product=>product.name.toLowerCase().includes(query.toLowerCase()));const groupedResults=filteredProducts.reduce((acc,product)=>{const category=acc.find(cat=>cat.category===product.category);if(category){category.products.push(product);category.count+=1;}else{acc.push({category:product.category,products:[product],count:1});}return acc;},[]).sort((a,b)=>b.count-a.count);setSearchResults(groupedResults);setShowResults(true);}else{setSearchResults([]);setShowResults(false);}};const handleKeyPress=e=>{if(e.key==='Enter'){handleSearch();}};const handleClearSearch=()=>{setSearchQuery('');setSearchResults([]);setShowResults(false);setSearchTerm('');// Clear search term to avoid stale state\n};const handleCloseResults=()=>{setShowResults(false);};useEffect(()=>{return()=>{setSearchResults([]);setShowResults(false);};},[]);return/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo\",children:\"CosmetickUA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u0456\\u0432...\",value:searchQuery,onChange:handleInputChange,onKeyPress:handleKeyPress,className:\"search-input\"}),searchQuery&&/*#__PURE__*/_jsxs(\"svg\",{className:\"clear-icon\",onClick:handleClearSearch,xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#555\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"search-button\",children:\"\\u0417\\u043D\\u0430\\u0439\\u0442\\u0438\"}),showResults&&searchResults.length>0&&/*#__PURE__*/_jsx(SearchResults,{results:searchResults,searchQuery:searchQuery,onClose:handleCloseResults})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"7\",r:\"4\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"})]})]})});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Link","useNavigate","products","SearchResults","jsx","_jsx","jsxs","_jsxs","Header","_ref","setSearchTerm","searchQuery","setSearchQuery","searchResults","setSearchResults","showResults","setShowResults","navigate","handleSearch","trim","encodeURIComponent","handleInputChange","e","query","target","value","filteredProducts","filter","product","name","toLowerCase","includes","groupedResults","reduce","acc","category","find","cat","push","count","sort","a","b","handleKeyPress","key","handleClearSearch","handleCloseResults","className","children","to","type","placeholder","onChange","onKeyPress","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","length","results","onClose","d","cx","cy","r"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport products from '../data/products';\r\nimport SearchResults from './SearchResults';\r\nimport './Header.css';\r\n\r\nfunction Header({ setSearchTerm }) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSearch = useCallback(() => {\r\n    if (searchQuery.trim()) {\r\n      setSearchTerm(searchQuery);\r\n      navigate(`/search?query=${encodeURIComponent(searchQuery)}`);\r\n      setSearchQuery('');\r\n      setShowResults(false);\r\n    }\r\n  }, [searchQuery, setSearchTerm, navigate]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n    if (query.trim()) {\r\n      const filteredProducts = products.filter((product) =>\r\n        product.name.toLowerCase().includes(query.toLowerCase())\r\n      );\r\n      const groupedResults = filteredProducts.reduce((acc, product) => {\r\n        const category = acc.find((cat) => cat.category === product.category);\r\n        if (category) {\r\n          category.products.push(product);\r\n          category.count += 1;\r\n        } else {\r\n          acc.push({ category: product.category, products: [product], count: 1 });\r\n        }\r\n        return acc;\r\n      }, []).sort((a, b) => b.count - a.count);\r\n      setSearchResults(groupedResults);\r\n      setShowResults(true);\r\n    } else {\r\n      setSearchResults([]);\r\n      setShowResults(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch();\r\n    }\r\n  };\r\n\r\n  const handleClearSearch = () => {\r\n    setSearchQuery('');\r\n    setSearchResults([]);\r\n    setShowResults(false);\r\n    setSearchTerm(''); // Clear search term to avoid stale state\r\n  };\r\n\r\n  const handleCloseResults = () => {\r\n    setShowResults(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setSearchResults([]);\r\n      setShowResults(false);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header-container\">\r\n        <Link to=\"/\" className=\"logo\">\r\n          CosmetickUA\r\n        </Link>\r\n        <div className=\"search-container\">\r\n          <div className=\"search-input-wrapper\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Пошук товарів...\"\r\n              value={searchQuery}\r\n              onChange={handleInputChange}\r\n              onKeyPress={handleKeyPress}\r\n              className=\"search-input\"\r\n            />\r\n            {searchQuery && (\r\n              <svg\r\n                className=\"clear-icon\"\r\n                onClick={handleClearSearch}\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"#555\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n              </svg>\r\n            )}\r\n          </div>\r\n          <button onClick={handleSearch} className=\"search-button\">\r\n            Знайти\r\n          </button>\r\n          {showResults && searchResults.length > 0 && (\r\n            <SearchResults\r\n              results={searchResults}\r\n              searchQuery={searchQuery}\r\n              onClose={handleCloseResults}\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"profile\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"white\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          >\r\n            <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n            <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n          </svg>\r\n          <span>Увійти</span>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAAoB,IAAnB,CAAEC,aAAc,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACgB,aAAa,CAAEC,gBAAgB,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAAoB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAiB,YAAY,CAAGnB,WAAW,CAAC,IAAM,CACrC,GAAIY,WAAW,CAACQ,IAAI,CAAC,CAAC,CAAE,CACtBT,aAAa,CAACC,WAAW,CAAC,CAC1BM,QAAQ,CAAC,iBAAiBG,kBAAkB,CAACT,WAAW,CAAC,EAAE,CAAC,CAC5DC,cAAc,CAAC,EAAE,CAAC,CAClBI,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,CAACL,WAAW,CAAED,aAAa,CAAEO,QAAQ,CAAC,CAAC,CAE1C,KAAM,CAAAI,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC5Bb,cAAc,CAACW,KAAK,CAAC,CACrB,GAAIA,KAAK,CAACJ,IAAI,CAAC,CAAC,CAAE,CAChB,KAAM,CAAAO,gBAAgB,CAAGxB,QAAQ,CAACyB,MAAM,CAAEC,OAAO,EAC/CA,OAAO,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACR,KAAK,CAACO,WAAW,CAAC,CAAC,CACzD,CAAC,CACD,KAAM,CAAAE,cAAc,CAAGN,gBAAgB,CAACO,MAAM,CAAC,CAACC,GAAG,CAAEN,OAAO,GAAK,CAC/D,KAAM,CAAAO,QAAQ,CAAGD,GAAG,CAACE,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACF,QAAQ,GAAKP,OAAO,CAACO,QAAQ,CAAC,CACrE,GAAIA,QAAQ,CAAE,CACZA,QAAQ,CAACjC,QAAQ,CAACoC,IAAI,CAACV,OAAO,CAAC,CAC/BO,QAAQ,CAACI,KAAK,EAAI,CAAC,CACrB,CAAC,IAAM,CACLL,GAAG,CAACI,IAAI,CAAC,CAAEH,QAAQ,CAAEP,OAAO,CAACO,QAAQ,CAAEjC,QAAQ,CAAE,CAAC0B,OAAO,CAAC,CAAEW,KAAK,CAAE,CAAE,CAAC,CAAC,CACzE,CACA,MAAO,CAAAL,GAAG,CACZ,CAAC,CAAE,EAAE,CAAC,CAACM,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACH,KAAK,CAAGE,CAAC,CAACF,KAAK,CAAC,CACxCzB,gBAAgB,CAACkB,cAAc,CAAC,CAChChB,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,IAAM,CACLF,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAA2B,cAAc,CAAIrB,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACsB,GAAG,GAAK,OAAO,CAAE,CACrB1B,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAA2B,iBAAiB,CAAGA,CAAA,GAAM,CAC9BjC,cAAc,CAAC,EAAE,CAAC,CAClBE,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrBN,aAAa,CAAC,EAAE,CAAC,CAAE;AACrB,CAAC,CAED,KAAM,CAAAoC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B9B,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAEDlB,SAAS,CAAC,IAAM,CACd,MAAO,IAAM,CACXgB,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEX,IAAA,WAAQ0C,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACxBzC,KAAA,QAAKwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B3C,IAAA,CAACL,IAAI,EAACiD,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,aAE9B,CAAM,CAAC,cACPzC,KAAA,QAAKwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BzC,KAAA,QAAKwC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC3C,IAAA,UACE6C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,8EAAkB,CAC9B1B,KAAK,CAAEd,WAAY,CACnByC,QAAQ,CAAE/B,iBAAkB,CAC5BgC,UAAU,CAAEV,cAAe,CAC3BI,SAAS,CAAC,cAAc,CACzB,CAAC,CACDpC,WAAW,eACVJ,KAAA,QACEwC,SAAS,CAAC,YAAY,CACtBO,OAAO,CAAET,iBAAkB,CAC3BU,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CACnBC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbC,WAAW,CAAC,GAAG,CACfC,aAAa,CAAC,OAAO,CACrBC,cAAc,CAAC,OAAO,CAAAf,QAAA,eAEtB3C,IAAA,SAAM2D,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAAO,CAAC,cAC3C9D,IAAA,SAAM2D,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAAO,CAAC,EACxC,CACN,EACE,CAAC,cACN9D,IAAA,WAAQiD,OAAO,CAAEpC,YAAa,CAAC6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAEzD,CAAQ,CAAC,CACRjC,WAAW,EAAIF,aAAa,CAACuD,MAAM,CAAG,CAAC,eACtC/D,IAAA,CAACF,aAAa,EACZkE,OAAO,CAAExD,aAAc,CACvBF,WAAW,CAAEA,WAAY,CACzB2D,OAAO,CAAExB,kBAAmB,CAC7B,CACF,EACE,CAAC,cACNvC,KAAA,QAAKwC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBzC,KAAA,QACEgD,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CACnBC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,OAAO,CACdC,WAAW,CAAC,GAAG,CACfC,aAAa,CAAC,OAAO,CACrBC,cAAc,CAAC,OAAO,CAAAf,QAAA,eAEtB3C,IAAA,SAAMkE,CAAC,CAAC,2CAA2C,CAAO,CAAC,cAC3DlE,IAAA,WAAQmE,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,CAAC,CAAC,GAAG,CAAS,CAAC,EACnC,CAAC,cACNrE,IAAA,SAAA2C,QAAA,CAAM,sCAAM,CAAM,CAAC,EAChB,CAAC,EACH,CAAC,CACA,CAAC,CAEb,CAEA,cAAe,CAAAxC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}