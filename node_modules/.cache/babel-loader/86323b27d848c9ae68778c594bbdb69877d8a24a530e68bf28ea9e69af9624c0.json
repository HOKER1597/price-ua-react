{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pushy\\\\Desktop\\\\Work\\\\ek\\\\price-ua\\\\cosmetick-frontend\\\\src\\\\components\\\\ProductList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useLocation, Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './ProductList.css';\nimport { categoryNames } from './Header.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList({\n  searchTerm\n}) {\n  _s();\n  var _appliedFilters$brand, _appliedFilters$price, _appliedFilters$volum, _appliedFilters$types, _appliedFilters$categ, _appliedFilters$categ2, _appliedFilters$brand2, _appliedFilters$price2, _appliedFilters$volum2, _appliedFilters$types2;\n  const {\n    categoryId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Отримуємо параметри з URL, враховуючи як 'query', так і 'search'\n  const queryParams = new URLSearchParams(location.search);\n  const initialType = queryParams.get('type') || '';\n  const searchQuery = queryParams.get('query') || queryParams.get('search') || searchTerm || '';\n  const isSearchPage = location.pathname === '/search';\n  console.log('ProductList initialized with:', {\n    categoryId,\n    searchTerm,\n    searchQuery,\n    initialType,\n    isSearchPage,\n    location: location.pathname + location.search\n  });\n\n  // Стан для всіх фільтрів\n  const [filters, setFilters] = useState({\n    brands: [],\n    priceRanges: [],\n    volumes: [],\n    types: [],\n    categories: []\n  });\n\n  // Стан для вибраних фільтрів\n  const [selectedFilters, setSelectedFilters] = useState({\n    brands: [],\n    priceRanges: [],\n    volumes: [],\n    types: initialType ? [initialType] : [],\n    categories: categoryId ? [categoryId] : []\n  });\n\n  // Стан для застосованих фільтрів\n  const [appliedFilters, setAppliedFilters] = useState({\n    brands: [],\n    priceRanges: [],\n    volumes: [],\n    types: initialType ? [initialType] : [],\n    categories: categoryId ? [categoryId] : []\n  });\n\n  // Стан для всіх продуктів (з API)\n  const [allProducts, setAllProducts] = useState([]);\n  // Стан для відфільтрованих продуктів і пагінації\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [totalProducts, setTotalProducts] = useState(0);\n  const [previewProductCount, setPreviewProductCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const productsPerPage = 24;\n  const [isPaginated, setIsPaginated] = useState(true);\n  const [startPage, setStartPage] = useState(1);\n  const [loadMorePages, setLoadMorePages] = useState(1);\n\n  // Стан для пошуку брендів\n  const [brandSearch, setBrandSearch] = useState('');\n\n  // Стан для кастомного діапазону цін\n  const [customPriceFrom, setCustomPriceFrom] = useState('');\n  const [customPriceTo, setCustomPriceTo] = useState('');\n\n  // Стан для активного фільтру\n  const [activeFilter, setActiveFilter] = useState(null);\n\n  // Стан для неактивних фільтрів\n  const [disabledFilters, setDisabledFilters] = useState({\n    brands: new Set(),\n    priceRanges: new Set(),\n    volumes: new Set(),\n    types: new Set(),\n    categories: new Set()\n  });\n\n  // Стан для \"Більше/Менше\"\n  const [showMore, setShowMore] = useState({\n    brands: false,\n    priceRanges: false,\n    volumes: false,\n    types: false,\n    categories: false\n  });\n\n  // Стан для індикатора завантаження\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Стан для статусу збереження продуктів\n  const [savedProducts, setSavedProducts] = useState(new Set());\n  // Стан для показу повідомлення про логін\n  const [showLoginPrompt, setShowLoginPrompt] = useState({});\n\n  // Рефи для позиціонування плашки та анімації фільтрів\n  const filterRefs = useRef({});\n  const tagRef = useRef(null);\n  const filterItemsRefs = useRef({});\n\n  // Перевірка авторизації користувача\n  const user = JSON.parse(localStorage.getItem('user'));\n  const token = localStorage.getItem('token');\n\n  // Функція для отримання мінімальної ціни з store_prices\n  const getMinPrice = storePrices => {\n    if (!storePrices || storePrices.length === 0) return 0;\n    return Math.min(...storePrices.map(sp => sp.price));\n  };\n\n  // Завантаження статусу збереження продуктів\n  const fetchSavedStatus = useCallback(async () => {\n    if (!user || !token) {\n      setSavedProducts(new Set());\n      return;\n    }\n    try {\n      const promises = filteredProducts.map(product => axios.get(`https://price-ua-react-backend.onrender.com/saved-products/${product.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }));\n      const responses = await Promise.all(promises);\n      const savedSet = new Set();\n      responses.forEach((response, index) => {\n        if (response.data.isSaved) {\n          savedSet.add(filteredProducts[index].id);\n        }\n      });\n      setSavedProducts(savedSet);\n    } catch (error) {\n      console.error('Помилка завантаження статусу збереження:', error);\n    }\n  }, [filteredProducts, user, token]);\n\n  // Обробка кліку на сердечко\n  const handleHeartClick = async (productId, event) => {\n    event.preventDefault(); // Запобігаємо переходу за посиланням\n    if (!user || !token) {\n      setShowLoginPrompt(prev => ({\n        ...prev,\n        [productId]: true\n      }));\n      setTimeout(() => {\n        setShowLoginPrompt(prev => ({\n          ...prev,\n          [productId]: false\n        }));\n      }, 3000);\n      return;\n    }\n    const isSaved = savedProducts.has(productId);\n    try {\n      if (isSaved) {\n        await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setSavedProducts(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(productId);\n          return newSet;\n        });\n      } else {\n        await axios.post('https://price-ua-react-backend.onrender.com/saved-products', {\n          productId\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setSavedProducts(prev => new Set(prev).add(productId));\n      }\n    } catch (error) {\n      console.error('Помилка при зміні статусу збереження:', error);\n      alert('Не вдалося оновити статус бажаного. Спробуйте ще раз.');\n    }\n  };\n\n  // Завантаження статусу збереження при зміні filteredProducts\n  useEffect(() => {\n    if (!isLoading && filteredProducts.length > 0) {\n      fetchSavedStatus();\n    }\n  }, [filteredProducts, isLoading, fetchSavedStatus]);\n\n  // Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\n  const calculateFilteredProducts = useCallback(tempFilters => {\n    let filtered = [...allProducts];\n\n    // Фільтр за пошуковим запитом\n    if (searchQuery) {\n      filtered = filtered.filter(product => product.name.toLowerCase().includes(searchQuery.toLowerCase()));\n    }\n\n    // Фільтр за категорією\n    if (categoryId && !isSearchPage) {\n      filtered = filtered.filter(product => product.category_id === categoryId);\n    } else if (tempFilters.categories.length > 0 && isSearchPage) {\n      filtered = filtered.filter(product => tempFilters.categories.includes(product.category_name));\n    }\n\n    // Фільтр за брендами\n    if (tempFilters.brands.length > 0) {\n      filtered = filtered.filter(product => tempFilters.brands.includes(product.brand_name));\n    }\n\n    // Фільтр за ціною\n    if (customPriceFrom !== '' && customPriceTo !== '') {\n      const priceFrom = parseFloat(customPriceFrom);\n      const priceTo = parseFloat(customPriceTo);\n      filtered = filtered.filter(product => {\n        const minPrice = getMinPrice(product.store_prices);\n        return minPrice >= priceFrom && minPrice <= priceTo;\n      });\n    } else if (tempFilters.priceRanges.length > 0) {\n      filtered = filtered.filter(product => {\n        const minPrice = getMinPrice(product.store_prices);\n        return tempFilters.priceRanges.some(range => {\n          const [min, max] = range.includes('+') ? [1000, Infinity] : range.split('-').map(Number);\n          return minPrice >= min && (max === Infinity || minPrice <= max);\n        });\n      });\n    }\n\n    // Фільтр за об’ємами\n    if (tempFilters.volumes.length > 0) {\n      filtered = filtered.filter(product => tempFilters.volumes.includes(product.volume));\n    }\n\n    // Фільтр за типами\n    if (tempFilters.types.length > 0) {\n      filtered = filtered.filter(product => tempFilters.types.includes(product.feature_type));\n    }\n    return filtered;\n  }, [allProducts, searchQuery, categoryId, isSearchPage, customPriceFrom, customPriceTo]);\n\n  // Функція для previewProductCount\n  const calculatePreviewProducts = useCallback(() => {\n    const filtered = calculateFilteredProducts(selectedFilters);\n    return filtered.length;\n  }, [calculateFilteredProducts, selectedFilters]);\n\n  // Функція для оновлення неактивних фільтрів\n  const updateDisabledFilters = useCallback(() => {\n    const newDisabledFilters = {\n      brands: new Set(),\n      priceRanges: new Set(),\n      volumes: new Set(),\n      types: new Set(),\n      categories: new Set()\n    };\n\n    // Базові фільтри: усі вибрані фільтри, крім поточного типу\n    const baseFilters = {\n      brands: [...selectedFilters.brands],\n      priceRanges: [...selectedFilters.priceRanges],\n      volumes: [...selectedFilters.volumes],\n      types: [...selectedFilters.types],\n      categories: [...selectedFilters.categories]\n    };\n\n    // Перевірка кожного бренду\n    filters.brands.forEach(brand => {\n      const tempFilters = {\n        ...baseFilters,\n        brands: [brand],\n        priceRanges: baseFilters.priceRanges,\n        volumes: baseFilters.volumes,\n        types: baseFilters.types,\n        categories: baseFilters.categories\n      };\n      const filtered = calculateFilteredProducts(tempFilters);\n      if (filtered.length === 0) {\n        newDisabledFilters.brands.add(brand);\n      }\n    });\n\n    // Перевірка кожного цінового діапазону\n    filters.priceRanges.forEach(range => {\n      const tempFilters = {\n        ...baseFilters,\n        brands: baseFilters.brands,\n        priceRanges: [range.label],\n        volumes: baseFilters.volumes,\n        types: baseFilters.types,\n        categories: baseFilters.categories\n      };\n      const filtered = calculateFilteredProducts(tempFilters);\n      if (filtered.length === 0) {\n        newDisabledFilters.priceRanges.add(range.label);\n      }\n    });\n\n    // Перевірка кожного об’єму\n    filters.volumes.forEach(volume => {\n      const tempFilters = {\n        ...baseFilters,\n        brands: baseFilters.brands,\n        priceRanges: baseFilters.priceRanges,\n        volumes: [volume],\n        types: baseFilters.types,\n        categories: baseFilters.categories\n      };\n      const filtered = calculateFilteredProducts(tempFilters);\n      if (filtered.length === 0) {\n        newDisabledFilters.volumes.add(volume);\n      }\n    });\n\n    // Перевірка кожного типу\n    filters.types.forEach(type => {\n      const tempFilters = {\n        ...baseFilters,\n        brands: baseFilters.brands,\n        priceRanges: baseFilters.priceRanges,\n        volumes: baseFilters.volumes,\n        types: [type],\n        categories: baseFilters.categories\n      };\n      const filtered = calculateFilteredProducts(tempFilters);\n      if (filtered.length === 0) {\n        newDisabledFilters.types.add(type);\n      }\n    });\n\n    // Перевірка кожної категорії (для /search)\n    if (isSearchPage) {\n      filters.categories.forEach(category => {\n        const tempFilters = {\n          ...baseFilters,\n          brands: baseFilters.brands,\n          priceRanges: baseFilters.priceRanges,\n          volumes: baseFilters.volumes,\n          types: baseFilters.types,\n          categories: [category]\n        };\n        const filtered = calculateFilteredProducts(tempFilters);\n        if (filtered.length === 0) {\n          newDisabledFilters.categories.add(category);\n        }\n      });\n    }\n    setDisabledFilters(newDisabledFilters);\n  }, [filters, selectedFilters, calculateFilteredProducts, isSearchPage]);\n\n  // Завантаження всіх продуктів із API\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setIsLoading(true); // Починаємо завантаження\n      try {\n        // Логування параметрів запиту\n        const requestParams = {\n          search: searchQuery || undefined,\n          category: categoryId && !isSearchPage ? categoryId : undefined,\n          limit: 1000\n        };\n        console.log('Fetching products with params:', requestParams);\n\n        // Завантажуємо всі продукти з урахуванням пошукового запиту та категорії\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\n          params: requestParams\n        });\n\n        // Логування отриманих даних\n        console.log('API response:', {\n          productCount: response.data.products.length,\n          products: response.data.products.map(p => ({\n            id: p.id,\n            name: p.name,\n            category_id: p.category_id,\n            category_name: p.category_name\n          }))\n        });\n        let productsData = response.data.products || [];\n\n        // Ініціалізація фільтрів на основі отриманих продуктів\n        const brandCounts = {};\n        const typeCounts = {};\n        const categoryCounts = {};\n        const allVolumes = new Set();\n        const priceBuckets = new Set();\n        productsData.forEach(product => {\n          const brand = product.brand_name;\n          const type = product.feature_type;\n          const category = product.category_name;\n          const volume = product.volume;\n          const minPrice = getMinPrice(product.store_prices);\n          brandCounts[brand] = (brandCounts[brand] || 0) + 1;\n          if (type) typeCounts[type] = (typeCounts[type] || 0) + 1;\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\n          if (volume) allVolumes.add(volume);\n          if (minPrice > 0) {\n            if (minPrice <= 100) priceBuckets.add('0-100');else if (minPrice <= 200) priceBuckets.add('100-200');else if (minPrice <= 300) priceBuckets.add('200-300');else if (minPrice <= 400) priceBuckets.add('300-400');else if (minPrice <= 500) priceBuckets.add('400-500');else if (minPrice <= 600) priceBuckets.add('500-600');else if (minPrice <= 700) priceBuckets.add('600-700');else if (minPrice <= 800) priceBuckets.add('700-800');else if (minPrice <= 900) priceBuckets.add('800-900');else if (minPrice <= 1000) priceBuckets.add('900-1000');else priceBuckets.add('1000+');\n          }\n        });\n        const allBrands = [...new Set(productsData.map(p => p.brand_name))].sort((a, b) => (brandCounts[b] || 0) - (brandCounts[a] || 0));\n        const allPriceRanges = [{\n          label: '0-100',\n          min: 0,\n          max: 100\n        }, {\n          label: '100-200',\n          min: 100,\n          max: 200\n        }, {\n          label: '200-300',\n          min: 200,\n          max: 300\n        }, {\n          label: '300-400',\n          min: 300,\n          max: 400\n        }, {\n          label: '400-500',\n          min: 400,\n          max: 500\n        }, {\n          label: '500-600',\n          min: 500,\n          max: 600\n        }, {\n          label: '600-700',\n          min: 600,\n          max: 700\n        }, {\n          label: '700-800',\n          min: 700,\n          max: 800\n        }, {\n          label: '800-900',\n          min: 800,\n          max: 900\n        }, {\n          label: '900-1000',\n          min: 900,\n          max: 1000\n        }, {\n          label: '1000+',\n          min: 1000,\n          max: Infinity\n        }].filter(range => priceBuckets.has(range.label));\n        const allVolumesSorted = [...allVolumes].sort((a, b) => {\n          const numA = parseFloat(a.replace(/[^0-9.]/g, '')) || 0;\n          const numB = parseFloat(b.replace(/[^0-9.]/g, '')) || 0;\n          return numA - numB;\n        });\n        const allTypes = [...new Set(productsData.map(p => p.feature_type).filter(Boolean))].sort((a, b) => (typeCounts[b] || 0) - (typeCounts[a] || 0));\n        const allCategories = isSearchPage ? [...new Set(productsData.map(p => p.category_name))].sort((a, b) => (categoryCounts[b] || 0) - (categoryCounts[a] || 0)) : [categoryId].filter(Boolean);\n        setFilters({\n          brands: allBrands,\n          priceRanges: allPriceRanges,\n          volumes: allVolumesSorted,\n          types: allTypes,\n          categories: allCategories\n        });\n        setAllProducts(productsData);\n        setFilteredProducts(productsData); // Спочатку встановлюємо, але useEffect нижче оновить\n        setTotalProducts(productsData.length);\n        setPreviewProductCount(productsData.length);\n        setCurrentPage(1);\n        setStartPage(1);\n        setLoadMorePages(1);\n        setIsPaginated(true);\n\n        // Скидання фільтрів\n        setSelectedFilters({\n          brands: [],\n          priceRanges: [],\n          volumes: [],\n          types: initialType ? [initialType] : [],\n          categories: categoryId ? [categoryId] : []\n        });\n        setAppliedFilters({\n          brands: [],\n          priceRanges: [],\n          volumes: [],\n          types: initialType ? [initialType] : [],\n          categories: categoryId ? [categoryId] : []\n        });\n        setBrandSearch('');\n        setCustomPriceFrom('');\n        setCustomPriceTo('');\n        setDisabledFilters({\n          brands: new Set(),\n          priceRanges: new Set(),\n          volumes: new Set(),\n          types: new Set(),\n          categories: new Set()\n        });\n\n        // Автоматично вибираємо чекбокс типу\n        if (initialType) {\n          setTimeout(() => {\n            const typeCheckbox = document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);\n            if (typeCheckbox) typeCheckbox.checked = true;\n          }, 0);\n        }\n      } catch (error) {\n        console.error('Помилка завантаження продуктів:', error);\n        alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');\n        setAllProducts([]);\n        setFilteredProducts([]);\n        setTotalProducts(0);\n        setPreviewProductCount(0);\n      } finally {\n        setIsLoading(false); // Завершуємо завантаження\n      }\n    };\n    fetchProducts();\n  }, [categoryId, searchQuery, initialType, isSearchPage]);\n\n  // Оновлення previewProductCount та disabledFilters при зміні selectedFilters\n  useEffect(() => {\n    if (!isLoading) {\n      setPreviewProductCount(calculatePreviewProducts());\n      updateDisabledFilters();\n    }\n  }, [selectedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, allProducts, isLoading, calculatePreviewProducts, updateDisabledFilters]);\n\n  // Клієнтська фільтрація при зміні застосованих фільтрів\n  useEffect(() => {\n    if (!isLoading && allProducts.length > 0) {\n      console.log('Starting client-side filtering:', {\n        allProductsCount: allProducts.length,\n        searchQuery,\n        categoryId,\n        isSearchPage,\n        appliedFilters,\n        customPriceFrom,\n        customPriceTo\n      });\n      let filtered = [...allProducts];\n\n      // Фільтр за пошуковим запитом\n      if (searchQuery) {\n        console.log('Applying searchQuery filter:', {\n          searchQuery\n        });\n        filtered = filtered.filter(product => {\n          const matches = product.name.toLowerCase().includes(searchQuery.toLowerCase());\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (does not match \"${searchQuery}\")`);\n          }\n          return matches;\n        });\n        console.log('After searchQuery filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Фільтр за категорією\n      if (categoryId && !isSearchPage) {\n        console.log('Applying categoryId filter:', {\n          categoryId\n        });\n        filtered = filtered.filter(product => {\n          const matches = product.category_id === categoryId;\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (category_id ${product.category_id} does not match \"${categoryId}\")`);\n          }\n          return matches;\n        });\n        console.log('After categoryId filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      } else if (appliedFilters.categories.length > 0 && isSearchPage) {\n        console.log('Applying categories filter:', {\n          categories: appliedFilters.categories\n        });\n        filtered = filtered.filter(product => {\n          const matches = appliedFilters.categories.includes(product.category_name);\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (category_name ${product.category_name} not in ${appliedFilters.categories})`);\n          }\n          return matches;\n        });\n        console.log('After categories filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Фільтр за брендами\n      if (appliedFilters.brands.length > 0) {\n        console.log('Applying brands filter:', {\n          brands: appliedFilters.brands\n        });\n        filtered = filtered.filter(product => {\n          const matches = appliedFilters.brands.includes(product.brand_name);\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (brand ${product.brand_name} not in ${appliedFilters.brands})`);\n          }\n          return matches;\n        });\n        console.log('After brands filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Фільтр за ціною\n      if (customPriceFrom !== '' && customPriceTo !== '') {\n        const priceFrom = parseFloat(customPriceFrom);\n        const priceTo = parseFloat(customPriceTo);\n        console.log('Applying custom price filter:', {\n          priceFrom,\n          priceTo\n        });\n        filtered = filtered.filter(product => {\n          const minPrice = getMinPrice(product.store_prices);\n          const matches = minPrice >= priceFrom && minPrice <= priceTo;\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in range ${priceFrom}-${priceTo})`);\n          }\n          return matches;\n        });\n        console.log('After custom price filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      } else if (appliedFilters.priceRanges.length > 0) {\n        console.log('Applying priceRanges filter:', {\n          priceRanges: appliedFilters.priceRanges\n        });\n        filtered = filtered.filter(product => {\n          const minPrice = getMinPrice(product.store_prices);\n          const matches = appliedFilters.priceRanges.some(range => {\n            const [min, max] = range.includes('+') ? [1000, Infinity] : range.split('-').map(Number);\n            return minPrice >= min && (max === Infinity || minPrice <= max);\n          });\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in ranges ${appliedFilters.priceRanges})`);\n          }\n          return matches;\n        });\n        console.log('After priceRanges filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Фільтр за об’ємами\n      if (appliedFilters.volumes.length > 0) {\n        console.log('Applying volumes filter:', {\n          volumes: appliedFilters.volumes\n        });\n        filtered = filtered.filter(product => {\n          const matches = appliedFilters.volumes.includes(product.volume);\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (volume ${product.volume} not in ${appliedFilters.volumes})`);\n          }\n          return matches;\n        });\n        console.log('After volumes filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Фільтр за типами\n      if (appliedFilters.types.length > 0) {\n        console.log('Applying types filter:', {\n          types: appliedFilters.types\n        });\n        filtered = filtered.filter(product => {\n          const matches = appliedFilters.types.includes(product.feature_type);\n          if (!matches) {\n            console.log(`Excluding product: ${product.name} (type ${product.feature_type} not in ${appliedFilters.types})`);\n          }\n          return matches;\n        });\n        console.log('After types filter:', {\n          count: filtered.length,\n          products: filtered.map(p => p.name)\n        });\n      }\n\n      // Логування фінального результату\n      console.log('Final filtered products:', {\n        count: filtered.length,\n        products: filtered.map(p => ({\n          id: p.id,\n          name: p.name,\n          category_id: p.category_id,\n          category_name: p.category_name\n        }))\n      });\n      setFilteredProducts(filtered);\n      setTotalProducts(filtered.length);\n    }\n  }, [allProducts, appliedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, isLoading]);\n\n  // Обробка вибору фільтру\n  const handleFilterChange = (filterType, value) => {\n    setSelectedFilters(prev => {\n      const currentValues = prev[filterType] || [];\n      let updatedValues;\n      if (currentValues.includes(value)) {\n        updatedValues = currentValues.filter(v => v !== value);\n      } else {\n        updatedValues = [...currentValues, value];\n      }\n      const updatedFilters = {\n        ...prev,\n        [filterType]: updatedValues\n      };\n      if (filterType === 'priceRanges') {\n        setCustomPriceFrom('');\n        setCustomPriceTo('');\n      }\n      return updatedFilters;\n    });\n    setActiveFilter({\n      type: filterType,\n      value\n    });\n  };\n\n  // Видалення одного фільтру\n  const removeFilter = (filterType, value) => {\n    setSelectedFilters(prev => {\n      const updatedValues = (prev[filterType] || []).filter(v => v !== value);\n      const updatedFilters = {\n        ...prev,\n        [filterType]: updatedValues\n      };\n      setAppliedFilters({\n        ...prev,\n        [filterType]: updatedValues\n      });\n      return updatedFilters;\n    });\n  };\n\n  // Скидання всіх фільтрів\n  const resetAllFilters = () => {\n    const emptyFilters = {\n      brands: [],\n      priceRanges: [],\n      volumes: [],\n      types: [],\n      categories: []\n    };\n    setSelectedFilters(emptyFilters);\n    setAppliedFilters(emptyFilters);\n    setBrandSearch('');\n    setCustomPriceFrom('');\n    setCustomPriceTo('');\n    setDisabledFilters({\n      brands: new Set(),\n      priceRanges: new Set(),\n      volumes: new Set(),\n      types: new Set(),\n      categories: new Set()\n    });\n    setCurrentPage(1);\n    setStartPage(1);\n    setLoadMorePages(1);\n    setIsPaginated(true);\n  };\n\n  // Застосування фільтрів\n  const applyFilters = () => {\n    setAppliedFilters({\n      ...selectedFilters\n    });\n    setCurrentPage(1);\n    setStartPage(1);\n    setLoadMorePages(1);\n    setIsPaginated(true);\n    setActiveFilter(null);\n  };\n\n  // Перемикання \"Більше\"/\"Менше\"\n  const toggleShowMore = filterType => {\n    setShowMore(prev => ({\n      ...prev,\n      [filterType]: !prev[filterType]\n    }));\n  };\n\n  // Обробка пошуку брендів\n  const handleBrandSearch = e => {\n    setBrandSearch(e.target.value);\n  };\n\n  // Обробка кастомного діапазону цін\n  const handleCustomPriceChange = (field, value) => {\n    const numValue = value.replace(/[^0-9]/g, '');\n    if (field === 'from') {\n      setCustomPriceFrom(numValue);\n    } else {\n      setCustomPriceTo(numValue);\n    }\n    if (numValue !== '') {\n      setSelectedFilters(prev => ({\n        ...prev,\n        priceRanges: []\n      }));\n      setAppliedFilters(prev => ({\n        ...prev,\n        priceRanges: []\n      }));\n    }\n  };\n\n  // Обмеження кількості елементів для фільтрів\n  const getVisibleItems = useCallback((items, filterType) => {\n    if (!items) return [];\n    let filteredItems = items;\n    if (filterType === 'brands') {\n      filteredItems = items.filter(brand => brand.toLowerCase().includes(brandSearch.toLowerCase()));\n      const topItems = filteredItems.slice(0, 12); // Top 12 brands (by count)\n      const remainingItems = filteredItems.slice(12); // Remaining brands\n      if (showMore.brands || filteredItems.length <= 12) {\n        // Keep top 12 in original order, sort remaining alphabetically\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\n      }\n      return topItems;\n    }\n    if (filterType === 'types') {\n      const topItems = filteredItems.slice(0, 6); // Top 6 types (by count)\n      const remainingItems = filteredItems.slice(6); // Remaining types\n      if (showMore.types || filteredItems.length <= 6) {\n        // Keep top 6 in original order, sort remaining alphabetically\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\n      }\n      return topItems;\n    }\n    if (filterType === 'categories') {\n      if (showMore.categories || items.length <= 6) {\n        return [...items].sort((a, b) => a.localeCompare(b));\n      }\n      return items.slice(0, 6);\n    }\n    if (showMore[filterType] || items.length <= 12) {\n      return items;\n    }\n    return items.slice(0, 12);\n  }, [brandSearch, showMore]);\n\n  // Модифікація назви продукту\n  const getProductName = product => {\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\n  };\n\n  // Пагінація\n  const totalPages = Math.ceil(totalProducts / productsPerPage);\n  const handlePageChange = page => {\n    setCurrentPage(page);\n    setStartPage(page);\n    setLoadMorePages(1);\n    setIsPaginated(true);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const handleLoadMore = () => {\n    setCurrentPage(prev => prev + 1);\n    setLoadMorePages(prev => prev + 1);\n    setIsPaginated(false);\n  };\n  const pageNumbers = [];\n  for (let i = 1; i <= totalPages; i++) {\n    pageNumbers.push(i);\n  }\n  const totalAppliedFilters = (((_appliedFilters$brand = appliedFilters.brands) === null || _appliedFilters$brand === void 0 ? void 0 : _appliedFilters$brand.length) || 0) + (((_appliedFilters$price = appliedFilters.priceRanges) === null || _appliedFilters$price === void 0 ? void 0 : _appliedFilters$price.length) || 0) + (((_appliedFilters$volum = appliedFilters.volumes) === null || _appliedFilters$volum === void 0 ? void 0 : _appliedFilters$volum.length) || 0) + (((_appliedFilters$types = appliedFilters.types) === null || _appliedFilters$types === void 0 ? void 0 : _appliedFilters$types.length) || 0) + (isSearchPage ? ((_appliedFilters$categ = appliedFilters.categories) === null || _appliedFilters$categ === void 0 ? void 0 : _appliedFilters$categ.length) || 0 : 0) + (customPriceFrom !== '' && customPriceTo !== '' ? 1 : 0);\n\n  // Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\n  useEffect(() => {\n    Object.keys(showMore).forEach(filterType => {\n      const container = filterItemsRefs.current[filterType];\n      if (container) {\n        const items = container.querySelector('.filter-items');\n        if (items) {\n          const visibleItems = getVisibleItems(filters[filterType], filterType);\n          const maxVisible = filterType === 'brands' || filterType === 'priceRanges' || filterType === 'volumes' ? 12 : 6;\n          const isExpanded = showMore[filterType] || visibleItems.length <= maxVisible;\n          // Обчислюємо висоту для згорнутого стану\n          const collapsedHeight = visibleItems.length > maxVisible ? items.scrollHeight * (maxVisible / filters[filterType].length) : items.scrollHeight;\n          // Встановлюємо max-height\n          container.style.maxHeight = isExpanded ? `${items.scrollHeight}px` : `${collapsedHeight}px`;\n        }\n      }\n    });\n  }, [showMore, filters, brandSearch, getVisibleItems]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 909,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 913,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `filters ${!isLoading ? 'loaded' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\u0424\\u0456\\u043B\\u044C\\u0442\\u0440\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 922,\n            columnNumber: 13\n          }, this), totalAppliedFilters > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-filters\",\n            children: [isSearchPage && ((_appliedFilters$categ2 = appliedFilters.categories) === null || _appliedFilters$categ2 === void 0 ? void 0 : _appliedFilters$categ2.map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: categoryNames[category] || category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFilter('categories', category),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 929,\n                columnNumber: 23\n              }, this)]\n            }, `category-${category}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 927,\n              columnNumber: 21\n            }, this))), (_appliedFilters$brand2 = appliedFilters.brands) === null || _appliedFilters$brand2 === void 0 ? void 0 : _appliedFilters$brand2.map(brand => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: brand\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 936,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFilter('brands', brand),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 937,\n                columnNumber: 21\n              }, this)]\n            }, `brand-${brand}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 935,\n              columnNumber: 19\n            }, this)), customPriceFrom !== '' && customPriceTo !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [customPriceFrom, \"-\", customPriceTo, \" \\u0433\\u0440\\u043D\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 942,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setCustomPriceFrom('');\n                  setCustomPriceTo('');\n                  applyFilters();\n                },\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 945,\n                columnNumber: 21\n              }, this)]\n            }, \"custom-price\", true, {\n              fileName: _jsxFileName,\n              lineNumber: 941,\n              columnNumber: 19\n            }, this) : (_appliedFilters$price2 = appliedFilters.priceRanges) === null || _appliedFilters$price2 === void 0 ? void 0 : _appliedFilters$price2.map(range => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: range\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 958,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFilter('priceRanges', range),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 959,\n                columnNumber: 23\n              }, this)]\n            }, `price-${range}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 957,\n              columnNumber: 21\n            }, this)), (_appliedFilters$volum2 = appliedFilters.volumes) === null || _appliedFilters$volum2 === void 0 ? void 0 : _appliedFilters$volum2.map(volume => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: volume\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 967,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFilter('volumes', volume),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 21\n              }, this)]\n            }, `volume-${volume}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 966,\n              columnNumber: 19\n            }, this)), (_appliedFilters$types2 = appliedFilters.types) === null || _appliedFilters$types2 === void 0 ? void 0 : _appliedFilters$types2.map(type => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-filter-tag\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 973,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFilter('types', type),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 21\n              }, this)]\n            }, `type-${type}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 972,\n              columnNumber: 19\n            }, this)), totalAppliedFilters > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"reset-all-filters\",\n              onClick: resetAllFilters,\n              children: \"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0432\\u0441\\u0456\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 978,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 11\n        }, this), isSearchPage && searchQuery && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 989,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-items-container\",\n            ref: el => filterItemsRefs.current['categories'] = el,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"filter-items filter-items-single-column\",\n              children: getVisibleItems(filters.categories, 'categories').map((category, index) => {\n                var _selectedFilters$cate;\n                const isDisabled = disabledFilters.categories.has(category);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: isDisabled ? 'disabled' : '',\n                  ref: el => filterRefs.current[`categories-${category}`] = el,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"category\",\n                    value: category,\n                    checked: ((_selectedFilters$cate = selectedFilters.categories) === null || _selectedFilters$cate === void 0 ? void 0 : _selectedFilters$cate.includes(category)) || false,\n                    onChange: () => handleFilterChange('categories', category),\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1004,\n                    columnNumber: 27\n                  }, this), categoryNames[category] || category]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 999,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 994,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 990,\n            columnNumber: 15\n          }, this), filters.categories.length > 6 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-btn\",\n            onClick: () => toggleShowMore('categories'),\n            children: showMore.categories ? 'Менше ↑' : 'Більше ↓'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1022,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 988,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0411\\u0440\\u0435\\u043D\\u0434\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"brand-search-input\",\n            placeholder: \"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0431\\u0440\\u0435\\u043D\\u0434\\u0443...\",\n            value: brandSearch,\n            onChange: handleBrandSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1035,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-items-container\",\n            ref: el => filterItemsRefs.current['brands'] = el,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"filter-items\",\n              children: getVisibleItems(filters.brands, 'brands').map((brand, index) => {\n                var _selectedFilters$bran;\n                const isDisabled = disabledFilters.brands.has(brand);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `${brand.length > 13 ? 'span-two-columns' : ''} ${isDisabled ? 'disabled' : ''}`,\n                  ref: el => filterRefs.current[`brands-${brand}`] = el,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"brand\",\n                    value: brand,\n                    checked: ((_selectedFilters$bran = selectedFilters.brands) === null || _selectedFilters$bran === void 0 ? void 0 : _selectedFilters$bran.includes(brand)) || false,\n                    onChange: () => handleFilterChange('brands', brand),\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1057,\n                    columnNumber: 23\n                  }, this), brand]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1050,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1046,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1042,\n            columnNumber: 13\n          }, this), filters.brands.length > 12 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-btn\",\n            onClick: () => toggleShowMore('brands'),\n            children: showMore.brands ? 'Менше ↑' : 'Більше ↓'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1072,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1033,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0426\\u0456\\u043D\\u0430 (\\u0433\\u0440\\u043D)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1083,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom-price-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\u0412\\u0456\\u0434\",\n              value: customPriceFrom,\n              onChange: e => handleCustomPriceChange('from', e.target.value),\n              className: \"price-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1085,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\u0414\\u043E\",\n              value: customPriceTo,\n              onChange: e => handleCustomPriceChange('to', e.target.value),\n              className: \"price-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1084,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-items-container\",\n            ref: el => filterItemsRefs.current['priceRanges'] = el,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"filter-items\",\n              children: getVisibleItems(filters.priceRanges, 'priceRanges').map((range, index) => {\n                var _selectedFilters$pric;\n                const isDisabled = disabledFilters.priceRanges.has(range.label);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: isDisabled ? 'disabled' : '',\n                  ref: el => filterRefs.current[`priceRanges-${range.label}`] = el,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"priceRange\",\n                    value: range.label,\n                    checked: ((_selectedFilters$pric = selectedFilters.priceRanges) === null || _selectedFilters$pric === void 0 ? void 0 : _selectedFilters$pric.includes(range.label)) || false,\n                    onChange: () => handleFilterChange('priceRanges', range.label),\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1116,\n                    columnNumber: 25\n                  }, this), range.label]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1109,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1104,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1100,\n            columnNumber: 13\n          }, this), filters.priceRanges.length > 12 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-btn\",\n            onClick: () => toggleShowMore('priceRanges'),\n            children: showMore.priceRanges ? 'Менше ↑' : 'Більше ↓'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1136,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1082,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u041E\\u0431\\u2019\\u0454\\u043C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-items-container\",\n            ref: el => filterItemsRefs.current['volumes'] = el,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"filter-items\",\n              children: getVisibleItems(filters.volumes, 'volumes').map((volume, index) => {\n                var _selectedFilters$volu;\n                const isDisabled = disabledFilters.volumes.has(volume);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: isDisabled ? 'disabled' : '',\n                  ref: el => filterRefs.current[`volumes-${volume}`] = el,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"volume\",\n                    value: volume,\n                    checked: ((_selectedFilters$volu = selectedFilters.volumes) === null || _selectedFilters$volu === void 0 ? void 0 : _selectedFilters$volu.includes(volume)) || false,\n                    onChange: () => handleFilterChange('volumes', volume),\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1161,\n                    columnNumber: 23\n                  }, this), volume]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1156,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1152,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1148,\n            columnNumber: 13\n          }, this), filters.volumes.length > 12 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-btn\",\n            onClick: () => toggleShowMore('volumes'),\n            children: showMore.volumes ? 'Менше ↑' : 'Більше ↓'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1176,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0422\\u0438\\u043F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-items-container\",\n            ref: el => filterItemsRefs.current['types'] = el,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"filter-items filter-items-single-column\",\n              children: getVisibleItems(filters.types, 'types').map((type, index) => {\n                var _selectedFilters$type;\n                const isDisabled = disabledFilters.types.has(type);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: isDisabled ? 'disabled' : '',\n                  ref: el => filterRefs.current[`types-${type}`] = el,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"type\",\n                    value: type,\n                    checked: ((_selectedFilters$type = selectedFilters.types) === null || _selectedFilters$type === void 0 ? void 0 : _selectedFilters$type.includes(type)) || false,\n                    onChange: () => handleFilterChange('types', type),\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1201,\n                    columnNumber: 23\n                  }, this), type]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1196,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1192,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1188,\n            columnNumber: 13\n          }, this), filters.types.length > 6 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-btn\",\n            onClick: () => toggleShowMore('types'),\n            children: showMore.types ? 'Менше ↑' : 'Більше ↓'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1216,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1186,\n          columnNumber: 11\n        }, this), activeFilter && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"filter-tag\",\n          ref: tagRef,\n          onClick: applyFilters,\n          style: {\n            top: filterRefs.current[`${activeFilter.type}-${activeFilter.value}`] ? `${filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].getBoundingClientRect().top - filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].closest('.filters').getBoundingClientRect().top + filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].offsetHeight / 2}px` : '0px'\n          },\n          children: [\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\", previewProductCount, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"apply-filters-btn\",\n          onClick: applyFilters,\n          children: [\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\", previewProductCount, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 920,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `products-list ${!isLoading ? 'loaded' : ''}`,\n          children: filteredProducts.length > 0 ? filteredProducts.slice(isPaginated ? (currentPage - 1) * productsPerPage : (startPage - 1) * productsPerPage, isPaginated ? currentPage * productsPerPage : startPage * productsPerPage + loadMorePages * productsPerPage).map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card-container\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/product/${product.id}`,\n              className: \"product-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: getProductName(product)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1275,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.images && product.images.length > 0 ? product.images[0] : '/img/placeholder.webp',\n                alt: product.name,\n                onError: e => e.target.src = '/img/placeholder.webp'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1276,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"price\",\n                children: [getMinPrice(product.store_prices), \" \\u0433\\u0440\\u043D\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1285,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.description || 'Опис відсутній'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1286,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1271,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `heart-icon ${savedProducts.has(product.id) ? 'saved' : ''}`,\n              onClick: e => handleHeartClick(product.id, e),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: savedProducts.has(product.id) ? '#d32f2f' : 'none',\n                stroke: \"#d32f2f\",\n                strokeWidth: \"2\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1303,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1292,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1288,\n              columnNumber: 21\n            }, this), showLoginPrompt[product.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"login-prompt\",\n              children: [\"\\u0423\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0432 \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                className: \"login-link\",\n                children: \"\\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1308,\n                columnNumber: 36\n              }, this), \" \\u0449\\u043E\\u0431 \\u0434\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0434\\u043E \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1307,\n              columnNumber: 23\n            }, this)]\n          }, `${product.id}-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1270,\n            columnNumber: 19\n          }, this)) : !isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1314,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1258,\n          columnNumber: 11\n        }, this), !isLoading && totalProducts > productsPerPage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-container\",\n          children: [(startPage - 1 + loadMorePages) * productsPerPage < totalProducts && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"load-more-btn\",\n            onClick: handleLoadMore,\n            children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438 \\u0449\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1321,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pagination\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"pagination-btn\",\n              onClick: () => handlePageChange(currentPage - 1),\n              disabled: currentPage === 1,\n              children: \"\\u041F\\u043E\\u043F\\u0435\\u0440\\u0435\\u0434\\u043D\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1326,\n              columnNumber: 17\n            }, this), pageNumbers.map(number => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `pagination-btn ${currentPage === number ? 'active' : ''}`,\n              onClick: () => handlePageChange(number),\n              children: number\n            }, number, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1334,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"pagination-btn\",\n              onClick: () => handlePageChange(currentPage + 1),\n              disabled: currentPage === totalPages,\n              children: \"\\u041D\\u0430\\u0441\\u0442\\u0443\\u043F\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1344,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 918,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 908,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"Ofy3dlJ3mC77YXPFiaDrv9AbhAw=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useLocation","Link","useNavigate","axios","categoryNames","jsxDEV","_jsxDEV","ProductList","searchTerm","_s","_appliedFilters$brand","_appliedFilters$price","_appliedFilters$volum","_appliedFilters$types","_appliedFilters$categ","_appliedFilters$categ2","_appliedFilters$brand2","_appliedFilters$price2","_appliedFilters$volum2","_appliedFilters$types2","categoryId","location","navigate","queryParams","URLSearchParams","search","initialType","get","searchQuery","isSearchPage","pathname","console","log","filters","setFilters","brands","priceRanges","volumes","types","categories","selectedFilters","setSelectedFilters","appliedFilters","setAppliedFilters","allProducts","setAllProducts","filteredProducts","setFilteredProducts","totalProducts","setTotalProducts","previewProductCount","setPreviewProductCount","currentPage","setCurrentPage","productsPerPage","isPaginated","setIsPaginated","startPage","setStartPage","loadMorePages","setLoadMorePages","brandSearch","setBrandSearch","customPriceFrom","setCustomPriceFrom","customPriceTo","setCustomPriceTo","activeFilter","setActiveFilter","disabledFilters","setDisabledFilters","Set","showMore","setShowMore","isLoading","setIsLoading","savedProducts","setSavedProducts","showLoginPrompt","setShowLoginPrompt","filterRefs","tagRef","filterItemsRefs","user","JSON","parse","localStorage","getItem","token","getMinPrice","storePrices","length","Math","min","map","sp","price","fetchSavedStatus","promises","product","id","headers","Authorization","responses","Promise","all","savedSet","forEach","response","index","data","isSaved","add","error","handleHeartClick","productId","event","preventDefault","prev","setTimeout","has","delete","newSet","post","alert","calculateFilteredProducts","tempFilters","filtered","filter","name","toLowerCase","includes","category_id","category_name","brand_name","priceFrom","parseFloat","priceTo","minPrice","store_prices","some","range","max","Infinity","split","Number","volume","feature_type","calculatePreviewProducts","updateDisabledFilters","newDisabledFilters","baseFilters","brand","label","type","category","fetchProducts","requestParams","undefined","limit","params","productCount","products","p","productsData","brandCounts","typeCounts","categoryCounts","allVolumes","priceBuckets","allBrands","sort","a","b","allPriceRanges","allVolumesSorted","numA","replace","numB","allTypes","Boolean","allCategories","typeCheckbox","document","querySelector","checked","allProductsCount","matches","count","handleFilterChange","filterType","value","currentValues","updatedValues","v","updatedFilters","removeFilter","resetAllFilters","emptyFilters","applyFilters","toggleShowMore","handleBrandSearch","e","target","handleCustomPriceChange","field","numValue","getVisibleItems","items","filteredItems","topItems","slice","remainingItems","localeCompare","getProductName","totalPages","ceil","handlePageChange","page","window","scrollTo","top","behavior","handleLoadMore","pageNumbers","i","push","totalAppliedFilters","Object","keys","container","current","visibleItems","maxVisible","isExpanded","collapsedHeight","scrollHeight","style","maxHeight","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","el","_selectedFilters$cate","isDisabled","onChange","disabled","placeholder","_selectedFilters$bran","_selectedFilters$pric","_selectedFilters$volu","_selectedFilters$type","getBoundingClientRect","closest","offsetHeight","to","src","images","alt","onError","description","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","number","_c","$RefreshReg$"],"sources":["C:/Users/pushy/Desktop/Work/ek/price-ua/cosmetick-frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useLocation, Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './ProductList.css';\r\nimport { categoryNames } from './Header.js';\r\n\r\nfunction ProductList({ searchTerm }) {\r\n  const { categoryId } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  // Отримуємо параметри з URL, враховуючи як 'query', так і 'search'\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const initialType = queryParams.get('type') || '';\r\n  const searchQuery = queryParams.get('query') || queryParams.get('search') || searchTerm || '';\r\n  const isSearchPage = location.pathname === '/search';\r\n  console.log('ProductList initialized with:', {\r\n    categoryId,\r\n    searchTerm,\r\n    searchQuery,\r\n    initialType,\r\n    isSearchPage,\r\n    location: location.pathname + location.search,\r\n  });\r\n\r\n  // Стан для всіх фільтрів\r\n  const [filters, setFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: [],\r\n    categories: [],\r\n  });\r\n\r\n  // Стан для вибраних фільтрів\r\n  const [selectedFilters, setSelectedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для застосованих фільтрів\r\n  const [appliedFilters, setAppliedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для всіх продуктів (з API)\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  // Стан для відфільтрованих продуктів і пагінації\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [totalProducts, setTotalProducts] = useState(0);\r\n  const [previewProductCount, setPreviewProductCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const productsPerPage = 24;\r\n  const [isPaginated, setIsPaginated] = useState(true);\r\n  const [startPage, setStartPage] = useState(1);\r\n  const [loadMorePages, setLoadMorePages] = useState(1);\r\n\r\n  // Стан для пошуку брендів\r\n  const [brandSearch, setBrandSearch] = useState('');\r\n\r\n  // Стан для кастомного діапазону цін\r\n  const [customPriceFrom, setCustomPriceFrom] = useState('');\r\n  const [customPriceTo, setCustomPriceTo] = useState('');\r\n\r\n  // Стан для активного фільтру\r\n  const [activeFilter, setActiveFilter] = useState(null);\r\n\r\n  // Стан для неактивних фільтрів\r\n  const [disabledFilters, setDisabledFilters] = useState({\r\n    brands: new Set(),\r\n    priceRanges: new Set(),\r\n    volumes: new Set(),\r\n    types: new Set(),\r\n    categories: new Set(),\r\n  });\r\n\r\n  // Стан для \"Більше/Менше\"\r\n  const [showMore, setShowMore] = useState({\r\n    brands: false,\r\n    priceRanges: false,\r\n    volumes: false,\r\n    types: false,\r\n    categories: false,\r\n  });\r\n\r\n  // Стан для індикатора завантаження\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Стан для статусу збереження продуктів\r\n  const [savedProducts, setSavedProducts] = useState(new Set());\r\n  // Стан для показу повідомлення про логін\r\n  const [showLoginPrompt, setShowLoginPrompt] = useState({});\r\n\r\n  // Рефи для позиціонування плашки та анімації фільтрів\r\n  const filterRefs = useRef({});\r\n  const tagRef = useRef(null);\r\n  const filterItemsRefs = useRef({});\r\n\r\n  // Перевірка авторизації користувача\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const token = localStorage.getItem('token');\r\n\r\n  // Функція для отримання мінімальної ціни з store_prices\r\n  const getMinPrice = (storePrices) => {\r\n    if (!storePrices || storePrices.length === 0) return 0;\r\n    return Math.min(...storePrices.map(sp => sp.price));\r\n  };\r\n\r\n  // Завантаження статусу збереження продуктів\r\n  const fetchSavedStatus = useCallback(async () => {\r\n    if (!user || !token) {\r\n      setSavedProducts(new Set());\r\n      return;\r\n    }\r\n    try {\r\n      const promises = filteredProducts.map(product =>\r\n        axios.get(`https://price-ua-react-backend.onrender.com/saved-products/${product.id}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n      );\r\n      const responses = await Promise.all(promises);\r\n      const savedSet = new Set();\r\n      responses.forEach((response, index) => {\r\n        if (response.data.isSaved) {\r\n          savedSet.add(filteredProducts[index].id);\r\n        }\r\n      });\r\n      setSavedProducts(savedSet);\r\n    } catch (error) {\r\n      console.error('Помилка завантаження статусу збереження:', error);\r\n    }\r\n  }, [filteredProducts, user, token]);\r\n\r\n  // Обробка кліку на сердечко\r\n  const handleHeartClick = async (productId, event) => {\r\n    event.preventDefault(); // Запобігаємо переходу за посиланням\r\n    if (!user || !token) {\r\n      setShowLoginPrompt(prev => ({ ...prev, [productId]: true }));\r\n      setTimeout(() => {\r\n        setShowLoginPrompt(prev => ({ ...prev, [productId]: false }));\r\n      }, 3000);\r\n      return;\r\n    }\r\n\r\n    const isSaved = savedProducts.has(productId);\r\n    try {\r\n      if (isSaved) {\r\n        await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setSavedProducts(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.delete(productId);\r\n          return newSet;\r\n        });\r\n      } else {\r\n        await axios.post(\r\n          'https://price-ua-react-backend.onrender.com/saved-products',\r\n          { productId },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setSavedProducts(prev => new Set(prev).add(productId));\r\n      }\r\n    } catch (error) {\r\n      console.error('Помилка при зміні статусу збереження:', error);\r\n      alert('Не вдалося оновити статус бажаного. Спробуйте ще раз.');\r\n    }\r\n  };\r\n\r\n  // Завантаження статусу збереження при зміні filteredProducts\r\n  useEffect(() => {\r\n    if (!isLoading && filteredProducts.length > 0) {\r\n      fetchSavedStatus();\r\n    }\r\n  }, [filteredProducts, isLoading, fetchSavedStatus]);\r\n\r\n  // Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\r\n  const calculateFilteredProducts = useCallback((tempFilters) => {\r\n    let filtered = [...allProducts];\r\n\r\n    // Фільтр за пошуковим запитом\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(product =>\r\n        product.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Фільтр за категорією\r\n    if (categoryId && !isSearchPage) {\r\n      filtered = filtered.filter(product => product.category_id === categoryId);\r\n    } else if (tempFilters.categories.length > 0 && isSearchPage) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.categories.includes(product.category_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за брендами\r\n    if (tempFilters.brands.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.brands.includes(product.brand_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за ціною\r\n    if (customPriceFrom !== '' && customPriceTo !== '') {\r\n      const priceFrom = parseFloat(customPriceFrom);\r\n      const priceTo = parseFloat(customPriceTo);\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return minPrice >= priceFrom && minPrice <= priceTo;\r\n      });\r\n    } else if (tempFilters.priceRanges.length > 0) {\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return tempFilters.priceRanges.some(range => {\r\n          const [min, max] = range.includes('+')\r\n            ? [1000, Infinity]\r\n            : range.split('-').map(Number);\r\n          return minPrice >= min && (max === Infinity || minPrice <= max);\r\n        });\r\n      });\r\n    }\r\n\r\n    // Фільтр за об’ємами\r\n    if (tempFilters.volumes.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.volumes.includes(product.volume)\r\n      );\r\n    }\r\n\r\n    // Фільтр за типами\r\n    if (tempFilters.types.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.types.includes(product.feature_type)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [allProducts, searchQuery, categoryId, isSearchPage, customPriceFrom, customPriceTo]);\r\n\r\n  // Функція для previewProductCount\r\n  const calculatePreviewProducts = useCallback(() => {\r\n    const filtered = calculateFilteredProducts(selectedFilters);\r\n    return filtered.length;\r\n  }, [calculateFilteredProducts, selectedFilters]);\r\n\r\n  // Функція для оновлення неактивних фільтрів\r\n  const updateDisabledFilters = useCallback(() => {\r\n    const newDisabledFilters = {\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    };\r\n\r\n    // Базові фільтри: усі вибрані фільтри, крім поточного типу\r\n    const baseFilters = {\r\n      brands: [...selectedFilters.brands],\r\n      priceRanges: [...selectedFilters.priceRanges],\r\n      volumes: [...selectedFilters.volumes],\r\n      types: [...selectedFilters.types],\r\n      categories: [...selectedFilters.categories],\r\n    };\r\n\r\n    // Перевірка кожного бренду\r\n    filters.brands.forEach(brand => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: [brand],\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.brands.add(brand);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного цінового діапазону\r\n    filters.priceRanges.forEach(range => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: [range.label],\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.priceRanges.add(range.label);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного об’єму\r\n    filters.volumes.forEach(volume => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: [volume],\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.volumes.add(volume);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного типу\r\n    filters.types.forEach(type => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: [type],\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.types.add(type);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожної категорії (для /search)\r\n    if (isSearchPage) {\r\n      filters.categories.forEach(category => {\r\n        const tempFilters = {\r\n          ...baseFilters,\r\n          brands: baseFilters.brands,\r\n          priceRanges: baseFilters.priceRanges,\r\n          volumes: baseFilters.volumes,\r\n          types: baseFilters.types,\r\n          categories: [category],\r\n        };\r\n        const filtered = calculateFilteredProducts(tempFilters);\r\n        if (filtered.length === 0) {\r\n          newDisabledFilters.categories.add(category);\r\n        }\r\n      });\r\n    }\r\n\r\n    setDisabledFilters(newDisabledFilters);\r\n  }, [filters, selectedFilters, calculateFilteredProducts, isSearchPage]);\r\n\r\n  // Завантаження всіх продуктів із API\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setIsLoading(true); // Починаємо завантаження\r\n      try {\r\n        // Логування параметрів запиту\r\n        const requestParams = {\r\n          search: searchQuery || undefined,\r\n          category: categoryId && !isSearchPage ? categoryId : undefined,\r\n          limit: 1000,\r\n        };\r\n        console.log('Fetching products with params:', requestParams);\r\n\r\n        // Завантажуємо всі продукти з урахуванням пошукового запиту та категорії\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n          params: requestParams,\r\n        });\r\n\r\n        // Логування отриманих даних\r\n        console.log('API response:', {\r\n          productCount: response.data.products.length,\r\n          products: response.data.products.map(p => ({\r\n            id: p.id,\r\n            name: p.name,\r\n            category_id: p.category_id,\r\n            category_name: p.category_name,\r\n          })),\r\n        });\r\n\r\n        let productsData = response.data.products || [];\r\n\r\n        // Ініціалізація фільтрів на основі отриманих продуктів\r\n        const brandCounts = {};\r\n        const typeCounts = {};\r\n        const categoryCounts = {};\r\n        const allVolumes = new Set();\r\n        const priceBuckets = new Set();\r\n        productsData.forEach(product => {\r\n          const brand = product.brand_name;\r\n          const type = product.feature_type;\r\n          const category = product.category_name;\r\n          const volume = product.volume;\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          brandCounts[brand] = (brandCounts[brand] || 0) + 1;\r\n          if (type) typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\r\n          if (volume) allVolumes.add(volume);\r\n          if (minPrice > 0) {\r\n            if (minPrice <= 100) priceBuckets.add('0-100');\r\n            else if (minPrice <= 200) priceBuckets.add('100-200');\r\n            else if (minPrice <= 300) priceBuckets.add('200-300');\r\n            else if (minPrice <= 400) priceBuckets.add('300-400');\r\n            else if (minPrice <= 500) priceBuckets.add('400-500');\r\n            else if (minPrice <= 600) priceBuckets.add('500-600');\r\n            else if (minPrice <= 700) priceBuckets.add('600-700');\r\n            else if (minPrice <= 800) priceBuckets.add('700-800');\r\n            else if (minPrice <= 900) priceBuckets.add('800-900');\r\n            else if (minPrice <= 1000) priceBuckets.add('900-1000');\r\n            else priceBuckets.add('1000+');\r\n          }\r\n        });\r\n\r\n        const allBrands = [...new Set(productsData.map(p => p.brand_name))].sort(\r\n          (a, b) => (brandCounts[b] || 0) - (brandCounts[a] || 0)\r\n        );\r\n        const allPriceRanges = [\r\n          { label: '0-100', min: 0, max: 100 },\r\n          { label: '100-200', min: 100, max: 200 },\r\n          { label: '200-300', min: 200, max: 300 },\r\n          { label: '300-400', min: 300, max: 400 },\r\n          { label: '400-500', min: 400, max: 500 },\r\n          { label: '500-600', min: 500, max: 600 },\r\n          { label: '600-700', min: 600, max: 700 },\r\n          { label: '700-800', min: 700, max: 800 },\r\n          { label: '800-900', min: 800, max: 900 },\r\n          { label: '900-1000', min: 900, max: 1000 },\r\n          { label: '1000+', min: 1000, max: Infinity },\r\n        ].filter(range => priceBuckets.has(range.label));\r\n        const allVolumesSorted = [...allVolumes].sort((a, b) => {\r\n          const numA = parseFloat(a.replace(/[^0-9.]/g, '')) || 0;\r\n          const numB = parseFloat(b.replace(/[^0-9.]/g, '')) || 0;\r\n          return numA - numB;\r\n        });\r\n        const allTypes = [...new Set(productsData.map(p => p.feature_type).filter(Boolean))].sort(\r\n          (a, b) => (typeCounts[b] || 0) - (typeCounts[a] || 0)\r\n        );\r\n        const allCategories = isSearchPage\r\n          ? [...new Set(productsData.map(p => p.category_name))].sort(\r\n              (a, b) => (categoryCounts[b] || 0) - (categoryCounts[a] || 0)\r\n            )\r\n          : [categoryId].filter(Boolean);\r\n\r\n        setFilters({\r\n          brands: allBrands,\r\n          priceRanges: allPriceRanges,\r\n          volumes: allVolumesSorted,\r\n          types: allTypes,\r\n          categories: allCategories,\r\n        });\r\n\r\n        setAllProducts(productsData);\r\n        setFilteredProducts(productsData); // Спочатку встановлюємо, але useEffect нижче оновить\r\n        setTotalProducts(productsData.length);\r\n        setPreviewProductCount(productsData.length);\r\n        setCurrentPage(1);\r\n        setStartPage(1);\r\n        setLoadMorePages(1);\r\n        setIsPaginated(true);\r\n\r\n        // Скидання фільтрів\r\n        setSelectedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n        setAppliedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n\r\n        setBrandSearch('');\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n\r\n        setDisabledFilters({\r\n          brands: new Set(),\r\n          priceRanges: new Set(),\r\n          volumes: new Set(),\r\n          types: new Set(),\r\n          categories: new Set(),\r\n        });\r\n\r\n        // Автоматично вибираємо чекбокс типу\r\n        if (initialType) {\r\n          setTimeout(() => {\r\n            const typeCheckbox = document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);\r\n            if (typeCheckbox) typeCheckbox.checked = true;\r\n          }, 0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Помилка завантаження продуктів:', error);\r\n        alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');\r\n        setAllProducts([]);\r\n        setFilteredProducts([]);\r\n        setTotalProducts(0);\r\n        setPreviewProductCount(0);\r\n      } finally {\r\n        setIsLoading(false); // Завершуємо завантаження\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [categoryId, searchQuery, initialType, isSearchPage]);\r\n\r\n  // Оновлення previewProductCount та disabledFilters при зміні selectedFilters\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      setPreviewProductCount(calculatePreviewProducts());\r\n      updateDisabledFilters();\r\n    }\r\n  }, [\r\n    selectedFilters,\r\n    customPriceFrom,\r\n    customPriceTo,\r\n    searchQuery,\r\n    categoryId,\r\n    isSearchPage,\r\n    allProducts,\r\n    isLoading,\r\n    calculatePreviewProducts,\r\n    updateDisabledFilters,\r\n  ]);\r\n\r\n  // Клієнтська фільтрація при зміні застосованих фільтрів\r\n  useEffect(() => {\r\n    if (!isLoading && allProducts.length > 0) {\r\n      console.log('Starting client-side filtering:', {\r\n        allProductsCount: allProducts.length,\r\n        searchQuery,\r\n        categoryId,\r\n        isSearchPage,\r\n        appliedFilters,\r\n        customPriceFrom,\r\n        customPriceTo,\r\n      });\r\n\r\n      let filtered = [...allProducts];\r\n\r\n      // Фільтр за пошуковим запитом\r\n      if (searchQuery) {\r\n        console.log('Applying searchQuery filter:', { searchQuery });\r\n        filtered = filtered.filter(product => {\r\n          const matches = product.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (does not match \"${searchQuery}\")`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After searchQuery filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за категорією\r\n      if (categoryId && !isSearchPage) {\r\n        console.log('Applying categoryId filter:', { categoryId });\r\n        filtered = filtered.filter(product => {\r\n          const matches = product.category_id === categoryId;\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (category_id ${product.category_id} does not match \"${categoryId}\")`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After categoryId filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      } else if (appliedFilters.categories.length > 0 && isSearchPage) {\r\n        console.log('Applying categories filter:', { categories: appliedFilters.categories });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.categories.includes(product.category_name);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (category_name ${product.category_name} not in ${appliedFilters.categories})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After categories filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за брендами\r\n      if (appliedFilters.brands.length > 0) {\r\n        console.log('Applying brands filter:', { brands: appliedFilters.brands });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.brands.includes(product.brand_name);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (brand ${product.brand_name} not in ${appliedFilters.brands})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After brands filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за ціною\r\n      if (customPriceFrom !== '' && customPriceTo !== '') {\r\n        const priceFrom = parseFloat(customPriceFrom);\r\n        const priceTo = parseFloat(customPriceTo);\r\n        console.log('Applying custom price filter:', { priceFrom, priceTo });\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          const matches = minPrice >= priceFrom && minPrice <= priceTo;\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in range ${priceFrom}-${priceTo})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After custom price filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      } else if (appliedFilters.priceRanges.length > 0) {\r\n        console.log('Applying priceRanges filter:', { priceRanges: appliedFilters.priceRanges });\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          const matches = appliedFilters.priceRanges.some(range => {\r\n            const [min, max] = range.includes('+')\r\n              ? [1000, Infinity]\r\n              : range.split('-').map(Number);\r\n            return minPrice >= min && (max === Infinity || minPrice <= max);\r\n          });\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in ranges ${appliedFilters.priceRanges})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After priceRanges filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за об’ємами\r\n      if (appliedFilters.volumes.length > 0) {\r\n        console.log('Applying volumes filter:', { volumes: appliedFilters.volumes });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.volumes.includes(product.volume);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (volume ${product.volume} not in ${appliedFilters.volumes})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After volumes filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за типами\r\n      if (appliedFilters.types.length > 0) {\r\n        console.log('Applying types filter:', { types: appliedFilters.types });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.types.includes(product.feature_type);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (type ${product.feature_type} not in ${appliedFilters.types})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After types filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Логування фінального результату\r\n      console.log('Final filtered products:', {\r\n        count: filtered.length,\r\n        products: filtered.map(p => ({\r\n          id: p.id,\r\n          name: p.name,\r\n          category_id: p.category_id,\r\n          category_name: p.category_name,\r\n        })),\r\n      });\r\n\r\n      setFilteredProducts(filtered);\r\n      setTotalProducts(filtered.length);\r\n    }\r\n  }, [allProducts, appliedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, isLoading]);\r\n\r\n  // Обробка вибору фільтру\r\n  const handleFilterChange = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const currentValues = prev[filterType] || [];\r\n      let updatedValues;\r\n      if (currentValues.includes(value)) {\r\n        updatedValues = currentValues.filter((v) => v !== value);\r\n      } else {\r\n        updatedValues = [...currentValues, value];\r\n      }\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      if (filterType === 'priceRanges') {\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n      }\r\n      return updatedFilters;\r\n    });\r\n    setActiveFilter({ type: filterType, value });\r\n  };\r\n\r\n  // Видалення одного фільтру\r\n  const removeFilter = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const updatedValues = (prev[filterType] || []).filter((v) => v !== value);\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      setAppliedFilters({\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      });\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  // Скидання всіх фільтрів\r\n  const resetAllFilters = () => {\r\n    const emptyFilters = {\r\n      brands: [],\r\n      priceRanges: [],\r\n      volumes: [],\r\n      types: [],\r\n      categories: [],\r\n    };\r\n    setSelectedFilters(emptyFilters);\r\n    setAppliedFilters(emptyFilters);\r\n    setBrandSearch('');\r\n    setCustomPriceFrom('');\r\n    setCustomPriceTo('');\r\n    setDisabledFilters({\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n  };\r\n\r\n  // Застосування фільтрів\r\n  const applyFilters = () => {\r\n    setAppliedFilters({ ...selectedFilters });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setActiveFilter(null);\r\n  };\r\n\r\n  // Перемикання \"Більше\"/\"Менше\"\r\n  const toggleShowMore = (filterType) => {\r\n    setShowMore((prev) => ({\r\n      ...prev,\r\n      [filterType]: !prev[filterType],\r\n    }));\r\n  };\r\n\r\n  // Обробка пошуку брендів\r\n  const handleBrandSearch = (e) => {\r\n    setBrandSearch(e.target.value);\r\n  };\r\n\r\n  // Обробка кастомного діапазону цін\r\n  const handleCustomPriceChange = (field, value) => {\r\n    const numValue = value.replace(/[^0-9]/g, '');\r\n    if (field === 'from') {\r\n      setCustomPriceFrom(numValue);\r\n    } else {\r\n      setCustomPriceTo(numValue);\r\n    }\r\n    if (numValue !== '') {\r\n      setSelectedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n      setAppliedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Обмеження кількості елементів для фільтрів\r\n  const getVisibleItems = useCallback((items, filterType) => {\r\n    if (!items) return [];\r\n\r\n    let filteredItems = items;\r\n\r\n    if (filterType === 'brands') {\r\n      filteredItems = items.filter((brand) =>\r\n        brand.toLowerCase().includes(brandSearch.toLowerCase())\r\n      );\r\n      const topItems = filteredItems.slice(0, 12); // Top 12 brands (by count)\r\n      const remainingItems = filteredItems.slice(12); // Remaining brands\r\n      if (showMore.brands || filteredItems.length <= 12) {\r\n        // Keep top 12 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'types') {\r\n      const topItems = filteredItems.slice(0, 6); // Top 6 types (by count)\r\n      const remainingItems = filteredItems.slice(6); // Remaining types\r\n      if (showMore.types || filteredItems.length <= 6) {\r\n        // Keep top 6 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'categories') {\r\n      if (showMore.categories || items.length <= 6) {\r\n        return [...items].sort((a, b) => a.localeCompare(b));\r\n      }\r\n      return items.slice(0, 6);\r\n    }\r\n\r\n    if (showMore[filterType] || items.length <= 12) {\r\n      return items;\r\n    }\r\n    return items.slice(0, 12);\r\n  }, [brandSearch, showMore]);\r\n\r\n  // Модифікація назви продукту\r\n  const getProductName = (product) => {\r\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\r\n  };\r\n\r\n  // Пагінація\r\n  const totalPages = Math.ceil(totalProducts / productsPerPage);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    setStartPage(page);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    setCurrentPage((prev) => prev + 1);\r\n    setLoadMorePages((prev) => prev + 1);\r\n    setIsPaginated(false);\r\n  };\r\n\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  const totalAppliedFilters =\r\n    (appliedFilters.brands?.length || 0) +\r\n    (appliedFilters.priceRanges?.length || 0) +\r\n    (appliedFilters.volumes?.length || 0) +\r\n    (appliedFilters.types?.length || 0) +\r\n    (isSearchPage ? (appliedFilters.categories?.length || 0) : 0) +\r\n    (customPriceFrom !== '' && customPriceTo !== '' ? 1 : 0);\r\n\r\n  // Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\r\n  useEffect(() => {\r\n    Object.keys(showMore).forEach((filterType) => {\r\n      const container = filterItemsRefs.current[filterType];\r\n      if (container) {\r\n        const items = container.querySelector('.filter-items');\r\n        if (items) {\r\n          const visibleItems = getVisibleItems(filters[filterType], filterType);\r\n          const maxVisible = filterType === 'brands' || filterType === 'priceRanges' || filterType === 'volumes' ? 12 : 6;\r\n          const isExpanded = showMore[filterType] || visibleItems.length <= maxVisible;\r\n          // Обчислюємо висоту для згорнутого стану\r\n          const collapsedHeight = visibleItems.length > maxVisible\r\n            ? items.scrollHeight * (maxVisible / filters[filterType].length)\r\n            : items.scrollHeight;\r\n          // Встановлюємо max-height\r\n          container.style.maxHeight = isExpanded\r\n            ? `${items.scrollHeight}px`\r\n            : `${collapsedHeight}px`;\r\n        }\r\n      }\r\n    });\r\n  }, [showMore, filters, brandSearch, getVisibleItems]);\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2>Товари категорії</h2>\r\n      {isLoading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Завантаження...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"product-list-container\">\r\n        {/* Filters column */}\r\n        <div className={`filters ${!isLoading ? 'loaded' : ''}`}>\r\n          <div className=\"filters-header\">\r\n            <h3>Фільтри</h3>\r\n            {totalAppliedFilters > 0 && (\r\n              <div className=\"selected-filters\">\r\n                {isSearchPage &&\r\n                  appliedFilters.categories?.map((category) => (\r\n                    <div key={`category-${category}`} className=\"selected-filter-tag\">\r\n                      <span>{categoryNames[category] || category}</span>\r\n                      <button onClick={() => removeFilter('categories', category)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                {appliedFilters.brands?.map((brand) => (\r\n                  <div key={`brand-${brand}`} className=\"selected-filter-tag\">\r\n                    <span>{brand}</span>\r\n                    <button onClick={() => removeFilter('brands', brand)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {customPriceFrom !== '' && customPriceTo !== '' ? (\r\n                  <div key=\"custom-price\" className=\"selected-filter-tag\">\r\n                    <span>\r\n                      {customPriceFrom}-{customPriceTo} грн\r\n                    </span>\r\n                    <button\r\n                      onClick={() => {\r\n                        setCustomPriceFrom('');\r\n                        setCustomPriceTo('');\r\n                        applyFilters();\r\n                      }}\r\n                    >\r\n                      ×\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  appliedFilters.priceRanges?.map((range) => (\r\n                    <div key={`price-${range}`} className=\"selected-filter-tag\">\r\n                      <span>{range}</span>\r\n                      <button onClick={() => removeFilter('priceRanges', range)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                {appliedFilters.volumes?.map((volume) => (\r\n                  <div key={`volume-${volume}`} className=\"selected-filter-tag\">\r\n                    <span>{volume}</span>\r\n                    <button onClick={() => removeFilter('volumes', volume)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {appliedFilters.types?.map((type) => (\r\n                  <div key={`type-${type}`} className=\"selected-filter-tag\">\r\n                    <span>{type}</span>\r\n                    <button onClick={() => removeFilter('types', type)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {totalAppliedFilters > 1 && (\r\n                  <button className=\"reset-all-filters\" onClick={resetAllFilters}>\r\n                    Скинути всі\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Category filter (only on /search) */}\r\n          {isSearchPage && searchQuery && (\r\n            <div className=\"filter-section\">\r\n              <h4>Категорія</h4>\r\n              <div\r\n                className=\"filter-items-container\"\r\n                ref={(el) => (filterItemsRefs.current['categories'] = el)}\r\n              >\r\n                <div className=\"filter-items filter-items-single-column\">\r\n                  {getVisibleItems(filters.categories, 'categories').map(\r\n                    (category, index) => {\r\n                      const isDisabled = disabledFilters.categories.has(category);\r\n                      return (\r\n                        <label\r\n                          key={index}\r\n                          className={isDisabled ? 'disabled' : ''}\r\n                          ref={(el) => (filterRefs.current[`categories-${category}`] = el)}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            name=\"category\"\r\n                            value={category}\r\n                            checked={\r\n                              selectedFilters.categories?.includes(category) || false\r\n                            }\r\n                            onChange={() => handleFilterChange('categories', category)}\r\n                            disabled={isDisabled}\r\n                          />\r\n                          {categoryNames[category] || category}\r\n                        </label>\r\n                      );\r\n                    }\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {filters.categories.length > 6 && (\r\n                <button\r\n                  className=\"show-more-btn\"\r\n                  onClick={() => toggleShowMore('categories')}\r\n                >\r\n                  {showMore.categories ? 'Менше ↑' : 'Більше ↓'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Brand filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Бренд</h4>\r\n            <input\r\n              type=\"text\"\r\n              className=\"brand-search-input\"\r\n              placeholder=\"Пошук бренду...\"\r\n              value={brandSearch}\r\n              onChange={handleBrandSearch}\r\n            />\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['brands'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.brands, 'brands').map((brand, index) => {\r\n                  const isDisabled = disabledFilters.brands.has(brand);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={`${brand.length > 13 ? 'span-two-columns' : ''} ${\r\n                        isDisabled ? 'disabled' : ''\r\n                      }`}\r\n                      ref={(el) => (filterRefs.current[`brands-${brand}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"brand\"\r\n                        value={brand}\r\n                        checked={selectedFilters.brands?.includes(brand) || false}\r\n                        onChange={() => handleFilterChange('brands', brand)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {brand}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.brands.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('brands')}\r\n              >\r\n                {showMore.brands ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Price filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Ціна (грн)</h4>\r\n            <div className=\"custom-price-inputs\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Від\"\r\n                value={customPriceFrom}\r\n                onChange={(e) => handleCustomPriceChange('from', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"До\"\r\n                value={customPriceTo}\r\n                onChange={(e) => handleCustomPriceChange('to', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n            </div>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['priceRanges'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.priceRanges, 'priceRanges').map(\r\n                  (range, index) => {\r\n                    const isDisabled = disabledFilters.priceRanges.has(range.label);\r\n                    return (\r\n                      <label\r\n                        key={index}\r\n                        className={isDisabled ? 'disabled' : ''}\r\n                        ref={(el) =>\r\n                          (filterRefs.current[`priceRanges-${range.label}`] = el)\r\n                        }\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"priceRange\"\r\n                          value={range.label}\r\n                          checked={\r\n                            selectedFilters.priceRanges?.includes(range.label) || false\r\n                          }\r\n                          onChange={() =>\r\n                            handleFilterChange('priceRanges', range.label)\r\n                          }\r\n                          disabled={isDisabled}\r\n                        />\r\n                        {range.label}\r\n                      </label>\r\n                    );\r\n                  }\r\n                )}\r\n              </div>\r\n            </div>\r\n            {filters.priceRanges.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('priceRanges')}\r\n              >\r\n                {showMore.priceRanges ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Volume filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Об’єм</h4>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['volumes'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.volumes, 'volumes').map((volume, index) => {\r\n                  const isDisabled = disabledFilters.volumes.has(volume);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`volumes-${volume}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"volume\"\r\n                        value={volume}\r\n                        checked={selectedFilters.volumes?.includes(volume) || false}\r\n                        onChange={() => handleFilterChange('volumes', volume)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {volume}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.volumes.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('volumes')}\r\n              >\r\n                {showMore.volumes ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Type filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Тип</h4>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['types'] = el)}\r\n            >\r\n              <div className=\"filter-items filter-items-single-column\">\r\n                {getVisibleItems(filters.types, 'types').map((type, index) => {\r\n                  const isDisabled = disabledFilters.types.has(type);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`types-${type}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"type\"\r\n                        value={type}\r\n                        checked={selectedFilters.types?.includes(type) || false}\r\n                        onChange={() => handleFilterChange('types', type)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {type}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.types.length > 6 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('types')}\r\n              >\r\n                {showMore.types ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Плашка \"Показати товари\" */}\r\n          {activeFilter && (\r\n            <button\r\n              className=\"filter-tag\"\r\n              ref={tagRef}\r\n              onClick={applyFilters}\r\n              style={{\r\n                top: filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                  ? `${\r\n                      filterRefs.current[\r\n                        `${activeFilter.type}-${activeFilter.value}`\r\n                      ].getBoundingClientRect().top -\r\n                      filterRefs.current[\r\n                        `${activeFilter.type}-${activeFilter.value}`\r\n                      ].closest('.filters').getBoundingClientRect().top +\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                        .offsetHeight / 2\r\n                    }px`\r\n                  : '0px',\r\n              }}\r\n            >\r\n              Показати товари ({previewProductCount})\r\n            </button>\r\n          )}\r\n\r\n          {/* Кнопка \"Показати товари\" */}\r\n          <button className=\"apply-filters-btn\" onClick={applyFilters}>\r\n            Показати товари ({previewProductCount})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Products column */}\r\n        <div className=\"products\">\r\n          <div className={`products-list ${!isLoading ? 'loaded' : ''}`}>\r\n            {filteredProducts.length > 0 ? (\r\n              filteredProducts\r\n                .slice(\r\n                  isPaginated\r\n                    ? (currentPage - 1) * productsPerPage\r\n                    : (startPage - 1) * productsPerPage,\r\n                  isPaginated\r\n                    ? currentPage * productsPerPage\r\n                    : startPage * productsPerPage + loadMorePages * productsPerPage\r\n                )\r\n                .map((product, index) => (\r\n                  <div key={`${product.id}-${index}`} className=\"product-card-container\">\r\n                    <Link\r\n                      to={`/product/${product.id}`}\r\n                      className=\"product-card\"\r\n                    >\r\n                      <h3>{getProductName(product)}</h3>\r\n                      <img\r\n                        src={\r\n                          product.images && product.images.length > 0\r\n                            ? product.images[0]\r\n                            : '/img/placeholder.webp'\r\n                        }\r\n                        alt={product.name}\r\n                        onError={(e) => (e.target.src = '/img/placeholder.webp')}\r\n                      />\r\n                      <p className=\"price\">{getMinPrice(product.store_prices)} грн</p>\r\n                      <p>{product.description || 'Опис відсутній'}</p>\r\n                    </Link>\r\n                    <div\r\n                      className={`heart-icon ${savedProducts.has(product.id) ? 'saved' : ''}`}\r\n                      onClick={(e) => handleHeartClick(product.id, e)}\r\n                    >\r\n                      <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        width=\"24\"\r\n                        height=\"24\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill={savedProducts.has(product.id) ? '#d32f2f' : 'none'}\r\n                        stroke=\"#d32f2f\"\r\n                        strokeWidth=\"2\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      >\r\n                        <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"></path>\r\n                      </svg>\r\n                    </div>\r\n                    {showLoginPrompt[product.id] && (\r\n                      <div className=\"login-prompt\">\r\n                        Увійдіть в <Link to=\"/login\" className=\"login-link\">аккаунт</Link> щоб додати до бажаного\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n            ) : (\r\n              !isLoading && <p>Товари не знайдено</p>\r\n            )}\r\n          </div>\r\n          {/* Пагінація та кнопка \"Завантажити ще\" */}\r\n          {!isLoading && totalProducts > productsPerPage && (\r\n            <div className=\"pagination-container\">\r\n              {((startPage - 1 + loadMorePages) * productsPerPage) < totalProducts && (\r\n                <button className=\"load-more-btn\" onClick={handleLoadMore}>\r\n                  Завантажити ще\r\n                </button>\r\n              )}\r\n              <div className=\"pagination\">\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  Попередня\r\n                </button>\r\n                {pageNumbers.map((number) => (\r\n                  <button\r\n                    key={number}\r\n                    className={`pagination-btn ${\r\n                      currentPage === number ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handlePageChange(number)}\r\n                  >\r\n                    {number}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                >\r\n                  Наступна\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}