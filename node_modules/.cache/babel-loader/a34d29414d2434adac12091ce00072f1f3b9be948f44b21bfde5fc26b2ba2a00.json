{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Account.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Account(){const[user,setUser]=useState(null);const[email,setEmail]=useState('');const[gender,setGender]=useState('');const[birthDate,setBirthDate]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const[animate,setAnimate]=useState(false);const[fieldAnimations,setFieldAnimations]=useState({email:false,gender:false,birthDate:false});const navigate=useNavigate();useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){const parsedUser=JSON.parse(storedUser);setUser(parsedUser);setEmail(parsedUser.email||'');setGender(parsedUser.gender||'');setBirthDate(parsedUser.birth_date?parsedUser.birth_date.split('T')[0]:'');// Start animations\nsetAnimate(true);setTimeout(()=>setFieldAnimations({email:true,gender:true,birthDate:true}),100);}else{navigate('/login');}},[navigate]);const handleUpdate=async()=>{try{const token=localStorage.getItem('token');const response=await axios.post('https://price-ua-react-backend.onrender.com/update-user',{email,gender,birth_date:birthDate},{headers:{Authorization:`Bearer ${token}`}});localStorage.setItem('user',JSON.stringify(response.data.user));setUser(response.data.user);setSuccess('Дані успішно оновлено');setError('');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Помилка сервера');setSuccess('');}};if(!user)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"account-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:`account-container ${animate?'animate':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"account-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"account-avatar\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"100\",height:\"100\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#555\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"7\",r:\"4\"})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"account-nickname\",children:user.nickname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"account-details\",children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:success}),/*#__PURE__*/_jsx(\"label\",{className:\"account-label\",children:\"\\u041F\\u043E\\u0448\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:`account-input ${fieldAnimations.email?'field-animate':''}`,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u043F\\u043E\\u0448\\u0442\\u0443\"}),/*#__PURE__*/_jsx(\"label\",{className:\"account-label\",children:\"\\u0413\\u0435\\u043D\\u0434\\u0435\\u0440\"}),/*#__PURE__*/_jsxs(\"select\",{value:gender,onChange:e=>setGender(e.target.value),className:`account-input ${fieldAnimations.gender?'field-animate':''}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u041E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0433\\u0435\\u043D\\u0434\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"\\u0427\\u043E\\u043B\\u043E\\u0432\\u0456\\u043A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"\\u0416\\u0456\\u043D\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"\\u0406\\u043D\\u0448\\u0435\"})]}),/*#__PURE__*/_jsx(\"label\",{className:\"account-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0440\\u043E\\u0434\\u0436\\u0435\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:birthDate,onChange:e=>setBirthDate(e.target.value),className:`account-input ${fieldAnimations.birthDate?'field-animate':''}`}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,className:\"account-button\",children:\"\\u041E\\u043D\\u043E\\u0432\\u0438\\u0442\\u0438 \\u0434\\u0430\\u043D\\u0456\"})]})]})});}export default Account;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Account","user","setUser","email","setEmail","gender","setGender","birthDate","setBirthDate","error","setError","success","setSuccess","animate","setAnimate","fieldAnimations","setFieldAnimations","navigate","storedUser","localStorage","getItem","parsedUser","JSON","parse","birth_date","split","setTimeout","handleUpdate","token","response","post","headers","Authorization","setItem","stringify","data","err","_err$response","_err$response$data","className","children","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","cx","cy","r","nickname","type","value","onChange","e","target","placeholder","onClick"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Account.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Account.css';\r\n\r\nfunction Account() {\r\n  const [user, setUser] = useState(null);\r\n  const [email, setEmail] = useState('');\r\n  const [gender, setGender] = useState('');\r\n  const [birthDate, setBirthDate] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [animate, setAnimate] = useState(false);\r\n  const [fieldAnimations, setFieldAnimations] = useState({\r\n    email: false,\r\n    gender: false,\r\n    birthDate: false,\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      const parsedUser = JSON.parse(storedUser);\r\n      setUser(parsedUser);\r\n      setEmail(parsedUser.email || '');\r\n      setGender(parsedUser.gender || '');\r\n      setBirthDate(parsedUser.birth_date ? parsedUser.birth_date.split('T')[0] : '');\r\n      // Start animations\r\n      setAnimate(true);\r\n      setTimeout(() => setFieldAnimations({ email: true, gender: true, birthDate: true }), 100);\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleUpdate = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post(\r\n        'https://price-ua-react-backend.onrender.com/update-user',\r\n        {\r\n          email,\r\n          gender,\r\n          birth_date: birthDate,\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      localStorage.setItem('user', JSON.stringify(response.data.user));\r\n      setUser(response.data.user);\r\n      setSuccess('Дані успішно оновлено');\r\n      setError('');\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Помилка сервера');\r\n      setSuccess('');\r\n    }\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"account-page\">\r\n      <div className={`account-container ${animate ? 'animate' : ''}`}>\r\n        <div className=\"account-header\">\r\n          <div className=\"account-avatar\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"100\"\r\n              height=\"100\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"#555\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            >\r\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n              <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"account-nickname\">{user.nickname}</h2>\r\n        </div>\r\n        <div className=\"account-details\">\r\n          {error && <p className=\"error\">{error}</p>}\r\n          {success && <p className=\"success\">{success}</p>}\r\n          <label className=\"account-label\">Пошта</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className={`account-input ${fieldAnimations.email ? 'field-animate' : ''}`}\r\n            placeholder=\"Введіть пошту\"\r\n          />\r\n          <label className=\"account-label\">Гендер</label>\r\n          <select\r\n            value={gender}\r\n            onChange={(e) => setGender(e.target.value)}\r\n            className={`account-input ${fieldAnimations.gender ? 'field-animate' : ''}`}\r\n          >\r\n            <option value=\"\">Оберіть гендер</option>\r\n            <option value=\"male\">Чоловік</option>\r\n            <option value=\"female\">Жінка</option>\r\n            <option value=\"other\">Інше</option>\r\n          </select>\r\n          <label className=\"account-label\">Дата народження</label>\r\n          <input\r\n            type=\"date\"\r\n            value={birthDate}\r\n            onChange={(e) => setBirthDate(e.target.value)}\r\n            className={`account-input ${fieldAnimations.birthDate ? 'field-animate' : ''}`}\r\n          />\r\n          <button onClick={handleUpdate} className=\"account-button\">\r\n            Оновити дані\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Account;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACuB,eAAe,CAAEC,kBAAkB,CAAC,CAAGxB,QAAQ,CAAC,CACrDW,KAAK,CAAE,KAAK,CACZE,MAAM,CAAE,KAAK,CACbE,SAAS,CAAE,KACb,CAAC,CAAC,CACF,KAAM,CAAAU,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAIF,UAAU,CAAE,CACd,KAAM,CAAAG,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CACzChB,OAAO,CAACmB,UAAU,CAAC,CACnBjB,QAAQ,CAACiB,UAAU,CAAClB,KAAK,EAAI,EAAE,CAAC,CAChCG,SAAS,CAACe,UAAU,CAAChB,MAAM,EAAI,EAAE,CAAC,CAClCG,YAAY,CAACa,UAAU,CAACG,UAAU,CAAGH,UAAU,CAACG,UAAU,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAG,EAAE,CAAC,CAC9E;AACAX,UAAU,CAAC,IAAI,CAAC,CAChBY,UAAU,CAAC,IAAMV,kBAAkB,CAAC,CAAEb,KAAK,CAAE,IAAI,CAAEE,MAAM,CAAE,IAAI,CAAEE,SAAS,CAAE,IAAK,CAAC,CAAC,CAAE,GAAG,CAAC,CAC3F,CAAC,IAAM,CACLU,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAU,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAlC,KAAK,CAACmC,IAAI,CAC/B,yDAAyD,CACzD,CACE3B,KAAK,CACLE,MAAM,CACNmB,UAAU,CAAEjB,SACd,CAAC,CACD,CACEwB,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUJ,KAAK,EAAG,CAC9C,CACF,CAAC,CACDT,YAAY,CAACc,OAAO,CAAC,MAAM,CAAEX,IAAI,CAACY,SAAS,CAACL,QAAQ,CAACM,IAAI,CAAClC,IAAI,CAAC,CAAC,CAChEC,OAAO,CAAC2B,QAAQ,CAACM,IAAI,CAAClC,IAAI,CAAC,CAC3BW,UAAU,CAAC,uBAAuB,CAAC,CACnCF,QAAQ,CAAC,EAAE,CAAC,CACd,CAAE,MAAO0B,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ5B,QAAQ,CAAC,EAAA2B,aAAA,CAAAD,GAAG,CAACP,QAAQ,UAAAQ,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcF,IAAI,UAAAG,kBAAA,iBAAlBA,kBAAA,CAAoB7B,KAAK,GAAI,iBAAiB,CAAC,CACxDG,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAC,CAED,GAAI,CAACX,IAAI,CAAE,MAAO,KAAI,CAEtB,mBACEJ,IAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BzC,KAAA,QAAKwC,SAAS,CAAE,qBAAqB1B,OAAO,CAAG,SAAS,CAAG,EAAE,EAAG,CAAA2B,QAAA,eAC9DzC,KAAA,QAAKwC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B3C,IAAA,QAAK0C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BzC,KAAA,QACE0C,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,KAAK,CACXC,MAAM,CAAC,KAAK,CACZC,OAAO,CAAC,WAAW,CACnBC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbC,WAAW,CAAC,GAAG,CACfC,aAAa,CAAC,OAAO,CACrBC,cAAc,CAAC,OAAO,CAAAT,QAAA,eAEtB3C,IAAA,SAAMqD,CAAC,CAAC,2CAA2C,CAAO,CAAC,cAC3DrD,IAAA,WAAQsD,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,CAAC,CAAC,GAAG,CAAS,CAAC,EACnC,CAAC,CACH,CAAC,cACNxD,IAAA,OAAI0C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEvC,IAAI,CAACqD,QAAQ,CAAK,CAAC,EAClD,CAAC,cACNvD,KAAA,QAAKwC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7B/B,KAAK,eAAIZ,IAAA,MAAG0C,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE/B,KAAK,CAAI,CAAC,CACzCE,OAAO,eAAId,IAAA,MAAG0C,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAE7B,OAAO,CAAI,CAAC,cAChDd,IAAA,UAAO0C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gCAAK,CAAO,CAAC,cAC9C3C,IAAA,UACE0D,IAAI,CAAC,OAAO,CACZC,KAAK,CAAErD,KAAM,CACbsD,QAAQ,CAAGC,CAAC,EAAKtD,QAAQ,CAACsD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CjB,SAAS,CAAE,iBAAiBxB,eAAe,CAACZ,KAAK,CAAG,eAAe,CAAG,EAAE,EAAG,CAC3EyD,WAAW,CAAC,2EAAe,CAC5B,CAAC,cACF/D,IAAA,UAAO0C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAAM,CAAO,CAAC,cAC/CzC,KAAA,WACEyD,KAAK,CAAEnD,MAAO,CACdoD,QAAQ,CAAGC,CAAC,EAAKpD,SAAS,CAACoD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC3CjB,SAAS,CAAE,iBAAiBxB,eAAe,CAACV,MAAM,CAAG,eAAe,CAAG,EAAE,EAAG,CAAAmC,QAAA,eAE5E3C,IAAA,WAAQ2D,KAAK,CAAC,EAAE,CAAAhB,QAAA,CAAC,iFAAc,CAAQ,CAAC,cACxC3C,IAAA,WAAQ2D,KAAK,CAAC,MAAM,CAAAhB,QAAA,CAAC,4CAAO,CAAQ,CAAC,cACrC3C,IAAA,WAAQ2D,KAAK,CAAC,QAAQ,CAAAhB,QAAA,CAAC,gCAAK,CAAQ,CAAC,cACrC3C,IAAA,WAAQ2D,KAAK,CAAC,OAAO,CAAAhB,QAAA,CAAC,0BAAI,CAAQ,CAAC,EAC7B,CAAC,cACT3C,IAAA,UAAO0C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,uFAAe,CAAO,CAAC,cACxD3C,IAAA,UACE0D,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjD,SAAU,CACjBkD,QAAQ,CAAGC,CAAC,EAAKlD,YAAY,CAACkD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9CjB,SAAS,CAAE,iBAAiBxB,eAAe,CAACR,SAAS,CAAG,eAAe,CAAG,EAAE,EAAG,CAChF,CAAC,cACFV,IAAA,WAAQgE,OAAO,CAAElC,YAAa,CAACY,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,qEAE1D,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAAxC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}