{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{useParams,useLocation,Link}from'react-router-dom';import axios from'axios';import'./ProductList.css';import{categoryNames}from'./SearchResults';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductList(_ref){var _appliedFilters$brand,_appliedFilters$price,_appliedFilters$volum,_appliedFilters$types,_appliedFilters$categ,_appliedFilters$categ2,_appliedFilters$brand2,_appliedFilters$price2,_appliedFilters$volum2,_appliedFilters$types2;let{searchTerm}=_ref;const{categoryId}=useParams();const location=useLocation();// Отримання параметра 'type' і 'query'\nconst queryParams=new URLSearchParams(location.search);const initialType=queryParams.get('type')||'';const searchQuery=queryParams.get('query')||searchTerm||'';const isSearchPage=location.pathname==='/search';// Стан для всіх фільтрів\nconst[filters,setFilters]=useState({brands:[],priceRanges:[],volumes:[],types:[],categories:[]});// Стан для вибраних фільтрів\nconst[selectedFilters,setSelectedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// Стан для застосованих фільтрів\nconst[appliedFilters,setAppliedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// Стан для всіх продуктів (з API)\nconst[allProducts,setAllProducts]=useState([]);// Стан для відфільтрованих продуктів і пагінації\nconst[filteredProducts,setFilteredProducts]=useState([]);const[totalProducts,setTotalProducts]=useState(0);const[previewProductCount,setPreviewProductCount]=useState(0);const[currentPage,setCurrentPage]=useState(1);const productsPerPage=24;const[isPaginated,setIsPaginated]=useState(true);const[startPage,setStartPage]=useState(1);const[loadMorePages,setLoadMorePages]=useState(1);// Стан для пошуку брендів\nconst[brandSearch,setBrandSearch]=useState('');// Стан для кастомного діапазону цін\nconst[customPriceFrom,setCustomPriceFrom]=useState('');const[customPriceTo,setCustomPriceTo]=useState('');// Стан для активного фільтру\nconst[activeFilter,setActiveFilter]=useState(null);// Стан для неактивних фільтрів\nconst[disabledFilters,setDisabledFilters]=useState({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});// Стан для \"Більше/Менше\"\nconst[showMore,setShowMore]=useState({brands:false,priceRanges:false,volumes:false,types:false,categories:false});// Стан для індикатора завантаження\nconst[isLoading,setIsLoading]=useState(true);// Рефи для позиціонування плашки та анімації фільтрів\nconst filterRefs=useRef({});const tagRef=useRef(null);const filterItemsRefs=useRef({});// Функція для отримання мінімальної ціни з store_prices\nconst getMinPrice=storePrices=>{if(!storePrices||storePrices.length===0)return 0;return Math.min(...storePrices.map(sp=>sp.price));};// Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\nconst calculateFilteredProducts=useCallback(tempFilters=>{let filtered=[...allProducts];// Фільтр за пошуковим запитом\nif(searchQuery){filtered=filtered.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));}// Фільтр за категорією\nif(categoryId&&!isSearchPage){filtered=filtered.filter(product=>product.category_id===categoryId);}else if(tempFilters.categories.length>0&&isSearchPage){filtered=filtered.filter(product=>tempFilters.categories.includes(product.category_name));}// Фільтр за брендами\nif(tempFilters.brands.length>0){filtered=filtered.filter(product=>tempFilters.brands.includes(product.brand_name));}// Фільтр за ціною\nif(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return minPrice>=priceFrom&&minPrice<=priceTo;});}else if(tempFilters.priceRanges.length>0){filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return tempFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});});}// Фільтр за об’ємами\nif(tempFilters.volumes.length>0){filtered=filtered.filter(product=>tempFilters.volumes.includes(product.volume));}// Фільтр за типами\nif(tempFilters.types.length>0){filtered=filtered.filter(product=>tempFilters.types.includes(product.feature_type));}return filtered;},[allProducts,searchQuery,categoryId,isSearchPage,customPriceFrom,customPriceTo]);// Функція для previewProductCount\nconst calculatePreviewProducts=useCallback(()=>{const filtered=calculateFilteredProducts(selectedFilters);return filtered.length;},[calculateFilteredProducts,selectedFilters]);// Функція для оновлення неактивних фільтрів\nconst updateDisabledFilters=useCallback(()=>{const newDisabledFilters={brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()};// Базові фільтри: усі вибрані фільтри, крім поточного типу\nconst baseFilters={brands:[...selectedFilters.brands],priceRanges:[...selectedFilters.priceRanges],volumes:[...selectedFilters.volumes],types:[...selectedFilters.types],categories:[...selectedFilters.categories]};// Перевірка кожного бренду\nfilters.brands.forEach(brand=>{const tempFilters={...baseFilters,brands:[brand],priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:baseFilters.types,categories:baseFilters.categories};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.brands.add(brand);}});// Перевірка кожного цінового діапазону\nfilters.priceRanges.forEach(range=>{const tempFilters={...baseFilters,brands:baseFilters.brands,priceRanges:[range.label],volumes:baseFilters.volumes,types:baseFilters.types,categories:baseFilters.categories};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.priceRanges.add(range.label);}});// Перевірка кожного об’єму\nfilters.volumes.forEach(volume=>{const tempFilters={...baseFilters,brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:[volume],types:baseFilters.types,categories:baseFilters.categories};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.volumes.add(volume);}});// Перевірка кожного типу\nfilters.types.forEach(type=>{const tempFilters={...baseFilters,brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:[type],categories:baseFilters.categories};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.types.add(type);}});// Перевірка кожної категорії (для /search)\nif(isSearchPage){filters.categories.forEach(category=>{const tempFilters={...baseFilters,brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:baseFilters.types,categories:[category]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.categories.add(category);}});}setDisabledFilters(newDisabledFilters);},[filters,selectedFilters,calculateFilteredProducts,isSearchPage]);// Завантаження всіх продуктів із API\nuseEffect(()=>{const fetchProducts=async()=>{setIsLoading(true);// Починаємо завантаження\ntry{// Завантажуємо всі продукти без пагінації\nconst response=await axios.get('https://price-ua-react-backend.onrender.com/products',{params:{limit:1000// Велике значення, щоб отримати всі продукти\n}});let productsData=response.data.products||[];// Фільтруємо продукти за категорією, якщо не на сторінці пошуку\nlet filteredProductsData=productsData;if(categoryId&&!isSearchPage){filteredProductsData=productsData.filter(product=>product.category_id===categoryId);}// Ініціалізація фільтрів на основі відфільтрованих продуктів\nconst brandCounts={};const typeCounts={};const categoryCounts={};const allVolumes=new Set();const priceBuckets=new Set();filteredProductsData.forEach(product=>{const brand=product.brand_name;const type=product.feature_type;const category=product.category_name;const volume=product.volume;const minPrice=getMinPrice(product.store_prices);brandCounts[brand]=(brandCounts[brand]||0)+1;if(type)typeCounts[type]=(typeCounts[type]||0)+1;categoryCounts[category]=(categoryCounts[category]||0)+1;if(volume)allVolumes.add(volume);if(minPrice>0){if(minPrice<=100)priceBuckets.add('0-100');else if(minPrice<=200)priceBuckets.add('100-200');else if(minPrice<=300)priceBuckets.add('200-300');else if(minPrice<=400)priceBuckets.add('300-400');else if(minPrice<=500)priceBuckets.add('400-500');else if(minPrice<=600)priceBuckets.add('500-600');else if(minPrice<=700)priceBuckets.add('600-700');else if(minPrice<=800)priceBuckets.add('700-800');else if(minPrice<=900)priceBuckets.add('800-900');else if(minPrice<=1000)priceBuckets.add('900-1000');else priceBuckets.add('1000+');}});const allBrands=[...new Set(filteredProductsData.map(p=>p.brand_name))].sort((a,b)=>(brandCounts[b]||0)-(brandCounts[a]||0));const allPriceRanges=[{label:'0-100',min:0,max:100},{label:'100-200',min:100,max:200},{label:'200-300',min:200,max:300},{label:'300-400',min:300,max:400},{label:'400-500',min:400,max:500},{label:'500-600',min:500,max:600},{label:'600-700',min:600,max:700},{label:'700-800',min:700,max:800},{label:'800-900',min:800,max:900},{label:'900-1000',min:900,max:1000},{label:'1000+',min:1000,max:Infinity}].filter(range=>priceBuckets.has(range.label));const allVolumesSorted=[...allVolumes].sort((a,b)=>{const numA=parseFloat(a.replace(/[^0-9.]/g,''))||0;const numB=parseFloat(b.replace(/[^0-9.]/g,''))||0;return numA-numB;});const allTypes=[...new Set(filteredProductsData.map(p=>p.feature_type).filter(Boolean))].sort((a,b)=>(typeCounts[b]||0)-(typeCounts[a]||0));const allCategories=isSearchPage?[...new Set(productsData.map(p=>p.category_name))].sort((a,b)=>(categoryCounts[b]||0)-(categoryCounts[a]||0)):[categoryId].filter(Boolean);setFilters({brands:allBrands,priceRanges:allPriceRanges,volumes:allVolumesSorted,types:allTypes,categories:allCategories});setAllProducts(productsData);setFilteredProducts(filteredProductsData);setTotalProducts(filteredProductsData.length);setPreviewProductCount(filteredProductsData.length);setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);// Скидання фільтрів\nsetSelectedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setAppliedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});// Автоматично вибираємо чекбокс типу\nif(initialType){setTimeout(()=>{const typeCheckbox=document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);if(typeCheckbox)typeCheckbox.checked=true;},0);}}catch(error){console.error('Помилка завантаження продуктів:',error);alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');setAllProducts([]);setFilteredProducts([]);setTotalProducts(0);setPreviewProductCount(0);}finally{setIsLoading(false);// Завершуємо завантаження\n}};fetchProducts();},[categoryId,searchQuery,initialType,isSearchPage]);// Оновлення previewProductCount та disabledFilters при зміні selectedFilters\nuseEffect(()=>{if(!isLoading){setPreviewProductCount(calculatePreviewProducts());updateDisabledFilters();}},[selectedFilters,customPriceFrom,customPriceTo,searchQuery,categoryId,isSearchPage,allProducts,isLoading,calculatePreviewProducts,updateDisabledFilters]);// Клієнтська фільтрація при зміні застосованих фільтрів\nuseEffect(()=>{if(!isLoading){let filtered=[...allProducts];// Фільтр за пошуковим запитом\nif(searchQuery){filtered=filtered.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));}// Фільтр за категорією\nif(categoryId&&!isSearchPage){filtered=filtered.filter(product=>product.category_id===categoryId);}else if(appliedFilters.categories.length>0&&isSearchPage){filtered=filtered.filter(product=>appliedFilters.categories.includes(product.category_name));}// Фільтр за брендами\nif(appliedFilters.brands.length>0){filtered=filtered.filter(product=>appliedFilters.brands.includes(product.brand_name));}// Фільтр за ціною\nif(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return minPrice>=priceFrom&&minPrice<=priceTo;});}else if(appliedFilters.priceRanges.length>0){filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return appliedFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});});}// Фільтр за об’ємами\nif(appliedFilters.volumes.length>0){filtered=filtered.filter(product=>appliedFilters.volumes.includes(product.volume));}// Фільтр за типами\nif(appliedFilters.types.length>0){filtered=filtered.filter(product=>appliedFilters.types.includes(product.feature_type));}setFilteredProducts(filtered);setTotalProducts(filtered.length);}},[allProducts,appliedFilters,customPriceFrom,customPriceTo,searchQuery,categoryId,isSearchPage,isLoading]);// Обробка вибору фільтру\nconst handleFilterChange=(filterType,value)=>{setSelectedFilters(prev=>{const currentValues=prev[filterType]||[];let updatedValues;if(currentValues.includes(value)){updatedValues=currentValues.filter(v=>v!==value);}else{updatedValues=[...currentValues,value];}const updatedFilters={...prev,[filterType]:updatedValues};if(filterType==='priceRanges'){setCustomPriceFrom('');setCustomPriceTo('');}return updatedFilters;});setActiveFilter({type:filterType,value});};// Видалення одного фільтру\nconst removeFilter=(filterType,value)=>{setSelectedFilters(prev=>{const updatedValues=(prev[filterType]||[]).filter(v=>v!==value);const updatedFilters={...prev,[filterType]:updatedValues};setAppliedFilters({...prev,[filterType]:updatedValues});return updatedFilters;});};// Скидання всіх фільтрів\nconst resetAllFilters=()=>{const emptyFilters={brands:[],priceRanges:[],volumes:[],types:[],categories:[]};setSelectedFilters(emptyFilters);setAppliedFilters(emptyFilters);setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);};// Застосування фільтрів\nconst applyFilters=()=>{setAppliedFilters({...selectedFilters});setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setActiveFilter(null);};// Перемикання \"Більше\"/\"Менше\"\nconst toggleShowMore=filterType=>{setShowMore(prev=>({...prev,[filterType]:!prev[filterType]}));};// Обробка пошуку брендів\nconst handleBrandSearch=e=>{setBrandSearch(e.target.value);};// Обробка кастомного діапазону цін\nconst handleCustomPriceChange=(field,value)=>{const numValue=value.replace(/[^0-9]/g,'');if(field==='from'){setCustomPriceFrom(numValue);}else{setCustomPriceTo(numValue);}if(numValue!==''){setSelectedFilters(prev=>({...prev,priceRanges:[]}));setAppliedFilters(prev=>({...prev,priceRanges:[]}));}};// Обмеження кількості елементів для фільтрів\nconst getVisibleItems=useCallback((items,filterType)=>{if(!items)return[];let filteredItems=items;if(filterType==='brands'){filteredItems=items.filter(brand=>brand.toLowerCase().includes(brandSearch.toLowerCase()));const topItems=filteredItems.slice(0,12);// Top 12 brands (by count)\nconst remainingItems=filteredItems.slice(12);// Remaining brands\nif(showMore.brands||filteredItems.length<=12){// Keep top 12 in original order, sort remaining alphabetically\nreturn[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='types'){const topItems=filteredItems.slice(0,6);// Top 6 types (by count)\nconst remainingItems=filteredItems.slice(6);// Remaining types\nif(showMore.types||filteredItems.length<=6){// Keep top 6 in original order, sort remaining alphabetically\nreturn[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='categories'){if(showMore.categories||items.length<=6){return[...items].sort((a,b)=>a.localeCompare(b));}return items.slice(0,6);}if(showMore[filterType]||items.length<=12){return items;}return items.slice(0,12);},[brandSearch,showMore]);// Модифікація назви продукту\nconst getProductName=product=>{return`${product.name} (${product.volume||'Об’єм не вказано'})`;};// Пагінація\nconst totalPages=Math.ceil(totalProducts/productsPerPage);const handlePageChange=page=>{setCurrentPage(page);setStartPage(page);setLoadMorePages(1);setIsPaginated(true);window.scrollTo({top:0,behavior:'smooth'});};const handleLoadMore=()=>{setCurrentPage(prev=>prev+1);setLoadMorePages(prev=>prev+1);setIsPaginated(false);};const pageNumbers=[];for(let i=1;i<=totalPages;i++){pageNumbers.push(i);}const totalAppliedFilters=(((_appliedFilters$brand=appliedFilters.brands)===null||_appliedFilters$brand===void 0?void 0:_appliedFilters$brand.length)||0)+(((_appliedFilters$price=appliedFilters.priceRanges)===null||_appliedFilters$price===void 0?void 0:_appliedFilters$price.length)||0)+(((_appliedFilters$volum=appliedFilters.volumes)===null||_appliedFilters$volum===void 0?void 0:_appliedFilters$volum.length)||0)+(((_appliedFilters$types=appliedFilters.types)===null||_appliedFilters$types===void 0?void 0:_appliedFilters$types.length)||0)+(isSearchPage?((_appliedFilters$categ=appliedFilters.categories)===null||_appliedFilters$categ===void 0?void 0:_appliedFilters$categ.length)||0:0)+(customPriceFrom!==''&&customPriceTo!==''?1:0);// Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\nuseEffect(()=>{Object.keys(showMore).forEach(filterType=>{const container=filterItemsRefs.current[filterType];if(container){const items=container.querySelector('.filter-items');if(items){const visibleItems=getVisibleItems(filters[filterType],filterType);const maxVisible=filterType==='brands'||filterType==='priceRanges'||filterType==='volumes'?12:6;const isExpanded=showMore[filterType]||visibleItems.length<=maxVisible;// Обчислюємо висоту для згорнутого стану\nconst collapsedHeight=visibleItems.length>maxVisible?items.scrollHeight*(maxVisible/filters[filterType].length):items.scrollHeight;// Встановлюємо max-height\ncontainer.style.maxHeight=isExpanded?`${items.scrollHeight}px`:`${collapsedHeight}px`;}}});},[showMore,filters,brandSearch,getVisibleItems]);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`filters ${!isLoading?'loaded':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0424\\u0456\\u043B\\u044C\\u0442\\u0440\\u0438\"}),totalAppliedFilters>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filters\",children:[isSearchPage&&((_appliedFilters$categ2=appliedFilters.categories)===null||_appliedFilters$categ2===void 0?void 0:_appliedFilters$categ2.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:categoryNames[category]||category}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('categories',category),children:\"\\xD7\"})]},`category-${category}`))),(_appliedFilters$brand2=appliedFilters.brands)===null||_appliedFilters$brand2===void 0?void 0:_appliedFilters$brand2.map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:brand}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('brands',brand),children:\"\\xD7\"})]},`brand-${brand}`)),customPriceFrom!==''&&customPriceTo!==''?/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[customPriceFrom,\"-\",customPriceTo,\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCustomPriceFrom('');setCustomPriceTo('');applyFilters();},children:\"\\xD7\"})]},\"custom-price\"):(_appliedFilters$price2=appliedFilters.priceRanges)===null||_appliedFilters$price2===void 0?void 0:_appliedFilters$price2.map(range=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:range}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('priceRanges',range),children:\"\\xD7\"})]},`price-${range}`)),(_appliedFilters$volum2=appliedFilters.volumes)===null||_appliedFilters$volum2===void 0?void 0:_appliedFilters$volum2.map(volume=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:volume}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('volumes',volume),children:\"\\xD7\"})]},`volume-${volume}`)),(_appliedFilters$types2=appliedFilters.types)===null||_appliedFilters$types2===void 0?void 0:_appliedFilters$types2.map(type=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:type}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('types',type),children:\"\\xD7\"})]},`type-${type}`)),totalAppliedFilters>1&&/*#__PURE__*/_jsx(\"button\",{className:\"reset-all-filters\",onClick:resetAllFilters,children:\"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0432\\u0441\\u0456\"})]})]}),isSearchPage&&searchQuery&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['categories']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.categories,'categories').map((category,index)=>{var _selectedFilters$cate;const isDisabled=disabledFilters.categories.has(category);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`categories-${category}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"category\",value:category,checked:((_selectedFilters$cate=selectedFilters.categories)===null||_selectedFilters$cate===void 0?void 0:_selectedFilters$cate.includes(category))||false,onChange:()=>handleFilterChange('categories',category),disabled:isDisabled}),categoryNames[category]||category]},index);})})}),filters.categories.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('categories'),children:showMore.categories?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"brand-search-input\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0431\\u0440\\u0435\\u043D\\u0434\\u0443...\",value:brandSearch,onChange:handleBrandSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['brands']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.brands,'brands').map((brand,index)=>{var _selectedFilters$bran;const isDisabled=disabledFilters.brands.has(brand);return/*#__PURE__*/_jsxs(\"label\",{className:`${brand.length>13?'span-two-columns':''} ${isDisabled?'disabled':''}`,ref:el=>filterRefs.current[`brands-${brand}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"brand\",value:brand,checked:((_selectedFilters$bran=selectedFilters.brands)===null||_selectedFilters$bran===void 0?void 0:_selectedFilters$bran.includes(brand))||false,onChange:()=>handleFilterChange('brands',brand),disabled:isDisabled}),brand]},index);})})}),filters.brands.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('brands'),children:showMore.brands?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0426\\u0456\\u043D\\u0430 (\\u0433\\u0440\\u043D)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-price-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0456\\u0434\",value:customPriceFrom,onChange:e=>handleCustomPriceChange('from',e.target.value),className:\"price-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0414\\u043E\",value:customPriceTo,onChange:e=>handleCustomPriceChange('to',e.target.value),className:\"price-input\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['priceRanges']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.priceRanges,'priceRanges').map((range,index)=>{var _selectedFilters$pric;const isDisabled=disabledFilters.priceRanges.has(range.label);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`priceRanges-${range.label}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"priceRange\",value:range.label,checked:((_selectedFilters$pric=selectedFilters.priceRanges)===null||_selectedFilters$pric===void 0?void 0:_selectedFilters$pric.includes(range.label))||false,onChange:()=>handleFilterChange('priceRanges',range.label),disabled:isDisabled}),range.label]},index);})})}),filters.priceRanges.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('priceRanges'),children:showMore.priceRanges?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041E\\u0431\\u2019\\u0454\\u043C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['volumes']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.volumes,'volumes').map((volume,index)=>{var _selectedFilters$volu;const isDisabled=disabledFilters.volumes.has(volume);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`volumes-${volume}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"volume\",value:volume,checked:((_selectedFilters$volu=selectedFilters.volumes)===null||_selectedFilters$volu===void 0?void 0:_selectedFilters$volu.includes(volume))||false,onChange:()=>handleFilterChange('volumes',volume),disabled:isDisabled}),volume]},index);})})}),filters.volumes.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('volumes'),children:showMore.volumes?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['types']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.types,'types').map((type,index)=>{var _selectedFilters$type;const isDisabled=disabledFilters.types.has(type);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`types-${type}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"type\",value:type,checked:((_selectedFilters$type=selectedFilters.types)===null||_selectedFilters$type===void 0?void 0:_selectedFilters$type.includes(type))||false,onChange:()=>handleFilterChange('types',type),disabled:isDisabled}),type]},index);})})}),filters.types.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('types'),children:showMore.types?'Менше ↑':'Більше ↓'})]}),activeFilter&&/*#__PURE__*/_jsxs(\"button\",{className:\"filter-tag\",ref:tagRef,onClick:applyFilters,style:{top:filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]?`${filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].getBoundingClientRect().top-filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].closest('.filters').getBoundingClientRect().top+filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].offsetHeight/2}px`:'0px'},children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"apply-filters-btn\",onClick:applyFilters,children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products\",children:[/*#__PURE__*/_jsx(\"div\",{className:`products-list ${!isLoading?'loaded':''}`,children:filteredProducts.length>0?filteredProducts.slice(isPaginated?(currentPage-1)*productsPerPage:(startPage-1)*productsPerPage,isPaginated?currentPage*productsPerPage:startPage*productsPerPage+loadMorePages*productsPerPage).map((product,index)=>/*#__PURE__*/_jsxs(Link,{to:`/product/${product.id}`,className:\"product-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:getProductName(product)}),/*#__PURE__*/_jsx(\"img\",{src:product.images&&product.images.length>0?product.images[0]:'/img/placeholder.webp',alt:product.name,onError:e=>e.target.src='/img/placeholder.webp'}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[getMinPrice(product.store_prices),\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"p\",{children:product.description||'Опис відсутній'})]},`${product.id}-${index}`)):!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})}),!isLoading&&totalProducts>productsPerPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-container\",children:[(startPage-1+loadMorePages)*productsPerPage<totalProducts&&/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:handleLoadMore,children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438 \\u0449\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:\"\\u041F\\u043E\\u043F\\u0435\\u0440\\u0435\\u0434\\u043D\\u044F\"}),pageNumbers.map(number=>/*#__PURE__*/_jsx(\"button\",{className:`pagination-btn ${currentPage===number?'active':''}`,onClick:()=>handlePageChange(number),children:number},number)),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:\"\\u041D\\u0430\\u0441\\u0442\\u0443\\u043F\\u043D\\u0430\"})]})]})]})]})]});}export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useLocation","Link","axios","categoryNames","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","_appliedFilters$brand","_appliedFilters$price","_appliedFilters$volum","_appliedFilters$types","_appliedFilters$categ","_appliedFilters$categ2","_appliedFilters$brand2","_appliedFilters$price2","_appliedFilters$volum2","_appliedFilters$types2","searchTerm","categoryId","location","queryParams","URLSearchParams","search","initialType","get","searchQuery","isSearchPage","pathname","filters","setFilters","brands","priceRanges","volumes","types","categories","selectedFilters","setSelectedFilters","appliedFilters","setAppliedFilters","allProducts","setAllProducts","filteredProducts","setFilteredProducts","totalProducts","setTotalProducts","previewProductCount","setPreviewProductCount","currentPage","setCurrentPage","productsPerPage","isPaginated","setIsPaginated","startPage","setStartPage","loadMorePages","setLoadMorePages","brandSearch","setBrandSearch","customPriceFrom","setCustomPriceFrom","customPriceTo","setCustomPriceTo","activeFilter","setActiveFilter","disabledFilters","setDisabledFilters","Set","showMore","setShowMore","isLoading","setIsLoading","filterRefs","tagRef","filterItemsRefs","getMinPrice","storePrices","length","Math","min","map","sp","price","calculateFilteredProducts","tempFilters","filtered","filter","product","name","toLowerCase","includes","category_id","category_name","brand_name","priceFrom","parseFloat","priceTo","minPrice","store_prices","some","range","max","Infinity","split","Number","volume","feature_type","calculatePreviewProducts","updateDisabledFilters","newDisabledFilters","baseFilters","forEach","brand","add","label","type","category","fetchProducts","response","params","limit","productsData","data","products","filteredProductsData","brandCounts","typeCounts","categoryCounts","allVolumes","priceBuckets","allBrands","p","sort","a","b","allPriceRanges","has","allVolumesSorted","numA","replace","numB","allTypes","Boolean","allCategories","setTimeout","typeCheckbox","document","querySelector","checked","error","console","alert","handleFilterChange","filterType","value","prev","currentValues","updatedValues","v","updatedFilters","removeFilter","resetAllFilters","emptyFilters","applyFilters","toggleShowMore","handleBrandSearch","e","target","handleCustomPriceChange","field","numValue","getVisibleItems","items","filteredItems","topItems","slice","remainingItems","localeCompare","getProductName","totalPages","ceil","handlePageChange","page","window","scrollTo","top","behavior","handleLoadMore","pageNumbers","i","push","totalAppliedFilters","Object","keys","container","current","visibleItems","maxVisible","isExpanded","collapsedHeight","scrollHeight","style","maxHeight","className","children","onClick","ref","el","index","_selectedFilters$cate","isDisabled","onChange","disabled","placeholder","_selectedFilters$bran","_selectedFilters$pric","_selectedFilters$volu","_selectedFilters$type","getBoundingClientRect","closest","offsetHeight","to","id","src","images","alt","onError","description","number"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useLocation, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './ProductList.css';\r\nimport { categoryNames } from './SearchResults';\r\n\r\nfunction ProductList({ searchTerm }) {\r\n  const { categoryId } = useParams();\r\n  const location = useLocation();\r\n\r\n  // Отримання параметра 'type' і 'query'\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const initialType = queryParams.get('type') || '';\r\n  const searchQuery = queryParams.get('query') || searchTerm || '';\r\n  const isSearchPage = location.pathname === '/search';\r\n\r\n  // Стан для всіх фільтрів\r\n  const [filters, setFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: [],\r\n    categories: [],\r\n  });\r\n\r\n  // Стан для вибраних фільтрів\r\n  const [selectedFilters, setSelectedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для застосованих фільтрів\r\n  const [appliedFilters, setAppliedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для всіх продуктів (з API)\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  // Стан для відфільтрованих продуктів і пагінації\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [totalProducts, setTotalProducts] = useState(0);\r\n  const [previewProductCount, setPreviewProductCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const productsPerPage = 24;\r\n  const [isPaginated, setIsPaginated] = useState(true);\r\n  const [startPage, setStartPage] = useState(1);\r\n  const [loadMorePages, setLoadMorePages] = useState(1);\r\n\r\n  // Стан для пошуку брендів\r\n  const [brandSearch, setBrandSearch] = useState('');\r\n\r\n  // Стан для кастомного діапазону цін\r\n  const [customPriceFrom, setCustomPriceFrom] = useState('');\r\n  const [customPriceTo, setCustomPriceTo] = useState('');\r\n\r\n  // Стан для активного фільтру\r\n  const [activeFilter, setActiveFilter] = useState(null);\r\n\r\n  // Стан для неактивних фільтрів\r\n  const [disabledFilters, setDisabledFilters] = useState({\r\n    brands: new Set(),\r\n    priceRanges: new Set(),\r\n    volumes: new Set(),\r\n    types: new Set(),\r\n    categories: new Set(),\r\n  });\r\n\r\n  // Стан для \"Більше/Менше\"\r\n  const [showMore, setShowMore] = useState({\r\n    brands: false,\r\n    priceRanges: false,\r\n    volumes: false,\r\n    types: false,\r\n    categories: false,\r\n  });\r\n\r\n  // Стан для індикатора завантаження\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Рефи для позиціонування плашки та анімації фільтрів\r\n  const filterRefs = useRef({});\r\n  const tagRef = useRef(null);\r\n  const filterItemsRefs = useRef({});\r\n\r\n  // Функція для отримання мінімальної ціни з store_prices\r\n  const getMinPrice = (storePrices) => {\r\n    if (!storePrices || storePrices.length === 0) return 0;\r\n    return Math.min(...storePrices.map(sp => sp.price));\r\n  };\r\n\r\n  // Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\r\n  const calculateFilteredProducts = useCallback((tempFilters) => {\r\n    let filtered = [...allProducts];\r\n\r\n    // Фільтр за пошуковим запитом\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(product =>\r\n        product.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Фільтр за категорією\r\n    if (categoryId && !isSearchPage) {\r\n      filtered = filtered.filter(product => product.category_id === categoryId);\r\n    } else if (tempFilters.categories.length > 0 && isSearchPage) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.categories.includes(product.category_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за брендами\r\n    if (tempFilters.brands.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.brands.includes(product.brand_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за ціною\r\n    if (customPriceFrom !== '' && customPriceTo !== '') {\r\n      const priceFrom = parseFloat(customPriceFrom);\r\n      const priceTo = parseFloat(customPriceTo);\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return minPrice >= priceFrom && minPrice <= priceTo;\r\n      });\r\n    } else if (tempFilters.priceRanges.length > 0) {\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return tempFilters.priceRanges.some(range => {\r\n          const [min, max] = range.includes('+')\r\n            ? [1000, Infinity]\r\n            : range.split('-').map(Number);\r\n          return minPrice >= min && (max === Infinity || minPrice <= max);\r\n        });\r\n      });\r\n    }\r\n\r\n    // Фільтр за об’ємами\r\n    if (tempFilters.volumes.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.volumes.includes(product.volume)\r\n      );\r\n    }\r\n\r\n    // Фільтр за типами\r\n    if (tempFilters.types.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.types.includes(product.feature_type)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [allProducts, searchQuery, categoryId, isSearchPage, customPriceFrom, customPriceTo]);\r\n\r\n  // Функція для previewProductCount\r\n  const calculatePreviewProducts = useCallback(() => {\r\n    const filtered = calculateFilteredProducts(selectedFilters);\r\n    return filtered.length;\r\n  }, [calculateFilteredProducts, selectedFilters]);\r\n\r\n  // Функція для оновлення неактивних фільтрів\r\n  const updateDisabledFilters = useCallback(() => {\r\n    const newDisabledFilters = {\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    };\r\n\r\n    // Базові фільтри: усі вибрані фільтри, крім поточного типу\r\n    const baseFilters = {\r\n      brands: [...selectedFilters.brands],\r\n      priceRanges: [...selectedFilters.priceRanges],\r\n      volumes: [...selectedFilters.volumes],\r\n      types: [...selectedFilters.types],\r\n      categories: [...selectedFilters.categories],\r\n    };\r\n\r\n    // Перевірка кожного бренду\r\n    filters.brands.forEach(brand => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: [brand],\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.brands.add(brand);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного цінового діапазону\r\n    filters.priceRanges.forEach(range => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: [range.label],\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.priceRanges.add(range.label);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного об’єму\r\n    filters.volumes.forEach(volume => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: [volume],\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.volumes.add(volume);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного типу\r\n    filters.types.forEach(type => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: [type],\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.types.add(type);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожної категорії (для /search)\r\n    if (isSearchPage) {\r\n      filters.categories.forEach(category => {\r\n        const tempFilters = {\r\n          ...baseFilters,\r\n          brands: baseFilters.brands,\r\n          priceRanges: baseFilters.priceRanges,\r\n          volumes: baseFilters.volumes,\r\n          types: baseFilters.types,\r\n          categories: [category],\r\n        };\r\n        const filtered = calculateFilteredProducts(tempFilters);\r\n        if (filtered.length === 0) {\r\n          newDisabledFilters.categories.add(category);\r\n        }\r\n      });\r\n    }\r\n\r\n    setDisabledFilters(newDisabledFilters);\r\n  }, [filters, selectedFilters, calculateFilteredProducts, isSearchPage]);\r\n\r\n  // Завантаження всіх продуктів із API\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setIsLoading(true); // Починаємо завантаження\r\n      try {\r\n        // Завантажуємо всі продукти без пагінації\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n          params: {\r\n            limit: 1000, // Велике значення, щоб отримати всі продукти\r\n          },\r\n        });\r\n        let productsData = response.data.products || [];\r\n\r\n        // Фільтруємо продукти за категорією, якщо не на сторінці пошуку\r\n        let filteredProductsData = productsData;\r\n        if (categoryId && !isSearchPage) {\r\n          filteredProductsData = productsData.filter(\r\n            product => product.category_id === categoryId\r\n          );\r\n        }\r\n\r\n        // Ініціалізація фільтрів на основі відфільтрованих продуктів\r\n        const brandCounts = {};\r\n        const typeCounts = {};\r\n        const categoryCounts = {};\r\n        const allVolumes = new Set();\r\n        const priceBuckets = new Set();\r\n        filteredProductsData.forEach(product => {\r\n          const brand = product.brand_name;\r\n          const type = product.feature_type;\r\n          const category = product.category_name;\r\n          const volume = product.volume;\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          brandCounts[brand] = (brandCounts[brand] || 0) + 1;\r\n          if (type) typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\r\n          if (volume) allVolumes.add(volume);\r\n          if (minPrice > 0) {\r\n            if (minPrice <= 100) priceBuckets.add('0-100');\r\n            else if (minPrice <= 200) priceBuckets.add('100-200');\r\n            else if (minPrice <= 300) priceBuckets.add('200-300');\r\n            else if (minPrice <= 400) priceBuckets.add('300-400');\r\n            else if (minPrice <= 500) priceBuckets.add('400-500');\r\n            else if (minPrice <= 600) priceBuckets.add('500-600');\r\n            else if (minPrice <= 700) priceBuckets.add('600-700');\r\n            else if (minPrice <= 800) priceBuckets.add('700-800');\r\n            else if (minPrice <= 900) priceBuckets.add('800-900');\r\n            else if (minPrice <= 1000) priceBuckets.add('900-1000');\r\n            else priceBuckets.add('1000+');\r\n          }\r\n        });\r\n\r\n        const allBrands = [...new Set(filteredProductsData.map(p => p.brand_name))].sort(\r\n          (a, b) => (brandCounts[b] || 0) - (brandCounts[a] || 0)\r\n        );\r\n        const allPriceRanges = [\r\n          { label: '0-100', min: 0, max: 100 },\r\n          { label: '100-200', min: 100, max: 200 },\r\n          { label: '200-300', min: 200, max: 300 },\r\n          { label: '300-400', min: 300, max: 400 },\r\n          { label: '400-500', min: 400, max: 500 },\r\n          { label: '500-600', min: 500, max: 600 },\r\n          { label: '600-700', min: 600, max: 700 },\r\n          { label: '700-800', min: 700, max: 800 },\r\n          { label: '800-900', min: 800, max: 900 },\r\n          { label: '900-1000', min: 900, max: 1000 },\r\n          { label: '1000+', min: 1000, max: Infinity },\r\n        ].filter(range => priceBuckets.has(range.label));\r\n        const allVolumesSorted = [...allVolumes].sort((a, b) => {\r\n          const numA = parseFloat(a.replace(/[^0-9.]/g, '')) || 0;\r\n          const numB = parseFloat(b.replace(/[^0-9.]/g, '')) || 0;\r\n          return numA - numB;\r\n        });\r\n        const allTypes = [...new Set(filteredProductsData.map(p => p.feature_type).filter(Boolean))].sort(\r\n          (a, b) => (typeCounts[b] || 0) - (typeCounts[a] || 0)\r\n        );\r\n        const allCategories = isSearchPage\r\n          ? [...new Set(productsData.map(p => p.category_name))].sort(\r\n              (a, b) => (categoryCounts[b] || 0) - (categoryCounts[a] || 0)\r\n            )\r\n          : [categoryId].filter(Boolean);\r\n\r\n        setFilters({\r\n          brands: allBrands,\r\n          priceRanges: allPriceRanges,\r\n          volumes: allVolumesSorted,\r\n          types: allTypes,\r\n          categories: allCategories,\r\n        });\r\n\r\n        setAllProducts(productsData);\r\n        setFilteredProducts(filteredProductsData);\r\n        setTotalProducts(filteredProductsData.length);\r\n        setPreviewProductCount(filteredProductsData.length);\r\n        setCurrentPage(1);\r\n        setStartPage(1);\r\n        setLoadMorePages(1);\r\n        setIsPaginated(true);\r\n\r\n        // Скидання фільтрів\r\n        setSelectedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n        setAppliedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n\r\n        setBrandSearch('');\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n\r\n        setDisabledFilters({\r\n          brands: new Set(),\r\n          priceRanges: new Set(),\r\n          volumes: new Set(),\r\n          types: new Set(),\r\n          categories: new Set(),\r\n        });\r\n\r\n        // Автоматично вибираємо чекбокс типу\r\n        if (initialType) {\r\n          setTimeout(() => {\r\n            const typeCheckbox = document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);\r\n            if (typeCheckbox) typeCheckbox.checked = true;\r\n          }, 0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Помилка завантаження продуктів:', error);\r\n        alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');\r\n        setAllProducts([]);\r\n        setFilteredProducts([]);\r\n        setTotalProducts(0);\r\n        setPreviewProductCount(0);\r\n      } finally {\r\n        setIsLoading(false); // Завершуємо завантаження\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [categoryId, searchQuery, initialType, isSearchPage]);\r\n\r\n  // Оновлення previewProductCount та disabledFilters при зміні selectedFilters\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      setPreviewProductCount(calculatePreviewProducts());\r\n      updateDisabledFilters();\r\n    }\r\n  }, [\r\n    selectedFilters,\r\n    customPriceFrom,\r\n    customPriceTo,\r\n    searchQuery,\r\n    categoryId,\r\n    isSearchPage,\r\n    allProducts,\r\n    isLoading,\r\n    calculatePreviewProducts,\r\n    updateDisabledFilters\r\n  ]);\r\n\r\n  // Клієнтська фільтрація при зміні застосованих фільтрів\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      let filtered = [...allProducts];\r\n\r\n      // Фільтр за пошуковим запитом\r\n      if (searchQuery) {\r\n        filtered = filtered.filter(product =>\r\n          product.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n      }\r\n\r\n      // Фільтр за категорією\r\n      if (categoryId && !isSearchPage) {\r\n        filtered = filtered.filter(product => product.category_id === categoryId);\r\n      } else if (appliedFilters.categories.length > 0 && isSearchPage) {\r\n        filtered = filtered.filter(product =>\r\n          appliedFilters.categories.includes(product.category_name)\r\n        );\r\n      }\r\n\r\n      // Фільтр за брендами\r\n      if (appliedFilters.brands.length > 0) {\r\n        filtered = filtered.filter(product =>\r\n          appliedFilters.brands.includes(product.brand_name)\r\n        );\r\n      }\r\n\r\n      // Фільтр за ціною\r\n      if (customPriceFrom !== '' && customPriceTo !== '') {\r\n        const priceFrom = parseFloat(customPriceFrom);\r\n        const priceTo = parseFloat(customPriceTo);\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          return minPrice >= priceFrom && minPrice <= priceTo;\r\n        });\r\n      } else if (appliedFilters.priceRanges.length > 0) {\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          return appliedFilters.priceRanges.some(range => {\r\n            const [min, max] = range.includes('+')\r\n              ? [1000, Infinity]\r\n              : range.split('-').map(Number);\r\n            return minPrice >= min && (max === Infinity || minPrice <= max);\r\n          });\r\n        });\r\n      }\r\n\r\n      // Фільтр за об’ємами\r\n      if (appliedFilters.volumes.length > 0) {\r\n        filtered = filtered.filter(product =>\r\n          appliedFilters.volumes.includes(product.volume)\r\n        );\r\n      }\r\n\r\n      // Фільтр за типами\r\n      if (appliedFilters.types.length > 0) {\r\n        filtered = filtered.filter(product =>\r\n          appliedFilters.types.includes(product.feature_type)\r\n        );\r\n      }\r\n\r\n      setFilteredProducts(filtered);\r\n      setTotalProducts(filtered.length);\r\n    }\r\n  }, [allProducts, appliedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, isLoading]);\r\n\r\n  // Обробка вибору фільтру\r\n  const handleFilterChange = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const currentValues = prev[filterType] || [];\r\n      let updatedValues;\r\n      if (currentValues.includes(value)) {\r\n        updatedValues = currentValues.filter((v) => v !== value);\r\n      } else {\r\n        updatedValues = [...currentValues, value];\r\n      }\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      if (filterType === 'priceRanges') {\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n      }\r\n      return updatedFilters;\r\n    });\r\n    setActiveFilter({ type: filterType, value });\r\n  };\r\n\r\n  // Видалення одного фільтру\r\n  const removeFilter = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const updatedValues = (prev[filterType] || []).filter((v) => v !== value);\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      setAppliedFilters({\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      });\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  // Скидання всіх фільтрів\r\n  const resetAllFilters = () => {\r\n    const emptyFilters = {\r\n      brands: [],\r\n      priceRanges: [],\r\n      volumes: [],\r\n      types: [],\r\n      categories: [],\r\n    };\r\n    setSelectedFilters(emptyFilters);\r\n    setAppliedFilters(emptyFilters);\r\n    setBrandSearch('');\r\n    setCustomPriceFrom('');\r\n    setCustomPriceTo('');\r\n    setDisabledFilters({\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n  };\r\n\r\n  // Застосування фільтрів\r\n  const applyFilters = () => {\r\n    setAppliedFilters({ ...selectedFilters });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setActiveFilter(null);\r\n  };\r\n\r\n  // Перемикання \"Більше\"/\"Менше\"\r\n  const toggleShowMore = (filterType) => {\r\n    setShowMore((prev) => ({\r\n      ...prev,\r\n      [filterType]: !prev[filterType],\r\n    }));\r\n  };\r\n\r\n  // Обробка пошуку брендів\r\n  const handleBrandSearch = (e) => {\r\n    setBrandSearch(e.target.value);\r\n  };\r\n\r\n  // Обробка кастомного діапазону цін\r\n  const handleCustomPriceChange = (field, value) => {\r\n    const numValue = value.replace(/[^0-9]/g, '');\r\n    if (field === 'from') {\r\n      setCustomPriceFrom(numValue);\r\n    } else {\r\n      setCustomPriceTo(numValue);\r\n    }\r\n    if (numValue !== '') {\r\n      setSelectedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n      setAppliedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Обмеження кількості елементів для фільтрів\r\n  const getVisibleItems = useCallback((items, filterType) => {\r\n    if (!items) return [];\r\n\r\n    let filteredItems = items;\r\n\r\n    if (filterType === 'brands') {\r\n      filteredItems = items.filter((brand) =>\r\n        brand.toLowerCase().includes(brandSearch.toLowerCase())\r\n      );\r\n      const topItems = filteredItems.slice(0, 12); // Top 12 brands (by count)\r\n      const remainingItems = filteredItems.slice(12); // Remaining brands\r\n      if (showMore.brands || filteredItems.length <= 12) {\r\n        // Keep top 12 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'types') {\r\n      const topItems = filteredItems.slice(0, 6); // Top 6 types (by count)\r\n      const remainingItems = filteredItems.slice(6); // Remaining types\r\n      if (showMore.types || filteredItems.length <= 6) {\r\n        // Keep top 6 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'categories') {\r\n      if (showMore.categories || items.length <= 6) {\r\n        return [...items].sort((a, b) => a.localeCompare(b));\r\n      }\r\n      return items.slice(0, 6);\r\n    }\r\n\r\n    if (showMore[filterType] || items.length <= 12) {\r\n      return items;\r\n    }\r\n    return items.slice(0, 12);\r\n  }, [brandSearch, showMore]);\r\n\r\n  // Модифікація назви продукту\r\n  const getProductName = (product) => {\r\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\r\n  };\r\n\r\n  // Пагінація\r\n  const totalPages = Math.ceil(totalProducts / productsPerPage);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    setStartPage(page);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    setCurrentPage((prev) => prev + 1);\r\n    setLoadMorePages((prev) => prev + 1);\r\n    setIsPaginated(false);\r\n  };\r\n\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  const totalAppliedFilters =\r\n    (appliedFilters.brands?.length || 0) +\r\n    (appliedFilters.priceRanges?.length || 0) +\r\n    (appliedFilters.volumes?.length || 0) +\r\n    (appliedFilters.types?.length || 0) +\r\n    (isSearchPage ? (appliedFilters.categories?.length || 0) : 0) +\r\n    (customPriceFrom !== '' && customPriceTo !== '' ? 1 : 0);\r\n\r\n  // Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\r\n  useEffect(() => {\r\n    Object.keys(showMore).forEach((filterType) => {\r\n      const container = filterItemsRefs.current[filterType];\r\n      if (container) {\r\n        const items = container.querySelector('.filter-items');\r\n        if (items) {\r\n          const visibleItems = getVisibleItems(filters[filterType], filterType);\r\n          const maxVisible = filterType === 'brands' || filterType === 'priceRanges' || filterType === 'volumes' ? 12 : 6;\r\n          const isExpanded = showMore[filterType] || visibleItems.length <= maxVisible;\r\n          // Обчислюємо висоту для згорнутого стану\r\n          const collapsedHeight = visibleItems.length > maxVisible\r\n            ? items.scrollHeight * (maxVisible / filters[filterType].length)\r\n            : items.scrollHeight;\r\n          // Встановлюємо max-height\r\n          container.style.maxHeight = isExpanded\r\n            ? `${items.scrollHeight}px`\r\n            : `${collapsedHeight}px`;\r\n        }\r\n      }\r\n    });\r\n  }, [showMore, filters, brandSearch, getVisibleItems]);\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2>Товари категорії</h2>\r\n      {isLoading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Завантаження...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"product-list-container\">\r\n        {/* Filters column */}\r\n        <div className={`filters ${!isLoading ? 'loaded' : ''}`}>\r\n          <div className=\"filters-header\">\r\n            <h3>Фільтри</h3>\r\n            {totalAppliedFilters > 0 && (\r\n              <div className=\"selected-filters\">\r\n                {isSearchPage &&\r\n                  appliedFilters.categories?.map((category) => (\r\n                    <div key={`category-${category}`} className=\"selected-filter-tag\">\r\n                      <span>{categoryNames[category] || category}</span>\r\n                      <button onClick={() => removeFilter('categories', category)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                {appliedFilters.brands?.map((brand) => (\r\n                  <div key={`brand-${brand}`} className=\"selected-filter-tag\">\r\n                    <span>{brand}</span>\r\n                    <button onClick={() => removeFilter('brands', brand)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {customPriceFrom !== '' && customPriceTo !== '' ? (\r\n                  <div key=\"custom-price\" className=\"selected-filter-tag\">\r\n                    <span>\r\n                      {customPriceFrom}-{customPriceTo} грн\r\n                    </span>\r\n                    <button\r\n                      onClick={() => {\r\n                        setCustomPriceFrom('');\r\n                        setCustomPriceTo('');\r\n                        applyFilters();\r\n                      }}\r\n                    >\r\n                      ×\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  appliedFilters.priceRanges?.map((range) => (\r\n                    <div key={`price-${range}`} className=\"selected-filter-tag\">\r\n                      <span>{range}</span>\r\n                      <button onClick={() => removeFilter('priceRanges', range)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                {appliedFilters.volumes?.map((volume) => (\r\n                  <div key={`volume-${volume}`} className=\"selected-filter-tag\">\r\n                    <span>{volume}</span>\r\n                    <button onClick={() => removeFilter('volumes', volume)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {appliedFilters.types?.map((type) => (\r\n                  <div key={`type-${type}`} className=\"selected-filter-tag\">\r\n                    <span>{type}</span>\r\n                    <button onClick={() => removeFilter('types', type)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {totalAppliedFilters > 1 && (\r\n                  <button className=\"reset-all-filters\" onClick={resetAllFilters}>\r\n                    Скинути всі\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Category filter (only on /search) */}\r\n          {isSearchPage && searchQuery && (\r\n            <div className=\"filter-section\">\r\n              <h4>Категорія</h4>\r\n              <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['categories'] = el)}>\r\n                <div className=\"filter-items filter-items-single-column\">\r\n                  {getVisibleItems(filters.categories, 'categories').map((category, index) => {\r\n                    const isDisabled = disabledFilters.categories.has(category);\r\n                    return (\r\n                      <label\r\n                        key={index}\r\n                        className={isDisabled ? 'disabled' : ''}\r\n                        ref={(el) => (filterRefs.current[`categories-${category}`] = el)}\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"category\"\r\n                          value={category}\r\n                          checked={selectedFilters.categories?.includes(category) || false}\r\n                          onChange={() => handleFilterChange('categories', category)}\r\n                          disabled={isDisabled}\r\n                        />\r\n                        {categoryNames[category] || category}\r\n                      </label>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n              {filters.categories.length > 6 && (\r\n                <button\r\n                  className=\"show-more-btn\"\r\n                  onClick={() => toggleShowMore('categories')}\r\n                >\r\n                  {showMore.categories ? 'Менше ↑' : 'Більше ↓'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Brand filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Бренд</h4>\r\n            <input\r\n              type=\"text\"\r\n              className=\"brand-search-input\"\r\n              placeholder=\"Пошук бренду...\"\r\n              value={brandSearch}\r\n              onChange={handleBrandSearch}\r\n            />\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['brands'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.brands, 'brands').map((brand, index) => {\r\n                  const isDisabled = disabledFilters.brands.has(brand);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={`${brand.length > 13 ? 'span-two-columns' : ''} ${\r\n                        isDisabled ? 'disabled' : ''\r\n                      }`}\r\n                      ref={(el) => (filterRefs.current[`brands-${brand}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"brand\"\r\n                        value={brand}\r\n                        checked={selectedFilters.brands?.includes(brand) || false}\r\n                        onChange={() => handleFilterChange('brands', brand)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {brand}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.brands.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('brands')}\r\n              >\r\n                {showMore.brands ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Price filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Ціна (грн)</h4>\r\n            <div className=\"custom-price-inputs\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Від\"\r\n                value={customPriceFrom}\r\n                onChange={(e) => handleCustomPriceChange('from', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"До\"\r\n                value={customPriceTo}\r\n                onChange={(e) => handleCustomPriceChange('to', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n            </div>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['priceRanges'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.priceRanges, 'priceRanges').map((range, index) => {\r\n                  const isDisabled = disabledFilters.priceRanges.has(range.label);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`priceRanges-${range.label}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"priceRange\"\r\n                        value={range.label}\r\n                        checked={selectedFilters.priceRanges?.includes(range.label) || false}\r\n                        onChange={() => handleFilterChange('priceRanges', range.label)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {range.label}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.priceRanges.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('priceRanges')}\r\n              >\r\n                {showMore.priceRanges ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Volume filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Об’єм</h4>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['volumes'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.volumes, 'volumes').map((volume, index) => {\r\n                  const isDisabled = disabledFilters.volumes.has(volume);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`volumes-${volume}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"volume\"\r\n                        value={volume}\r\n                        checked={selectedFilters.volumes?.includes(volume) || false}\r\n                        onChange={() => handleFilterChange('volumes', volume)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {volume}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.volumes.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('volumes')}\r\n              >\r\n                {showMore.volumes ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Type filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Тип</h4>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['types'] = el)}>\r\n              <div className=\"filter-items filter-items-single-column\">\r\n                {getVisibleItems(filters.types, 'types').map((type, index) => {\r\n                  const isDisabled = disabledFilters.types.has(type);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`types-${type}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"type\"\r\n                        value={type}\r\n                        checked={selectedFilters.types?.includes(type) || false}\r\n                        onChange={() => handleFilterChange('types', type)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {type}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.types.length > 6 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('types')}\r\n              >\r\n                {showMore.types ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Плашка \"Показати товари\" */}\r\n          {activeFilter && (\r\n            <button\r\n              className=\"filter-tag\"\r\n              ref={tagRef}\r\n              onClick={applyFilters}\r\n              style={{\r\n                top: filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                  ? `${filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].getBoundingClientRect().top -\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].closest('.filters').getBoundingClientRect().top +\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].offsetHeight / 2}px`\r\n                  : '0px',\r\n              }}\r\n            >\r\n              Показати товари ({previewProductCount})\r\n            </button>\r\n          )}\r\n\r\n          {/* Кнопка \"Показати товари\" */}\r\n          <button className=\"apply-filters-btn\" onClick={applyFilters}>\r\n            Показати товари ({previewProductCount})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Products column */}\r\n        <div className=\"products\">\r\n          <div className={`products-list ${!isLoading ? 'loaded' : ''}`}>\r\n            {filteredProducts.length > 0 ? (\r\n              filteredProducts\r\n                .slice(\r\n                  isPaginated\r\n                    ? (currentPage - 1) * productsPerPage\r\n                    : (startPage - 1) * productsPerPage,\r\n                  isPaginated\r\n                    ? currentPage * productsPerPage\r\n                    : startPage * productsPerPage + loadMorePages * productsPerPage\r\n                )\r\n                .map((product, index) => (\r\n                  <Link\r\n                    to={`/product/${product.id}`}\r\n                    key={`${product.id}-${index}`}\r\n                    className=\"product-card\"\r\n                  >\r\n                    <h3>{getProductName(product)}</h3>\r\n                    <img\r\n                      src={\r\n                        product.images && product.images.length > 0\r\n                          ? product.images[0]\r\n                          : '/img/placeholder.webp'\r\n                      }\r\n                      alt={product.name}\r\n                      onError={(e) => (e.target.src = '/img/placeholder.webp')}\r\n                    />\r\n                    <p className=\"price\">{getMinPrice(product.store_prices)} грн</p>\r\n                    <p>{product.description || 'Опис відсутній'}</p>\r\n                  </Link>\r\n                ))\r\n            ) : (\r\n              !isLoading && <p>Товари не знайдено</p>\r\n            )}\r\n          </div>\r\n          {/* Пагінація та кнопка \"Завантажити ще\" */}\r\n          {!isLoading && totalProducts > productsPerPage && (\r\n            <div className=\"pagination-container\">\r\n              {((startPage - 1 + loadMorePages) * productsPerPage) < totalProducts && (\r\n                <button className=\"load-more-btn\" onClick={handleLoadMore}>\r\n                  Завантажити ще\r\n                </button>\r\n              )}\r\n              <div className=\"pagination\">\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  Попередня\r\n                </button>\r\n                {pageNumbers.map((number) => (\r\n                  <button\r\n                    key={number}\r\n                    className={`pagination-btn ${\r\n                      currentPage === number ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handlePageChange(number)}\r\n                  >\r\n                    {number}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                >\r\n                  Наступна\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}