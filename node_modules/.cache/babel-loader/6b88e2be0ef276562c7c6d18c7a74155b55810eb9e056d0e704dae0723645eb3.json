{"ast":null,"code":"import _objectSpread from\"C:/Users/pushy/Desktop/Work/ek/price-ua/cosmetick-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useParams,useLocation,Link}from'react-router-dom';import axios from'axios';import'./ProductList.css';import{categoryNames}from'./Header.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductList(_ref){var _appliedFilters$brand,_appliedFilters$price,_appliedFilters$volum,_appliedFilters$types,_appliedFilters$categ,_appliedFilters$categ2,_appliedFilters$brand2,_appliedFilters$price2,_appliedFilters$volum2,_appliedFilters$types2;let{searchTerm}=_ref;const{categoryId}=useParams();const location=useLocation();// Отримуємо параметри з URL, враховуючи як 'query', так і 'search'\nconst queryParams=new URLSearchParams(location.search);const initialType=queryParams.get('type')||'';const searchQuery=queryParams.get('query')||queryParams.get('search')||searchTerm||'';const isSearchPage=location.pathname==='/search';console.log('ProductList initialized with:',{categoryId,searchTerm,searchQuery,initialType,isSearchPage,location:location.pathname+location.search});// Стан для всіх фільтрів\nconst[filters,setFilters]=useState({brands:[],priceRanges:[],volumes:[],types:[],categories:[]});// Стан для вибраних фільтрів\nconst[selectedFilters,setSelectedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// Стан для застосованих фільтрів\nconst[appliedFilters,setAppliedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// Стан для всіх продуктів (з API)\nconst[allProducts,setAllProducts]=useState([]);// Стан для відфільтрованих продуктів і пагінації\nconst[filteredProducts,setFilteredProducts]=useState([]);const[totalProducts,setTotalProducts]=useState(0);const[previewProductCount,setPreviewProductCount]=useState(0);const[currentPage,setCurrentPage]=useState(1);const productsPerPage=24;const[isPaginated,setIsPaginated]=useState(true);const[startPage,setStartPage]=useState(1);const[loadMorePages,setLoadMorePages]=useState(1);// Стан для пошуку брендів\nconst[brandSearch,setBrandSearch]=useState('');// Стан для кастомного діапазону цін\nconst[customPriceFrom,setCustomPriceFrom]=useState('');const[customPriceTo,setCustomPriceTo]=useState('');// Стан для активного фільтру\nconst[activeFilter,setActiveFilter]=useState(null);// Стан для неактивних фільтрів\nconst[disabledFilters,setDisabledFilters]=useState({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});// Стан для \"Більше/Менше\"\nconst[showMore,setShowMore]=useState({brands:false,priceRanges:false,volumes:false,types:false,categories:false});// Стан для індикатора завантаження\nconst[isLoading,setIsLoading]=useState(true);// Стан для статусу збереження продуктів\nconst[savedProducts,setSavedProducts]=useState(new Set());// Стан для показу повідомлення про логін\nconst[showLoginPrompt,setShowLoginPrompt]=useState({});// Рефи для позиціонування плашки та анімації фільтрів\nconst filterRefs=useRef({});const tagRef=useRef(null);const filterItemsRefs=useRef({});// Перевірка авторизації користувача\nconst user=JSON.parse(localStorage.getItem('user'));const token=localStorage.getItem('token');// Функція для отримання мінімальної ціни з store_prices\nconst getMinPrice=storePrices=>{if(!storePrices||storePrices.length===0)return 0;return Math.min(...storePrices.map(sp=>sp.price));};// Завантаження статусу збереження продуктів\nconst fetchSavedStatus=useCallback(async()=>{if(!user||!token){setSavedProducts(new Set());return;}try{const promises=filteredProducts.map(product=>axios.get(\"https://price-ua-react-backend.onrender.com/saved-products/\".concat(product.id),{headers:{Authorization:\"Bearer \".concat(token)}}));const responses=await Promise.all(promises);const savedSet=new Set();responses.forEach((response,index)=>{if(response.data.isSaved){savedSet.add(filteredProducts[index].id);}});setSavedProducts(savedSet);}catch(error){console.error('Помилка завантаження статусу збереження:',error);}},[filteredProducts,user,token]);// Обробка кліку на сердечко\nconst handleHeartClick=async(productId,event)=>{event.preventDefault();// Запобігаємо переходу за посиланням\nif(!user||!token){setShowLoginPrompt(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:true}));setTimeout(()=>{setShowLoginPrompt(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:false}));},3000);return;}const isSaved=savedProducts.has(productId);try{if(isSaved){await axios.delete(\"https://price-ua-react-backend.onrender.com/saved-products/\".concat(productId),{headers:{Authorization:\"Bearer \".concat(token)}});setSavedProducts(prev=>{const newSet=new Set(prev);newSet.delete(productId);return newSet;});}else{await axios.post('https://price-ua-react-backend.onrender.com/saved-products',{productId},{headers:{Authorization:\"Bearer \".concat(token)}});setSavedProducts(prev=>new Set(prev).add(productId));}}catch(error){console.error('Помилка при зміні статусу збереження:',error);alert('Не вдалося оновити статус бажаного. Спробуйте ще раз.');}};// Завантаження статусу збереження при зміні filteredProducts\nuseEffect(()=>{if(!isLoading&&filteredProducts.length>0){fetchSavedStatus();}},[filteredProducts,isLoading,fetchSavedStatus]);// Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\nconst calculateFilteredProducts=useCallback(tempFilters=>{let filtered=[...allProducts];// Фільтр за пошуковим запитом\nif(searchQuery){filtered=filtered.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));}// Фільтр за категорією\nif(categoryId&&!isSearchPage){filtered=filtered.filter(product=>product.category_id===categoryId);}else if(tempFilters.categories.length>0&&isSearchPage){filtered=filtered.filter(product=>tempFilters.categories.includes(product.category_name));}// Фільтр за брендами\nif(tempFilters.brands.length>0){filtered=filtered.filter(product=>tempFilters.brands.includes(product.brand_name));}// Фільтр за ціною\nif(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return minPrice>=priceFrom&&minPrice<=priceTo;});}else if(tempFilters.priceRanges.length>0){filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return tempFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});});}// Фільтр за об’ємами\nif(tempFilters.volumes.length>0){filtered=filtered.filter(product=>tempFilters.volumes.includes(product.volume));}// Фільтр за типами\nif(tempFilters.types.length>0){filtered=filtered.filter(product=>tempFilters.types.includes(product.feature_type));}return filtered;},[allProducts,searchQuery,categoryId,isSearchPage,customPriceFrom,customPriceTo]);// Функція для previewProductCount\nconst calculatePreviewProducts=useCallback(()=>{const filtered=calculateFilteredProducts(selectedFilters);return filtered.length;},[calculateFilteredProducts,selectedFilters]);// Функція для оновлення неактивних фільтрів\nconst updateDisabledFilters=useCallback(()=>{const newDisabledFilters={brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()};// Базові фільтри: усі вибрані фільтри, крім поточного типу\nconst baseFilters={brands:[...selectedFilters.brands],priceRanges:[...selectedFilters.priceRanges],volumes:[...selectedFilters.volumes],types:[...selectedFilters.types],categories:[...selectedFilters.categories]};// Перевірка кожного бренду\nfilters.brands.forEach(brand=>{const tempFilters=_objectSpread(_objectSpread({},baseFilters),{},{brands:[brand],priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:baseFilters.types,categories:baseFilters.categories});const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.brands.add(brand);}});// Перевірка кожного цінового діапазону\nfilters.priceRanges.forEach(range=>{const tempFilters=_objectSpread(_objectSpread({},baseFilters),{},{brands:baseFilters.brands,priceRanges:[range.label],volumes:baseFilters.volumes,types:baseFilters.types,categories:baseFilters.categories});const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.priceRanges.add(range.label);}});// Перевірка кожного об’єму\nfilters.volumes.forEach(volume=>{const tempFilters=_objectSpread(_objectSpread({},baseFilters),{},{brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:[volume],types:baseFilters.types,categories:baseFilters.categories});const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.volumes.add(volume);}});// Перевірка кожного типу\nfilters.types.forEach(type=>{const tempFilters=_objectSpread(_objectSpread({},baseFilters),{},{brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:[type],categories:baseFilters.categories});const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.types.add(type);}});// Перевірка кожної категорії (для /search)\nif(isSearchPage){filters.categories.forEach(category=>{const tempFilters=_objectSpread(_objectSpread({},baseFilters),{},{brands:baseFilters.brands,priceRanges:baseFilters.priceRanges,volumes:baseFilters.volumes,types:baseFilters.types,categories:[category]});const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0){newDisabledFilters.categories.add(category);}});}setDisabledFilters(newDisabledFilters);},[filters,selectedFilters,calculateFilteredProducts,isSearchPage]);// Завантаження всіх продуктів із API\nuseEffect(()=>{const fetchProducts=async()=>{setIsLoading(true);// Починаємо завантаження\ntry{// Логування параметрів запиту\nconst requestParams={search:searchQuery||undefined,category:categoryId&&!isSearchPage?categoryId:undefined,limit:1000};console.log('Fetching products with params:',requestParams);// Завантажуємо всі продукти з урахуванням пошукового запиту та категорії\nconst response=await axios.get('https://price-ua-react-backend.onrender.com/products',{params:requestParams});// Логування отриманих даних\nconsole.log('API response:',{productCount:response.data.products.length,products:response.data.products.map(p=>({id:p.id,name:p.name,category_id:p.category_id,category_name:p.category_name}))});let productsData=response.data.products||[];// Ініціалізація фільтрів на основі отриманих продуктів\nconst brandCounts={};const typeCounts={};const categoryCounts={};const allVolumes=new Set();const priceBuckets=new Set();productsData.forEach(product=>{const brand=product.brand_name;const type=product.feature_type;const category=product.category_name;const volume=product.volume;const minPrice=getMinPrice(product.store_prices);brandCounts[brand]=(brandCounts[brand]||0)+1;if(type)typeCounts[type]=(typeCounts[type]||0)+1;categoryCounts[category]=(categoryCounts[category]||0)+1;if(volume)allVolumes.add(volume);if(minPrice>0){if(minPrice<=100)priceBuckets.add('0-100');else if(minPrice<=200)priceBuckets.add('100-200');else if(minPrice<=300)priceBuckets.add('200-300');else if(minPrice<=400)priceBuckets.add('300-400');else if(minPrice<=500)priceBuckets.add('400-500');else if(minPrice<=600)priceBuckets.add('500-600');else if(minPrice<=700)priceBuckets.add('600-700');else if(minPrice<=800)priceBuckets.add('700-800');else if(minPrice<=900)priceBuckets.add('800-900');else if(minPrice<=1000)priceBuckets.add('900-1000');else priceBuckets.add('1000+');}});const allBrands=[...new Set(productsData.map(p=>p.brand_name))].sort((a,b)=>(brandCounts[b]||0)-(brandCounts[a]||0));const allPriceRanges=[{label:'0-100',min:0,max:100},{label:'100-200',min:100,max:200},{label:'200-300',min:200,max:300},{label:'300-400',min:300,max:400},{label:'400-500',min:400,max:500},{label:'500-600',min:500,max:600},{label:'600-700',min:600,max:700},{label:'700-800',min:700,max:800},{label:'800-900',min:800,max:900},{label:'900-1000',min:900,max:1000},{label:'1000+',min:1000,max:Infinity}].filter(range=>priceBuckets.has(range.label));const allVolumesSorted=[...allVolumes].sort((a,b)=>{const numA=parseFloat(a.replace(/[^0-9.]/g,''))||0;const numB=parseFloat(b.replace(/[^0-9.]/g,''))||0;return numA-numB;});const allTypes=[...new Set(productsData.map(p=>p.feature_type).filter(Boolean))].sort((a,b)=>(typeCounts[b]||0)-(typeCounts[a]||0));const allCategories=isSearchPage?[...new Set(productsData.map(p=>p.category_name))].sort((a,b)=>(categoryCounts[b]||0)-(categoryCounts[a]||0)):[categoryId].filter(Boolean);setFilters({brands:allBrands,priceRanges:allPriceRanges,volumes:allVolumesSorted,types:allTypes,categories:allCategories});setAllProducts(productsData);setFilteredProducts(productsData);// Спочатку встановлюємо, але useEffect нижче оновить\nsetTotalProducts(productsData.length);setPreviewProductCount(productsData.length);setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);// Скидання фільтрів\nsetSelectedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setAppliedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});// Автоматично вибираємо чекбокс типу\nif(initialType){setTimeout(()=>{const typeCheckbox=document.querySelector(\"input[name=\\\"type\\\"][value=\\\"\".concat(initialType,\"\\\"]\"));if(typeCheckbox)typeCheckbox.checked=true;},0);}}catch(error){console.error('Помилка завантаження продуктів:',error);alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');setAllProducts([]);setFilteredProducts([]);setTotalProducts(0);setPreviewProductCount(0);}finally{setIsLoading(false);// Завершуємо завантаження\n}};fetchProducts();},[categoryId,searchQuery,initialType,isSearchPage]);// Оновлення previewProductCount та disabledFilters при зміні selectedFilters\nuseEffect(()=>{if(!isLoading){setPreviewProductCount(calculatePreviewProducts());updateDisabledFilters();}},[selectedFilters,customPriceFrom,customPriceTo,searchQuery,categoryId,isSearchPage,allProducts,isLoading,calculatePreviewProducts,updateDisabledFilters]);// Клієнтська фільтрація при зміні застосованих фільтрів\nuseEffect(()=>{if(!isLoading&&allProducts.length>0){console.log('Starting client-side filtering:',{allProductsCount:allProducts.length,searchQuery,categoryId,isSearchPage,appliedFilters,customPriceFrom,customPriceTo});let filtered=[...allProducts];// Фільтр за пошуковим запитом\nif(searchQuery){console.log('Applying searchQuery filter:',{searchQuery});filtered=filtered.filter(product=>{const matches=product.name.toLowerCase().includes(searchQuery.toLowerCase());if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (does not match \\\"\").concat(searchQuery,\"\\\")\"));}return matches;});console.log('After searchQuery filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Фільтр за категорією\nif(categoryId&&!isSearchPage){console.log('Applying categoryId filter:',{categoryId});filtered=filtered.filter(product=>{const matches=product.category_id===categoryId;if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (category_id \").concat(product.category_id,\" does not match \\\"\").concat(categoryId,\"\\\")\"));}return matches;});console.log('After categoryId filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}else if(appliedFilters.categories.length>0&&isSearchPage){console.log('Applying categories filter:',{categories:appliedFilters.categories});filtered=filtered.filter(product=>{const matches=appliedFilters.categories.includes(product.category_name);if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (category_name \").concat(product.category_name,\" not in \").concat(appliedFilters.categories,\")\"));}return matches;});console.log('After categories filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Фільтр за брендами\nif(appliedFilters.brands.length>0){console.log('Applying brands filter:',{brands:appliedFilters.brands});filtered=filtered.filter(product=>{const matches=appliedFilters.brands.includes(product.brand_name);if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (brand \").concat(product.brand_name,\" not in \").concat(appliedFilters.brands,\")\"));}return matches;});console.log('After brands filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Фільтр за ціною\nif(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);console.log('Applying custom price filter:',{priceFrom,priceTo});filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);const matches=minPrice>=priceFrom&&minPrice<=priceTo;if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (price \").concat(minPrice,\" not in range \").concat(priceFrom,\"-\").concat(priceTo,\")\"));}return matches;});console.log('After custom price filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}else if(appliedFilters.priceRanges.length>0){console.log('Applying priceRanges filter:',{priceRanges:appliedFilters.priceRanges});filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);const matches=appliedFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (price \").concat(minPrice,\" not in ranges \").concat(appliedFilters.priceRanges,\")\"));}return matches;});console.log('After priceRanges filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Фільтр за об’ємами\nif(appliedFilters.volumes.length>0){console.log('Applying volumes filter:',{volumes:appliedFilters.volumes});filtered=filtered.filter(product=>{const matches=appliedFilters.volumes.includes(product.volume);if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (volume \").concat(product.volume,\" not in \").concat(appliedFilters.volumes,\")\"));}return matches;});console.log('After volumes filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Фільтр за типами\nif(appliedFilters.types.length>0){console.log('Applying types filter:',{types:appliedFilters.types});filtered=filtered.filter(product=>{const matches=appliedFilters.types.includes(product.feature_type);if(!matches){console.log(\"Excluding product: \".concat(product.name,\" (type \").concat(product.feature_type,\" not in \").concat(appliedFilters.types,\")\"));}return matches;});console.log('After types filter:',{count:filtered.length,products:filtered.map(p=>p.name)});}// Логування фінального результату\nconsole.log('Final filtered products:',{count:filtered.length,products:filtered.map(p=>({id:p.id,name:p.name,category_id:p.category_id,category_name:p.category_name}))});setFilteredProducts(filtered);setTotalProducts(filtered.length);}},[allProducts,appliedFilters,customPriceFrom,customPriceTo,searchQuery,categoryId,isSearchPage,isLoading]);// Обробка вибору фільтру\nconst handleFilterChange=(filterType,value)=>{setSelectedFilters(prev=>{const currentValues=prev[filterType]||[];let updatedValues;if(currentValues.includes(value)){updatedValues=currentValues.filter(v=>v!==value);}else{updatedValues=[...currentValues,value];}const updatedFilters=_objectSpread(_objectSpread({},prev),{},{[filterType]:updatedValues});if(filterType==='priceRanges'){setCustomPriceFrom('');setCustomPriceTo('');}return updatedFilters;});setActiveFilter({type:filterType,value});};// Видалення одного фільтру\nconst removeFilter=(filterType,value)=>{setSelectedFilters(prev=>{const updatedValues=(prev[filterType]||[]).filter(v=>v!==value);const updatedFilters=_objectSpread(_objectSpread({},prev),{},{[filterType]:updatedValues});setAppliedFilters(_objectSpread(_objectSpread({},prev),{},{[filterType]:updatedValues}));return updatedFilters;});};// Скидання всіх фільтрів\nconst resetAllFilters=()=>{const emptyFilters={brands:[],priceRanges:[],volumes:[],types:[],categories:[]};setSelectedFilters(emptyFilters);setAppliedFilters(emptyFilters);setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);};// Застосування фільтрів\nconst applyFilters=()=>{setAppliedFilters(_objectSpread({},selectedFilters));setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setActiveFilter(null);};// Перемикання \"Більше\"/\"Менше\"\nconst toggleShowMore=filterType=>{setShowMore(prev=>_objectSpread(_objectSpread({},prev),{},{[filterType]:!prev[filterType]}));};// Обробка пошуку брендів\nconst handleBrandSearch=e=>{setBrandSearch(e.target.value);};// Обробка кастомного діапазону цін\nconst handleCustomPriceChange=(field,value)=>{const numValue=value.replace(/[^0-9]/g,'');if(field==='from'){setCustomPriceFrom(numValue);}else{setCustomPriceTo(numValue);}if(numValue!==''){setSelectedFilters(prev=>_objectSpread(_objectSpread({},prev),{},{priceRanges:[]}));setAppliedFilters(prev=>_objectSpread(_objectSpread({},prev),{},{priceRanges:[]}));}};// Обмеження кількості елементів для фільтрів\nconst getVisibleItems=useCallback((items,filterType)=>{if(!items)return[];let filteredItems=items;if(filterType==='brands'){filteredItems=items.filter(brand=>brand.toLowerCase().includes(brandSearch.toLowerCase()));const topItems=filteredItems.slice(0,12);// Top 12 brands (by count)\nconst remainingItems=filteredItems.slice(12);// Remaining brands\nif(showMore.brands||filteredItems.length<=12){// Keep top 12 in original order, sort remaining alphabetically\nreturn[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='types'){const topItems=filteredItems.slice(0,6);// Top 6 types (by count)\nconst remainingItems=filteredItems.slice(6);// Remaining types\nif(showMore.types||filteredItems.length<=6){// Keep top 6 in original order, sort remaining alphabetically\nreturn[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='categories'){if(showMore.categories||items.length<=6){return[...items].sort((a,b)=>a.localeCompare(b));}return items.slice(0,6);}if(showMore[filterType]||items.length<=12){return items;}return items.slice(0,12);},[brandSearch,showMore]);// Модифікація назви продукту\nconst getProductName=product=>{return\"\".concat(product.name,\" (\").concat(product.volume||'Об’єм не вказано',\")\");};// Пагінація\nconst totalPages=Math.ceil(totalProducts/productsPerPage);const handlePageChange=page=>{setCurrentPage(page);setStartPage(page);setLoadMorePages(1);setIsPaginated(true);window.scrollTo({top:0,behavior:'smooth'});};const handleLoadMore=()=>{setCurrentPage(prev=>prev+1);setLoadMorePages(prev=>prev+1);setIsPaginated(false);};const pageNumbers=[];for(let i=1;i<=totalPages;i++){pageNumbers.push(i);}const totalAppliedFilters=(((_appliedFilters$brand=appliedFilters.brands)===null||_appliedFilters$brand===void 0?void 0:_appliedFilters$brand.length)||0)+(((_appliedFilters$price=appliedFilters.priceRanges)===null||_appliedFilters$price===void 0?void 0:_appliedFilters$price.length)||0)+(((_appliedFilters$volum=appliedFilters.volumes)===null||_appliedFilters$volum===void 0?void 0:_appliedFilters$volum.length)||0)+(((_appliedFilters$types=appliedFilters.types)===null||_appliedFilters$types===void 0?void 0:_appliedFilters$types.length)||0)+(isSearchPage?((_appliedFilters$categ=appliedFilters.categories)===null||_appliedFilters$categ===void 0?void 0:_appliedFilters$categ.length)||0:0)+(customPriceFrom!==''&&customPriceTo!==''?1:0);// Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\nuseEffect(()=>{Object.keys(showMore).forEach(filterType=>{const container=filterItemsRefs.current[filterType];if(container){const items=container.querySelector('.filter-items');if(items){const visibleItems=getVisibleItems(filters[filterType],filterType);const maxVisible=filterType==='brands'||filterType==='priceRanges'||filterType==='volumes'?12:6;const isExpanded=showMore[filterType]||visibleItems.length<=maxVisible;// Обчислюємо висоту для згорнутого стану\nconst collapsedHeight=visibleItems.length>maxVisible?items.scrollHeight*(maxVisible/filters[filterType].length):items.scrollHeight;// Встановлюємо max-height\ncontainer.style.maxHeight=isExpanded?\"\".concat(items.scrollHeight,\"px\"):\"\".concat(collapsedHeight,\"px\");}}});},[showMore,filters,brandSearch,getVisibleItems]);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters \".concat(!isLoading?'loaded':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0424\\u0456\\u043B\\u044C\\u0442\\u0440\\u0438\"}),totalAppliedFilters>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filters\",children:[isSearchPage&&((_appliedFilters$categ2=appliedFilters.categories)===null||_appliedFilters$categ2===void 0?void 0:_appliedFilters$categ2.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:categoryNames[category]||category}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('categories',category),children:\"\\xD7\"})]},\"category-\".concat(category)))),(_appliedFilters$brand2=appliedFilters.brands)===null||_appliedFilters$brand2===void 0?void 0:_appliedFilters$brand2.map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:brand}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('brands',brand),children:\"\\xD7\"})]},\"brand-\".concat(brand))),customPriceFrom!==''&&customPriceTo!==''?/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[customPriceFrom,\"-\",customPriceTo,\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCustomPriceFrom('');setCustomPriceTo('');applyFilters();},children:\"\\xD7\"})]},\"custom-price\"):(_appliedFilters$price2=appliedFilters.priceRanges)===null||_appliedFilters$price2===void 0?void 0:_appliedFilters$price2.map(range=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:range}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('priceRanges',range),children:\"\\xD7\"})]},\"price-\".concat(range))),(_appliedFilters$volum2=appliedFilters.volumes)===null||_appliedFilters$volum2===void 0?void 0:_appliedFilters$volum2.map(volume=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:volume}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('volumes',volume),children:\"\\xD7\"})]},\"volume-\".concat(volume))),(_appliedFilters$types2=appliedFilters.types)===null||_appliedFilters$types2===void 0?void 0:_appliedFilters$types2.map(type=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:type}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('types',type),children:\"\\xD7\"})]},\"type-\".concat(type))),totalAppliedFilters>1&&/*#__PURE__*/_jsx(\"button\",{className:\"reset-all-filters\",onClick:resetAllFilters,children:\"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0432\\u0441\\u0456\"})]})]}),isSearchPage&&searchQuery&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['categories']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.categories,'categories').map((category,index)=>{var _selectedFilters$cate;const isDisabled=disabledFilters.categories.has(category);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[\"categories-\".concat(category)]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"category\",value:category,checked:((_selectedFilters$cate=selectedFilters.categories)===null||_selectedFilters$cate===void 0?void 0:_selectedFilters$cate.includes(category))||false,onChange:()=>handleFilterChange('categories',category),disabled:isDisabled}),categoryNames[category]||category]},index);})})}),filters.categories.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('categories'),children:showMore.categories?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"brand-search-input\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0431\\u0440\\u0435\\u043D\\u0434\\u0443...\",value:brandSearch,onChange:handleBrandSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['brands']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.brands,'brands').map((brand,index)=>{var _selectedFilters$bran;const isDisabled=disabledFilters.brands.has(brand);return/*#__PURE__*/_jsxs(\"label\",{className:\"\".concat(brand.length>13?'span-two-columns':'',\" \").concat(isDisabled?'disabled':''),ref:el=>filterRefs.current[\"brands-\".concat(brand)]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"brand\",value:brand,checked:((_selectedFilters$bran=selectedFilters.brands)===null||_selectedFilters$bran===void 0?void 0:_selectedFilters$bran.includes(brand))||false,onChange:()=>handleFilterChange('brands',brand),disabled:isDisabled}),brand]},index);})})}),filters.brands.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('brands'),children:showMore.brands?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0426\\u0456\\u043D\\u0430 (\\u0433\\u0440\\u043D)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-price-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0456\\u0434\",value:customPriceFrom,onChange:e=>handleCustomPriceChange('from',e.target.value),className:\"price-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0414\\u043E\",value:customPriceTo,onChange:e=>handleCustomPriceChange('to',e.target.value),className:\"price-input\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['priceRanges']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.priceRanges,'priceRanges').map((range,index)=>{var _selectedFilters$pric;const isDisabled=disabledFilters.priceRanges.has(range.label);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[\"priceRanges-\".concat(range.label)]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"priceRange\",value:range.label,checked:((_selectedFilters$pric=selectedFilters.priceRanges)===null||_selectedFilters$pric===void 0?void 0:_selectedFilters$pric.includes(range.label))||false,onChange:()=>handleFilterChange('priceRanges',range.label),disabled:isDisabled}),range.label]},index);})})}),filters.priceRanges.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('priceRanges'),children:showMore.priceRanges?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041E\\u0431\\u2019\\u0454\\u043C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['volumes']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.volumes,'volumes').map((volume,index)=>{var _selectedFilters$volu;const isDisabled=disabledFilters.volumes.has(volume);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[\"volumes-\".concat(volume)]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"volume\",value:volume,checked:((_selectedFilters$volu=selectedFilters.volumes)===null||_selectedFilters$volu===void 0?void 0:_selectedFilters$volu.includes(volume))||false,onChange:()=>handleFilterChange('volumes',volume),disabled:isDisabled}),volume]},index);})})}),filters.volumes.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('volumes'),children:showMore.volumes?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['types']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.types,'types').map((type,index)=>{var _selectedFilters$type;const isDisabled=disabledFilters.types.has(type);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[\"types-\".concat(type)]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"type\",value:type,checked:((_selectedFilters$type=selectedFilters.types)===null||_selectedFilters$type===void 0?void 0:_selectedFilters$type.includes(type))||false,onChange:()=>handleFilterChange('types',type),disabled:isDisabled}),type]},index);})})}),filters.types.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('types'),children:showMore.types?'Менше ↑':'Більше ↓'})]}),activeFilter&&/*#__PURE__*/_jsxs(\"button\",{className:\"filter-tag\",ref:tagRef,onClick:applyFilters,style:{top:filterRefs.current[\"\".concat(activeFilter.type,\"-\").concat(activeFilter.value)]?\"\".concat(filterRefs.current[\"\".concat(activeFilter.type,\"-\").concat(activeFilter.value)].getBoundingClientRect().top-filterRefs.current[\"\".concat(activeFilter.type,\"-\").concat(activeFilter.value)].closest('.filters').getBoundingClientRect().top+filterRefs.current[\"\".concat(activeFilter.type,\"-\").concat(activeFilter.value)].offsetHeight/2,\"px\"):'0px'},children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"apply-filters-btn\",onClick:applyFilters,children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products-list \".concat(!isLoading?'loaded':''),children:filteredProducts.length>0?filteredProducts.slice(isPaginated?(currentPage-1)*productsPerPage:(startPage-1)*productsPerPage,isPaginated?currentPage*productsPerPage:startPage*productsPerPage+loadMorePages*productsPerPage).map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card-container\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(product.id),className:\"product-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:getProductName(product)}),/*#__PURE__*/_jsx(\"img\",{src:product.images&&product.images.length>0?product.images[0]:'/img/placeholder.webp',alt:product.name,onError:e=>e.target.src='/img/placeholder.webp'}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[getMinPrice(product.store_prices),\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"p\",{children:product.description||'Опис відсутній'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"heart-icon \".concat(savedProducts.has(product.id)?'saved':''),onClick:e=>handleHeartClick(product.id,e),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:savedProducts.has(product.id)?'#d32f2f':'none',stroke:\"#d32f2f\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"})})}),showLoginPrompt[product.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"login-prompt\",children:[\"\\u0423\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0432 \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-link\",children:\"\\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),\" \\u0449\\u043E\\u0431 \\u0434\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0434\\u043E \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E\"]})]},\"\".concat(product.id,\"-\").concat(index))):!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})}),!isLoading&&totalProducts>productsPerPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-container\",children:[(startPage-1+loadMorePages)*productsPerPage<totalProducts&&/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:handleLoadMore,children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438 \\u0449\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:\"\\u041F\\u043E\\u043F\\u0435\\u0440\\u0435\\u0434\\u043D\\u044F\"}),pageNumbers.map(number=>/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn \".concat(currentPage===number?'active':''),onClick:()=>handlePageChange(number),children:number},number)),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:\"\\u041D\\u0430\\u0441\\u0442\\u0443\\u043F\\u043D\\u0430\"})]})]})]})]})]});}export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useLocation","Link","axios","categoryNames","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","_appliedFilters$brand","_appliedFilters$price","_appliedFilters$volum","_appliedFilters$types","_appliedFilters$categ","_appliedFilters$categ2","_appliedFilters$brand2","_appliedFilters$price2","_appliedFilters$volum2","_appliedFilters$types2","searchTerm","categoryId","location","queryParams","URLSearchParams","search","initialType","get","searchQuery","isSearchPage","pathname","console","log","filters","setFilters","brands","priceRanges","volumes","types","categories","selectedFilters","setSelectedFilters","appliedFilters","setAppliedFilters","allProducts","setAllProducts","filteredProducts","setFilteredProducts","totalProducts","setTotalProducts","previewProductCount","setPreviewProductCount","currentPage","setCurrentPage","productsPerPage","isPaginated","setIsPaginated","startPage","setStartPage","loadMorePages","setLoadMorePages","brandSearch","setBrandSearch","customPriceFrom","setCustomPriceFrom","customPriceTo","setCustomPriceTo","activeFilter","setActiveFilter","disabledFilters","setDisabledFilters","Set","showMore","setShowMore","isLoading","setIsLoading","savedProducts","setSavedProducts","showLoginPrompt","setShowLoginPrompt","filterRefs","tagRef","filterItemsRefs","user","JSON","parse","localStorage","getItem","token","getMinPrice","storePrices","length","Math","min","map","sp","price","fetchSavedStatus","promises","product","concat","id","headers","Authorization","responses","Promise","all","savedSet","forEach","response","index","data","isSaved","add","error","handleHeartClick","productId","event","preventDefault","prev","_objectSpread","setTimeout","has","delete","newSet","post","alert","calculateFilteredProducts","tempFilters","filtered","filter","name","toLowerCase","includes","category_id","category_name","brand_name","priceFrom","parseFloat","priceTo","minPrice","store_prices","some","range","max","Infinity","split","Number","volume","feature_type","calculatePreviewProducts","updateDisabledFilters","newDisabledFilters","baseFilters","brand","label","type","category","fetchProducts","requestParams","undefined","limit","params","productCount","products","p","productsData","brandCounts","typeCounts","categoryCounts","allVolumes","priceBuckets","allBrands","sort","a","b","allPriceRanges","allVolumesSorted","numA","replace","numB","allTypes","Boolean","allCategories","typeCheckbox","document","querySelector","checked","allProductsCount","matches","count","handleFilterChange","filterType","value","currentValues","updatedValues","v","updatedFilters","removeFilter","resetAllFilters","emptyFilters","applyFilters","toggleShowMore","handleBrandSearch","e","target","handleCustomPriceChange","field","numValue","getVisibleItems","items","filteredItems","topItems","slice","remainingItems","localeCompare","getProductName","totalPages","ceil","handlePageChange","page","window","scrollTo","top","behavior","handleLoadMore","pageNumbers","i","push","totalAppliedFilters","Object","keys","container","current","visibleItems","maxVisible","isExpanded","collapsedHeight","scrollHeight","style","maxHeight","className","children","onClick","ref","el","_selectedFilters$cate","isDisabled","onChange","disabled","placeholder","_selectedFilters$bran","_selectedFilters$pric","_selectedFilters$volu","_selectedFilters$type","getBoundingClientRect","closest","offsetHeight","to","src","images","alt","onError","description","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","number"],"sources":["C:/Users/pushy/Desktop/Work/ek/price-ua/cosmetick-frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useLocation, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './ProductList.css';\r\nimport { categoryNames } from './Header.js';\r\n\r\nfunction ProductList({ searchTerm }) {\r\n  const { categoryId } = useParams();\r\n  const location = useLocation();\r\n\r\n  // Отримуємо параметри з URL, враховуючи як 'query', так і 'search'\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const initialType = queryParams.get('type') || '';\r\n  const searchQuery = queryParams.get('query') || queryParams.get('search') || searchTerm || '';\r\n  const isSearchPage = location.pathname === '/search';\r\n  console.log('ProductList initialized with:', {\r\n    categoryId,\r\n    searchTerm,\r\n    searchQuery,\r\n    initialType,\r\n    isSearchPage,\r\n    location: location.pathname + location.search,\r\n  });\r\n\r\n  // Стан для всіх фільтрів\r\n  const [filters, setFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: [],\r\n    categories: [],\r\n  });\r\n\r\n  // Стан для вибраних фільтрів\r\n  const [selectedFilters, setSelectedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для застосованих фільтрів\r\n  const [appliedFilters, setAppliedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // Стан для всіх продуктів (з API)\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  // Стан для відфільтрованих продуктів і пагінації\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [totalProducts, setTotalProducts] = useState(0);\r\n  const [previewProductCount, setPreviewProductCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const productsPerPage = 24;\r\n  const [isPaginated, setIsPaginated] = useState(true);\r\n  const [startPage, setStartPage] = useState(1);\r\n  const [loadMorePages, setLoadMorePages] = useState(1);\r\n\r\n  // Стан для пошуку брендів\r\n  const [brandSearch, setBrandSearch] = useState('');\r\n\r\n  // Стан для кастомного діапазону цін\r\n  const [customPriceFrom, setCustomPriceFrom] = useState('');\r\n  const [customPriceTo, setCustomPriceTo] = useState('');\r\n\r\n  // Стан для активного фільтру\r\n  const [activeFilter, setActiveFilter] = useState(null);\r\n\r\n  // Стан для неактивних фільтрів\r\n  const [disabledFilters, setDisabledFilters] = useState({\r\n    brands: new Set(),\r\n    priceRanges: new Set(),\r\n    volumes: new Set(),\r\n    types: new Set(),\r\n    categories: new Set(),\r\n  });\r\n\r\n  // Стан для \"Більше/Менше\"\r\n  const [showMore, setShowMore] = useState({\r\n    brands: false,\r\n    priceRanges: false,\r\n    volumes: false,\r\n    types: false,\r\n    categories: false,\r\n  });\r\n\r\n  // Стан для індикатора завантаження\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Стан для статусу збереження продуктів\r\n  const [savedProducts, setSavedProducts] = useState(new Set());\r\n  // Стан для показу повідомлення про логін\r\n  const [showLoginPrompt, setShowLoginPrompt] = useState({});\r\n\r\n  // Рефи для позиціонування плашки та анімації фільтрів\r\n  const filterRefs = useRef({});\r\n  const tagRef = useRef(null);\r\n  const filterItemsRefs = useRef({});\r\n\r\n  // Перевірка авторизації користувача\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const token = localStorage.getItem('token');\r\n\r\n  // Функція для отримання мінімальної ціни з store_prices\r\n  const getMinPrice = (storePrices) => {\r\n    if (!storePrices || storePrices.length === 0) return 0;\r\n    return Math.min(...storePrices.map(sp => sp.price));\r\n  };\r\n\r\n  // Завантаження статусу збереження продуктів\r\n  const fetchSavedStatus = useCallback(async () => {\r\n    if (!user || !token) {\r\n      setSavedProducts(new Set());\r\n      return;\r\n    }\r\n    try {\r\n      const promises = filteredProducts.map(product =>\r\n        axios.get(`https://price-ua-react-backend.onrender.com/saved-products/${product.id}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n      );\r\n      const responses = await Promise.all(promises);\r\n      const savedSet = new Set();\r\n      responses.forEach((response, index) => {\r\n        if (response.data.isSaved) {\r\n          savedSet.add(filteredProducts[index].id);\r\n        }\r\n      });\r\n      setSavedProducts(savedSet);\r\n    } catch (error) {\r\n      console.error('Помилка завантаження статусу збереження:', error);\r\n    }\r\n  }, [filteredProducts, user, token]);\r\n\r\n  // Обробка кліку на сердечко\r\n  const handleHeartClick = async (productId, event) => {\r\n    event.preventDefault(); // Запобігаємо переходу за посиланням\r\n    if (!user || !token) {\r\n      setShowLoginPrompt(prev => ({ ...prev, [productId]: true }));\r\n      setTimeout(() => {\r\n        setShowLoginPrompt(prev => ({ ...prev, [productId]: false }));\r\n      }, 3000);\r\n      return;\r\n    }\r\n\r\n    const isSaved = savedProducts.has(productId);\r\n    try {\r\n      if (isSaved) {\r\n        await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setSavedProducts(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.delete(productId);\r\n          return newSet;\r\n        });\r\n      } else {\r\n        await axios.post(\r\n          'https://price-ua-react-backend.onrender.com/saved-products',\r\n          { productId },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setSavedProducts(prev => new Set(prev).add(productId));\r\n      }\r\n    } catch (error) {\r\n      console.error('Помилка при зміні статусу збереження:', error);\r\n      alert('Не вдалося оновити статус бажаного. Спробуйте ще раз.');\r\n    }\r\n  };\r\n\r\n  // Завантаження статусу збереження при зміні filteredProducts\r\n  useEffect(() => {\r\n    if (!isLoading && filteredProducts.length > 0) {\r\n      fetchSavedStatus();\r\n    }\r\n  }, [filteredProducts, isLoading, fetchSavedStatus]);\r\n\r\n  // Функція для попередньої фільтрації (для previewProductCount та disabledFilters)\r\n  const calculateFilteredProducts = useCallback((tempFilters) => {\r\n    let filtered = [...allProducts];\r\n\r\n    // Фільтр за пошуковим запитом\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(product =>\r\n        product.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Фільтр за категорією\r\n    if (categoryId && !isSearchPage) {\r\n      filtered = filtered.filter(product => product.category_id === categoryId);\r\n    } else if (tempFilters.categories.length > 0 && isSearchPage) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.categories.includes(product.category_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за брендами\r\n    if (tempFilters.brands.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.brands.includes(product.brand_name)\r\n      );\r\n    }\r\n\r\n    // Фільтр за ціною\r\n    if (customPriceFrom !== '' && customPriceTo !== '') {\r\n      const priceFrom = parseFloat(customPriceFrom);\r\n      const priceTo = parseFloat(customPriceTo);\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return minPrice >= priceFrom && minPrice <= priceTo;\r\n      });\r\n    } else if (tempFilters.priceRanges.length > 0) {\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return tempFilters.priceRanges.some(range => {\r\n          const [min, max] = range.includes('+')\r\n            ? [1000, Infinity]\r\n            : range.split('-').map(Number);\r\n          return minPrice >= min && (max === Infinity || minPrice <= max);\r\n        });\r\n      });\r\n    }\r\n\r\n    // Фільтр за об’ємами\r\n    if (tempFilters.volumes.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.volumes.includes(product.volume)\r\n      );\r\n    }\r\n\r\n    // Фільтр за типами\r\n    if (tempFilters.types.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.types.includes(product.feature_type)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [allProducts, searchQuery, categoryId, isSearchPage, customPriceFrom, customPriceTo]);\r\n\r\n  // Функція для previewProductCount\r\n  const calculatePreviewProducts = useCallback(() => {\r\n    const filtered = calculateFilteredProducts(selectedFilters);\r\n    return filtered.length;\r\n  }, [calculateFilteredProducts, selectedFilters]);\r\n\r\n  // Функція для оновлення неактивних фільтрів\r\n  const updateDisabledFilters = useCallback(() => {\r\n    const newDisabledFilters = {\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    };\r\n\r\n    // Базові фільтри: усі вибрані фільтри, крім поточного типу\r\n    const baseFilters = {\r\n      brands: [...selectedFilters.brands],\r\n      priceRanges: [...selectedFilters.priceRanges],\r\n      volumes: [...selectedFilters.volumes],\r\n      types: [...selectedFilters.types],\r\n      categories: [...selectedFilters.categories],\r\n    };\r\n\r\n    // Перевірка кожного бренду\r\n    filters.brands.forEach(brand => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: [brand],\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.brands.add(brand);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного цінового діапазону\r\n    filters.priceRanges.forEach(range => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: [range.label],\r\n        volumes: baseFilters.volumes,\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.priceRanges.add(range.label);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного об’єму\r\n    filters.volumes.forEach(volume => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: [volume],\r\n        types: baseFilters.types,\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.volumes.add(volume);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожного типу\r\n    filters.types.forEach(type => {\r\n      const tempFilters = {\r\n        ...baseFilters,\r\n        brands: baseFilters.brands,\r\n        priceRanges: baseFilters.priceRanges,\r\n        volumes: baseFilters.volumes,\r\n        types: [type],\r\n        categories: baseFilters.categories,\r\n      };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) {\r\n        newDisabledFilters.types.add(type);\r\n      }\r\n    });\r\n\r\n    // Перевірка кожної категорії (для /search)\r\n    if (isSearchPage) {\r\n      filters.categories.forEach(category => {\r\n        const tempFilters = {\r\n          ...baseFilters,\r\n          brands: baseFilters.brands,\r\n          priceRanges: baseFilters.priceRanges,\r\n          volumes: baseFilters.volumes,\r\n          types: baseFilters.types,\r\n          categories: [category],\r\n        };\r\n        const filtered = calculateFilteredProducts(tempFilters);\r\n        if (filtered.length === 0) {\r\n          newDisabledFilters.categories.add(category);\r\n        }\r\n      });\r\n    }\r\n\r\n    setDisabledFilters(newDisabledFilters);\r\n  }, [filters, selectedFilters, calculateFilteredProducts, isSearchPage]);\r\n\r\n  // Завантаження всіх продуктів із API\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setIsLoading(true); // Починаємо завантаження\r\n      try {\r\n        // Логування параметрів запиту\r\n        const requestParams = {\r\n          search: searchQuery || undefined,\r\n          category: categoryId && !isSearchPage ? categoryId : undefined,\r\n          limit: 1000,\r\n        };\r\n        console.log('Fetching products with params:', requestParams);\r\n\r\n        // Завантажуємо всі продукти з урахуванням пошукового запиту та категорії\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n          params: requestParams,\r\n        });\r\n\r\n        // Логування отриманих даних\r\n        console.log('API response:', {\r\n          productCount: response.data.products.length,\r\n          products: response.data.products.map(p => ({\r\n            id: p.id,\r\n            name: p.name,\r\n            category_id: p.category_id,\r\n            category_name: p.category_name,\r\n          })),\r\n        });\r\n\r\n        let productsData = response.data.products || [];\r\n\r\n        // Ініціалізація фільтрів на основі отриманих продуктів\r\n        const brandCounts = {};\r\n        const typeCounts = {};\r\n        const categoryCounts = {};\r\n        const allVolumes = new Set();\r\n        const priceBuckets = new Set();\r\n        productsData.forEach(product => {\r\n          const brand = product.brand_name;\r\n          const type = product.feature_type;\r\n          const category = product.category_name;\r\n          const volume = product.volume;\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          brandCounts[brand] = (brandCounts[brand] || 0) + 1;\r\n          if (type) typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\r\n          if (volume) allVolumes.add(volume);\r\n          if (minPrice > 0) {\r\n            if (minPrice <= 100) priceBuckets.add('0-100');\r\n            else if (minPrice <= 200) priceBuckets.add('100-200');\r\n            else if (minPrice <= 300) priceBuckets.add('200-300');\r\n            else if (minPrice <= 400) priceBuckets.add('300-400');\r\n            else if (minPrice <= 500) priceBuckets.add('400-500');\r\n            else if (minPrice <= 600) priceBuckets.add('500-600');\r\n            else if (minPrice <= 700) priceBuckets.add('600-700');\r\n            else if (minPrice <= 800) priceBuckets.add('700-800');\r\n            else if (minPrice <= 900) priceBuckets.add('800-900');\r\n            else if (minPrice <= 1000) priceBuckets.add('900-1000');\r\n            else priceBuckets.add('1000+');\r\n          }\r\n        });\r\n\r\n        const allBrands = [...new Set(productsData.map(p => p.brand_name))].sort(\r\n          (a, b) => (brandCounts[b] || 0) - (brandCounts[a] || 0)\r\n        );\r\n        const allPriceRanges = [\r\n          { label: '0-100', min: 0, max: 100 },\r\n          { label: '100-200', min: 100, max: 200 },\r\n          { label: '200-300', min: 200, max: 300 },\r\n          { label: '300-400', min: 300, max: 400 },\r\n          { label: '400-500', min: 400, max: 500 },\r\n          { label: '500-600', min: 500, max: 600 },\r\n          { label: '600-700', min: 600, max: 700 },\r\n          { label: '700-800', min: 700, max: 800 },\r\n          { label: '800-900', min: 800, max: 900 },\r\n          { label: '900-1000', min: 900, max: 1000 },\r\n          { label: '1000+', min: 1000, max: Infinity },\r\n        ].filter(range => priceBuckets.has(range.label));\r\n        const allVolumesSorted = [...allVolumes].sort((a, b) => {\r\n          const numA = parseFloat(a.replace(/[^0-9.]/g, '')) || 0;\r\n          const numB = parseFloat(b.replace(/[^0-9.]/g, '')) || 0;\r\n          return numA - numB;\r\n        });\r\n        const allTypes = [...new Set(productsData.map(p => p.feature_type).filter(Boolean))].sort(\r\n          (a, b) => (typeCounts[b] || 0) - (typeCounts[a] || 0)\r\n        );\r\n        const allCategories = isSearchPage\r\n          ? [...new Set(productsData.map(p => p.category_name))].sort(\r\n              (a, b) => (categoryCounts[b] || 0) - (categoryCounts[a] || 0)\r\n            )\r\n          : [categoryId].filter(Boolean);\r\n\r\n        setFilters({\r\n          brands: allBrands,\r\n          priceRanges: allPriceRanges,\r\n          volumes: allVolumesSorted,\r\n          types: allTypes,\r\n          categories: allCategories,\r\n        });\r\n\r\n        setAllProducts(productsData);\r\n        setFilteredProducts(productsData); // Спочатку встановлюємо, але useEffect нижче оновить\r\n        setTotalProducts(productsData.length);\r\n        setPreviewProductCount(productsData.length);\r\n        setCurrentPage(1);\r\n        setStartPage(1);\r\n        setLoadMorePages(1);\r\n        setIsPaginated(true);\r\n\r\n        // Скидання фільтрів\r\n        setSelectedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n        setAppliedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n\r\n        setBrandSearch('');\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n\r\n        setDisabledFilters({\r\n          brands: new Set(),\r\n          priceRanges: new Set(),\r\n          volumes: new Set(),\r\n          types: new Set(),\r\n          categories: new Set(),\r\n        });\r\n\r\n        // Автоматично вибираємо чекбокс типу\r\n        if (initialType) {\r\n          setTimeout(() => {\r\n            const typeCheckbox = document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);\r\n            if (typeCheckbox) typeCheckbox.checked = true;\r\n          }, 0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Помилка завантаження продуктів:', error);\r\n        alert('Не вдалося завантажити продукти. Перевірте підключення до сервера.');\r\n        setAllProducts([]);\r\n        setFilteredProducts([]);\r\n        setTotalProducts(0);\r\n        setPreviewProductCount(0);\r\n      } finally {\r\n        setIsLoading(false); // Завершуємо завантаження\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [categoryId, searchQuery, initialType, isSearchPage]);\r\n\r\n  // Оновлення previewProductCount та disabledFilters при зміні selectedFilters\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      setPreviewProductCount(calculatePreviewProducts());\r\n      updateDisabledFilters();\r\n    }\r\n  }, [\r\n    selectedFilters,\r\n    customPriceFrom,\r\n    customPriceTo,\r\n    searchQuery,\r\n    categoryId,\r\n    isSearchPage,\r\n    allProducts,\r\n    isLoading,\r\n    calculatePreviewProducts,\r\n    updateDisabledFilters,\r\n  ]);\r\n\r\n  // Клієнтська фільтрація при зміні застосованих фільтрів\r\n  useEffect(() => {\r\n    if (!isLoading && allProducts.length > 0) {\r\n      console.log('Starting client-side filtering:', {\r\n        allProductsCount: allProducts.length,\r\n        searchQuery,\r\n        categoryId,\r\n        isSearchPage,\r\n        appliedFilters,\r\n        customPriceFrom,\r\n        customPriceTo,\r\n      });\r\n\r\n      let filtered = [...allProducts];\r\n\r\n      // Фільтр за пошуковим запитом\r\n      if (searchQuery) {\r\n        console.log('Applying searchQuery filter:', { searchQuery });\r\n        filtered = filtered.filter(product => {\r\n          const matches = product.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (does not match \"${searchQuery}\")`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After searchQuery filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за категорією\r\n      if (categoryId && !isSearchPage) {\r\n        console.log('Applying categoryId filter:', { categoryId });\r\n        filtered = filtered.filter(product => {\r\n          const matches = product.category_id === categoryId;\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (category_id ${product.category_id} does not match \"${categoryId}\")`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After categoryId filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      } else if (appliedFilters.categories.length > 0 && isSearchPage) {\r\n        console.log('Applying categories filter:', { categories: appliedFilters.categories });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.categories.includes(product.category_name);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (category_name ${product.category_name} not in ${appliedFilters.categories})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After categories filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за брендами\r\n      if (appliedFilters.brands.length > 0) {\r\n        console.log('Applying brands filter:', { brands: appliedFilters.brands });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.brands.includes(product.brand_name);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (brand ${product.brand_name} not in ${appliedFilters.brands})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After brands filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за ціною\r\n      if (customPriceFrom !== '' && customPriceTo !== '') {\r\n        const priceFrom = parseFloat(customPriceFrom);\r\n        const priceTo = parseFloat(customPriceTo);\r\n        console.log('Applying custom price filter:', { priceFrom, priceTo });\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          const matches = minPrice >= priceFrom && minPrice <= priceTo;\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in range ${priceFrom}-${priceTo})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After custom price filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      } else if (appliedFilters.priceRanges.length > 0) {\r\n        console.log('Applying priceRanges filter:', { priceRanges: appliedFilters.priceRanges });\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          const matches = appliedFilters.priceRanges.some(range => {\r\n            const [min, max] = range.includes('+')\r\n              ? [1000, Infinity]\r\n              : range.split('-').map(Number);\r\n            return minPrice >= min && (max === Infinity || minPrice <= max);\r\n          });\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (price ${minPrice} not in ranges ${appliedFilters.priceRanges})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After priceRanges filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за об’ємами\r\n      if (appliedFilters.volumes.length > 0) {\r\n        console.log('Applying volumes filter:', { volumes: appliedFilters.volumes });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.volumes.includes(product.volume);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (volume ${product.volume} not in ${appliedFilters.volumes})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After volumes filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Фільтр за типами\r\n      if (appliedFilters.types.length > 0) {\r\n        console.log('Applying types filter:', { types: appliedFilters.types });\r\n        filtered = filtered.filter(product => {\r\n          const matches = appliedFilters.types.includes(product.feature_type);\r\n          if (!matches) {\r\n            console.log(`Excluding product: ${product.name} (type ${product.feature_type} not in ${appliedFilters.types})`);\r\n          }\r\n          return matches;\r\n        });\r\n        console.log('After types filter:', {\r\n          count: filtered.length,\r\n          products: filtered.map(p => p.name),\r\n        });\r\n      }\r\n\r\n      // Логування фінального результату\r\n      console.log('Final filtered products:', {\r\n        count: filtered.length,\r\n        products: filtered.map(p => ({\r\n          id: p.id,\r\n          name: p.name,\r\n          category_id: p.category_id,\r\n          category_name: p.category_name,\r\n        })),\r\n      });\r\n\r\n      setFilteredProducts(filtered);\r\n      setTotalProducts(filtered.length);\r\n    }\r\n  }, [allProducts, appliedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, isLoading]);\r\n\r\n  // Обробка вибору фільтру\r\n  const handleFilterChange = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const currentValues = prev[filterType] || [];\r\n      let updatedValues;\r\n      if (currentValues.includes(value)) {\r\n        updatedValues = currentValues.filter((v) => v !== value);\r\n      } else {\r\n        updatedValues = [...currentValues, value];\r\n      }\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      if (filterType === 'priceRanges') {\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n      }\r\n      return updatedFilters;\r\n    });\r\n    setActiveFilter({ type: filterType, value });\r\n  };\r\n\r\n  // Видалення одного фільтру\r\n  const removeFilter = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const updatedValues = (prev[filterType] || []).filter((v) => v !== value);\r\n      const updatedFilters = {\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      };\r\n      setAppliedFilters({\r\n        ...prev,\r\n        [filterType]: updatedValues,\r\n      });\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  // Скидання всіх фільтрів\r\n  const resetAllFilters = () => {\r\n    const emptyFilters = {\r\n      brands: [],\r\n      priceRanges: [],\r\n      volumes: [],\r\n      types: [],\r\n      categories: [],\r\n    };\r\n    setSelectedFilters(emptyFilters);\r\n    setAppliedFilters(emptyFilters);\r\n    setBrandSearch('');\r\n    setCustomPriceFrom('');\r\n    setCustomPriceTo('');\r\n    setDisabledFilters({\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n  };\r\n\r\n  // Застосування фільтрів\r\n  const applyFilters = () => {\r\n    setAppliedFilters({ ...selectedFilters });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setActiveFilter(null);\r\n  };\r\n\r\n  // Перемикання \"Більше\"/\"Менше\"\r\n  const toggleShowMore = (filterType) => {\r\n    setShowMore((prev) => ({\r\n      ...prev,\r\n      [filterType]: !prev[filterType],\r\n    }));\r\n  };\r\n\r\n  // Обробка пошуку брендів\r\n  const handleBrandSearch = (e) => {\r\n    setBrandSearch(e.target.value);\r\n  };\r\n\r\n  // Обробка кастомного діапазону цін\r\n  const handleCustomPriceChange = (field, value) => {\r\n    const numValue = value.replace(/[^0-9]/g, '');\r\n    if (field === 'from') {\r\n      setCustomPriceFrom(numValue);\r\n    } else {\r\n      setCustomPriceTo(numValue);\r\n    }\r\n    if (numValue !== '') {\r\n      setSelectedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n      setAppliedFilters((prev) => ({\r\n        ...prev,\r\n        priceRanges: [],\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Обмеження кількості елементів для фільтрів\r\n  const getVisibleItems = useCallback((items, filterType) => {\r\n    if (!items) return [];\r\n\r\n    let filteredItems = items;\r\n\r\n    if (filterType === 'brands') {\r\n      filteredItems = items.filter((brand) =>\r\n        brand.toLowerCase().includes(brandSearch.toLowerCase())\r\n      );\r\n      const topItems = filteredItems.slice(0, 12); // Top 12 brands (by count)\r\n      const remainingItems = filteredItems.slice(12); // Remaining brands\r\n      if (showMore.brands || filteredItems.length <= 12) {\r\n        // Keep top 12 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'types') {\r\n      const topItems = filteredItems.slice(0, 6); // Top 6 types (by count)\r\n      const remainingItems = filteredItems.slice(6); // Remaining types\r\n      if (showMore.types || filteredItems.length <= 6) {\r\n        // Keep top 6 in original order, sort remaining alphabetically\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'categories') {\r\n      if (showMore.categories || items.length <= 6) {\r\n        return [...items].sort((a, b) => a.localeCompare(b));\r\n      }\r\n      return items.slice(0, 6);\r\n    }\r\n\r\n    if (showMore[filterType] || items.length <= 12) {\r\n      return items;\r\n    }\r\n    return items.slice(0, 12);\r\n  }, [brandSearch, showMore]);\r\n\r\n  // Модифікація назви продукту\r\n  const getProductName = (product) => {\r\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\r\n  };\r\n\r\n  // Пагінація\r\n  const totalPages = Math.ceil(totalProducts / productsPerPage);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    setStartPage(page);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    setCurrentPage((prev) => prev + 1);\r\n    setLoadMorePages((prev) => prev + 1);\r\n    setIsPaginated(false);\r\n  };\r\n\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  const totalAppliedFilters =\r\n    (appliedFilters.brands?.length || 0) +\r\n    (appliedFilters.priceRanges?.length || 0) +\r\n    (appliedFilters.volumes?.length || 0) +\r\n    (appliedFilters.types?.length || 0) +\r\n    (isSearchPage ? (appliedFilters.categories?.length || 0) : 0) +\r\n    (customPriceFrom !== '' && customPriceTo !== '' ? 1 : 0);\r\n\r\n  // Оновлення висоти контейнерів фільтрів при зміні showMore або brandSearch\r\n  useEffect(() => {\r\n    Object.keys(showMore).forEach((filterType) => {\r\n      const container = filterItemsRefs.current[filterType];\r\n      if (container) {\r\n        const items = container.querySelector('.filter-items');\r\n        if (items) {\r\n          const visibleItems = getVisibleItems(filters[filterType], filterType);\r\n          const maxVisible = filterType === 'brands' || filterType === 'priceRanges' || filterType === 'volumes' ? 12 : 6;\r\n          const isExpanded = showMore[filterType] || visibleItems.length <= maxVisible;\r\n          // Обчислюємо висоту для згорнутого стану\r\n          const collapsedHeight = visibleItems.length > maxVisible\r\n            ? items.scrollHeight * (maxVisible / filters[filterType].length)\r\n            : items.scrollHeight;\r\n          // Встановлюємо max-height\r\n          container.style.maxHeight = isExpanded\r\n            ? `${items.scrollHeight}px`\r\n            : `${collapsedHeight}px`;\r\n        }\r\n      }\r\n    });\r\n  }, [showMore, filters, brandSearch, getVisibleItems]);\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2>Товари категорії</h2>\r\n      {isLoading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Завантаження...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"product-list-container\">\r\n        {/* Filters column */}\r\n        <div className={`filters ${!isLoading ? 'loaded' : ''}`}>\r\n          <div className=\"filters-header\">\r\n            <h3>Фільтри</h3>\r\n            {totalAppliedFilters > 0 && (\r\n              <div className=\"selected-filters\">\r\n                {isSearchPage &&\r\n                  appliedFilters.categories?.map((category) => (\r\n                    <div key={`category-${category}`} className=\"selected-filter-tag\">\r\n                      <span>{categoryNames[category] || category}</span>\r\n                      <button onClick={() => removeFilter('categories', category)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                {appliedFilters.brands?.map((brand) => (\r\n                  <div key={`brand-${brand}`} className=\"selected-filter-tag\">\r\n                    <span>{brand}</span>\r\n                    <button onClick={() => removeFilter('brands', brand)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {customPriceFrom !== '' && customPriceTo !== '' ? (\r\n                  <div key=\"custom-price\" className=\"selected-filter-tag\">\r\n                    <span>\r\n                      {customPriceFrom}-{customPriceTo} грн\r\n                    </span>\r\n                    <button\r\n                      onClick={() => {\r\n                        setCustomPriceFrom('');\r\n                        setCustomPriceTo('');\r\n                        applyFilters();\r\n                      }}\r\n                    >\r\n                      ×\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  appliedFilters.priceRanges?.map((range) => (\r\n                    <div key={`price-${range}`} className=\"selected-filter-tag\">\r\n                      <span>{range}</span>\r\n                      <button onClick={() => removeFilter('priceRanges', range)}>\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                {appliedFilters.volumes?.map((volume) => (\r\n                  <div key={`volume-${volume}`} className=\"selected-filter-tag\">\r\n                    <span>{volume}</span>\r\n                    <button onClick={() => removeFilter('volumes', volume)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {appliedFilters.types?.map((type) => (\r\n                  <div key={`type-${type}`} className=\"selected-filter-tag\">\r\n                    <span>{type}</span>\r\n                    <button onClick={() => removeFilter('types', type)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {totalAppliedFilters > 1 && (\r\n                  <button className=\"reset-all-filters\" onClick={resetAllFilters}>\r\n                    Скинути всі\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Category filter (only on /search) */}\r\n          {isSearchPage && searchQuery && (\r\n            <div className=\"filter-section\">\r\n              <h4>Категорія</h4>\r\n              <div\r\n                className=\"filter-items-container\"\r\n                ref={(el) => (filterItemsRefs.current['categories'] = el)}\r\n              >\r\n                <div className=\"filter-items filter-items-single-column\">\r\n                  {getVisibleItems(filters.categories, 'categories').map(\r\n                    (category, index) => {\r\n                      const isDisabled = disabledFilters.categories.has(category);\r\n                      return (\r\n                        <label\r\n                          key={index}\r\n                          className={isDisabled ? 'disabled' : ''}\r\n                          ref={(el) => (filterRefs.current[`categories-${category}`] = el)}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            name=\"category\"\r\n                            value={category}\r\n                            checked={\r\n                              selectedFilters.categories?.includes(category) || false\r\n                            }\r\n                            onChange={() => handleFilterChange('categories', category)}\r\n                            disabled={isDisabled}\r\n                          />\r\n                          {categoryNames[category] || category}\r\n                        </label>\r\n                      );\r\n                    }\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {filters.categories.length > 6 && (\r\n                <button\r\n                  className=\"show-more-btn\"\r\n                  onClick={() => toggleShowMore('categories')}\r\n                >\r\n                  {showMore.categories ? 'Менше ↑' : 'Більше ↓'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Brand filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Бренд</h4>\r\n            <input\r\n              type=\"text\"\r\n              className=\"brand-search-input\"\r\n              placeholder=\"Пошук бренду...\"\r\n              value={brandSearch}\r\n              onChange={handleBrandSearch}\r\n            />\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['brands'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.brands, 'brands').map((brand, index) => {\r\n                  const isDisabled = disabledFilters.brands.has(brand);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={`${brand.length > 13 ? 'span-two-columns' : ''} ${\r\n                        isDisabled ? 'disabled' : ''\r\n                      }`}\r\n                      ref={(el) => (filterRefs.current[`brands-${brand}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"brand\"\r\n                        value={brand}\r\n                        checked={selectedFilters.brands?.includes(brand) || false}\r\n                        onChange={() => handleFilterChange('brands', brand)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {brand}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.brands.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('brands')}\r\n              >\r\n                {showMore.brands ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Price filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Ціна (грн)</h4>\r\n            <div className=\"custom-price-inputs\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Від\"\r\n                value={customPriceFrom}\r\n                onChange={(e) => handleCustomPriceChange('from', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"До\"\r\n                value={customPriceTo}\r\n                onChange={(e) => handleCustomPriceChange('to', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n            </div>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['priceRanges'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.priceRanges, 'priceRanges').map(\r\n                  (range, index) => {\r\n                    const isDisabled = disabledFilters.priceRanges.has(range.label);\r\n                    return (\r\n                      <label\r\n                        key={index}\r\n                        className={isDisabled ? 'disabled' : ''}\r\n                        ref={(el) =>\r\n                          (filterRefs.current[`priceRanges-${range.label}`] = el)\r\n                        }\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"priceRange\"\r\n                          value={range.label}\r\n                          checked={\r\n                            selectedFilters.priceRanges?.includes(range.label) || false\r\n                          }\r\n                          onChange={() =>\r\n                            handleFilterChange('priceRanges', range.label)\r\n                          }\r\n                          disabled={isDisabled}\r\n                        />\r\n                        {range.label}\r\n                      </label>\r\n                    );\r\n                  }\r\n                )}\r\n              </div>\r\n            </div>\r\n            {filters.priceRanges.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('priceRanges')}\r\n              >\r\n                {showMore.priceRanges ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Volume filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Об’єм</h4>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['volumes'] = el)}\r\n            >\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.volumes, 'volumes').map((volume, index) => {\r\n                  const isDisabled = disabledFilters.volumes.has(volume);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`volumes-${volume}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"volume\"\r\n                        value={volume}\r\n                        checked={selectedFilters.volumes?.includes(volume) || false}\r\n                        onChange={() => handleFilterChange('volumes', volume)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {volume}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.volumes.length > 12 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('volumes')}\r\n              >\r\n                {showMore.volumes ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Type filter */}\r\n          <div className=\"filter-section\">\r\n            <h4>Тип</h4>\r\n            <div\r\n              className=\"filter-items-container\"\r\n              ref={(el) => (filterItemsRefs.current['types'] = el)}\r\n            >\r\n              <div className=\"filter-items filter-items-single-column\">\r\n                {getVisibleItems(filters.types, 'types').map((type, index) => {\r\n                  const isDisabled = disabledFilters.types.has(type);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={isDisabled ? 'disabled' : ''}\r\n                      ref={(el) => (filterRefs.current[`types-${type}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"type\"\r\n                        value={type}\r\n                        checked={selectedFilters.types?.includes(type) || false}\r\n                        onChange={() => handleFilterChange('types', type)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {type}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.types.length > 6 && (\r\n              <button\r\n                className=\"show-more-btn\"\r\n                onClick={() => toggleShowMore('types')}\r\n              >\r\n                {showMore.types ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Плашка \"Показати товари\" */}\r\n          {activeFilter && (\r\n            <button\r\n              className=\"filter-tag\"\r\n              ref={tagRef}\r\n              onClick={applyFilters}\r\n              style={{\r\n                top: filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                  ? `${\r\n                      filterRefs.current[\r\n                        `${activeFilter.type}-${activeFilter.value}`\r\n                      ].getBoundingClientRect().top -\r\n                      filterRefs.current[\r\n                        `${activeFilter.type}-${activeFilter.value}`\r\n                      ].closest('.filters').getBoundingClientRect().top +\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                        .offsetHeight / 2\r\n                    }px`\r\n                  : '0px',\r\n              }}\r\n            >\r\n              Показати товари ({previewProductCount})\r\n            </button>\r\n          )}\r\n\r\n          {/* Кнопка \"Показати товари\" */}\r\n          <button className=\"apply-filters-btn\" onClick={applyFilters}>\r\n            Показати товари ({previewProductCount})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Products column */}\r\n        <div className=\"products\">\r\n          <div className={`products-list ${!isLoading ? 'loaded' : ''}`}>\r\n            {filteredProducts.length > 0 ? (\r\n              filteredProducts\r\n                .slice(\r\n                  isPaginated\r\n                    ? (currentPage - 1) * productsPerPage\r\n                    : (startPage - 1) * productsPerPage,\r\n                  isPaginated\r\n                    ? currentPage * productsPerPage\r\n                    : startPage * productsPerPage + loadMorePages * productsPerPage\r\n                )\r\n                .map((product, index) => (\r\n                  <div key={`${product.id}-${index}`} className=\"product-card-container\">\r\n                    <Link\r\n                      to={`/product/${product.id}`}\r\n                      className=\"product-card\"\r\n                    >\r\n                      <h3>{getProductName(product)}</h3>\r\n                      <img\r\n                        src={\r\n                          product.images && product.images.length > 0\r\n                            ? product.images[0]\r\n                            : '/img/placeholder.webp'\r\n                        }\r\n                        alt={product.name}\r\n                        onError={(e) => (e.target.src = '/img/placeholder.webp')}\r\n                      />\r\n                      <p className=\"price\">{getMinPrice(product.store_prices)} грн</p>\r\n                      <p>{product.description || 'Опис відсутній'}</p>\r\n                    </Link>\r\n                    <div\r\n                      className={`heart-icon ${savedProducts.has(product.id) ? 'saved' : ''}`}\r\n                      onClick={(e) => handleHeartClick(product.id, e)}\r\n                    >\r\n                      <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        width=\"24\"\r\n                        height=\"24\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill={savedProducts.has(product.id) ? '#d32f2f' : 'none'}\r\n                        stroke=\"#d32f2f\"\r\n                        strokeWidth=\"2\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      >\r\n                        <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"></path>\r\n                      </svg>\r\n                    </div>\r\n                    {showLoginPrompt[product.id] && (\r\n                      <div className=\"login-prompt\">\r\n                        Увійдіть в <Link to=\"/login\" className=\"login-link\">аккаунт</Link> щоб додати до бажаного\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n            ) : (\r\n              !isLoading && <p>Товари не знайдено</p>\r\n            )}\r\n          </div>\r\n          {/* Пагінація та кнопка \"Завантажити ще\" */}\r\n          {!isLoading && totalProducts > productsPerPage && (\r\n            <div className=\"pagination-container\">\r\n              {((startPage - 1 + loadMorePages) * productsPerPage) < totalProducts && (\r\n                <button className=\"load-more-btn\" onClick={handleLoadMore}>\r\n                  Завантажити ще\r\n                </button>\r\n              )}\r\n              <div className=\"pagination\">\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  Попередня\r\n                </button>\r\n                {pageNumbers.map((number) => (\r\n                  <button\r\n                    key={number}\r\n                    className={`pagination-btn ${\r\n                      currentPage === number ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handlePageChange(number)}\r\n                  >\r\n                    {number}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                >\r\n                  Наступна\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}